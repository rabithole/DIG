<script type="text/javascript">
!function(t){var e={};function a(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(r,i,function(e){return t[e]}.bind(null,i));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=1)}([function(t,e){t.exports={clientValidateVat:function(t){const e=/^[A-Za-z]{2,4}(?=.{2,12}$)[-_\s0-9]*(?:[a-zA-Z][-_\s0-9]*){0,2}$/.test(t);return console.log("Validate:",t,"Valid VAT:",e),e},serverValidateVat:function(t,e,a){let r=e.substr(0,2),i={domain:a.shop.permanent_domain,countryCode:r,vatNumber:e};return fetch(t+"/wholesaler/check-valid-vat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(t=>t.json()).then((function(t){console.log("Validate vat:",t)})),!1},showProductPriceInlcudedVat:function(e,a){if(e&&e.shopModules){let e=document.querySelectorAll(".bss-b2b-product-vat");if(e&&e.length){e=e[0];let r=e.closest('form[action*="/cart/add"]');if(r){let e=r.querySelectorAll("select, input.single-option-selector__radio, input.product-form__single-selector");e?(t.exports.handleVariantChangeEvents(r,a),e.forEach((function(e,i){e.addEventListener("change",e=>{t.exports.handleVariantChangeEvents(r,a,0)})}))):console.log("Could not found product variant selector!")}}}},handleVariantChangeEvents:function(e,a,r){setTimeout((function(){let i=e.querySelector('select[name="id"], input[name="id"]');if(i){let e=i.value;t.exports.bssB2BChangeVatPrice(e,a,r)}}),200)},bssB2BChangeVatPrice:function(e,a,r){if("undefined"==typeof bssB2BProduct)return;var i=bssB2BProduct.variantIdArrayMap[e];let n=i;if(n){r&&(n.price_formatted=t.exports.formatMoney(r,a),n.price=r);let e=document.querySelector('.bss-b2b-product-vat[data-product-id="'+i.product_id+'"]');if(e){let r=e.querySelector(".bss-b2b-product-vat-price-no-vat"),o=e.querySelector(".bss-b2b-product-vat-price-has-vat"),s=o.getAttribute("data-included-vat-text"),c=r.getAttribute("data-excluded-vat-text"),l=a.customer.tax_exempt;a.taxes_included?i.taxable?l?(r.innerHTML=n.price_formatted+" "+c,o.innerHTML=n.price_formatted+" "+s):(r.innerHTML=n.price_formatted+" "+c,o.innerHTML=t.exports.formatMoney(n.price*(1+parseFloat(BSS_B2B.countryTax)),a)+" "+s):(r.innerHTML=t.exports.formatMoney(n.price/(1+parseFloat(BSS_B2B.countryTax)),a)+" "+c,o.innerHTML=n.price_formatted+" "+s):i.taxable?l?(r.innerHTML=n.price_formatted+" "+c,o.innerHTML=n.price_formatted+" "+s):(r.innerHTML=n.price_formatted+" "+c,o.innerHTML=t.exports.formatMoney(n.price*(1+parseFloat(BSS_B2B.countryTax)),a)+" "+s):(r.innerHTML=n.price_formatted+" "+c,o.innerHTML=n.price_formatted+" "+s)}}else console.log("Could not found plan price info for variant")},formatMoney:function(t,e,a){let r=e.shop.money_format;"string"==typeof t&&(t=t.replace(".",""));var i="",n=/\{\{\s*(\w+)\s*\}\}/,o=a||r;function s(t,e){return void 0===t?e:t}function c(t,e,a,r){if(e=s(e,2),a=s(a,","),r=s(r,"."),isNaN(t)||null==t)return 0;var i=(t=(t/100).toFixed(e)).split(".");return i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+a)+(i[1]?r+i[1]:"")}switch(o.match(n)[1]){case"amount":i=c(t,2);break;case"amount_no_decimals":i=c(t,0);break;case"amount_with_comma_separator":i=c(t,2,".",",");break;case"amount_no_decimals_with_comma_separator":i=c(t,0,".",",")}return o.replace(n,i)}}},function(t,e,a){"use strict";function r(t,e){e.money_format=t.shop.money_format,e.formatMoney=function(t,e){"string"==typeof t&&(t=t.replace(".",""));var a="",r=/\{\{\s*(\w+)\s*\}\}/,i=e||this.money_format;function n(t,e){return void 0===t?e:t}function o(t,e,a,r){if(e=n(e,2),a=n(a,","),r=n(r,"."),isNaN(t)||null==t)return 0;var i=(t=(t/100).toFixed(e)).split(".");return i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+a)+(i[1]?r+i[1]:"")}switch(i.match(r)[1]){case"amount":a=o(t,2);break;case"amount_no_decimals":a=o(t,0);break;case"amount_with_comma_separator":a=o(t,2,".",",");break;case"amount_no_decimals_with_comma_separator":a=o(t,0,".",",")}return i.replace(r,a)}}a.r(e);const i=a(0);const n=a(0);var o=a(0),s=a.n(o);function c(t,e,a,r,o,c,l,d,u,p){!function(t,e,a,r,n){var o="<div id='modalWarningAMO'>\n<div class='bss-modal-warning-amo-wrap' tabindex='-1'><div><div class='bss-modal-amo active'><div clas='bss-modal-amo-header' style='padding: 10px; background: "+e.amoSettings.headerBackgroundColor+";'><button title='Close (Esc)' type='button' class='bss-modal-button-close'>Ã—</button><b class='bss-modal-amo-title' style='margin-left: 12px; color: "+e.amoSettings.headerTextColor+"'>"+e.amoTranslations.warning_text+"</b>\n</div><div clas='bss-modal-amo-body' style='padding: 18px; background: "+e.amoSettings.contentBackgroundColor+"; color: "+e.amoSettings.contentTextColor+"'><div class='bss-amo-list-warning'><span class='bss-warning-quantity-title'>"+e.amoTranslations.at_least_text;437==e.storeId?o+="</span>":o+=": </span>",o+="<ol class='bss-amo-list-warning-quantity'>\n</ol>\n<span class='bss-warning-amount-title'>"+e.amoTranslations.warning_minimum_order_text,437==e.storeId?o+="</span>":o+=": </span>",o+="<ol class='bss-amo-list-warning-amount'>\n</ol>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class='bss-amo-modal-bg active'></div>\n</div>\n</div>\n</div>",e.optimizeCartData=function(t){let e=t;delete e.cart_level_discount_applications,delete t.currency;let a=[];return t.items.forEach((function(t){a.push({id:t.id,key:t.key,price:t.price,quantity:t.quantity,variant_id:t.variant_id,product_id:t.product_id,taxable:t.taxable})})),e.items=a,e},e.createCheckout=function(a,r,i,n,o,s,c,l,d){let u={domain:a,order:e.optimizeCartData(r),updatedLineItems:i,qbPricingList:n,shopModules:e.shopModules,customFieldValue:l,dcRules:d};t.ajax({url:bssB2bApiServer+"/checkout/create",data:u,dataType:"json",type:"POST",success:function(e){e.success?window.location=e.orderData.invoiceUrl:(t(o).removeAttr("disabled"),null==s?t(o).val(c):t(o).html(s),console.log(e.message))},error:function(e){t(o).removeAttr("disabled"),null==s?t(o).val(c):t(o).html(s),console.log("Could not create checkout:",e)}})},e.modifyCartDataAndCreateCheckout=function(a,r,i,o,s,c,l,d){let u=null,p=null;t(o).is("input")?u=t(o).val():p=t(o).html(),s||t.ajax({url:"/cart.js",type:"GET",dataType:"json",success:function(o){let b=o.attributes,m=!1;if(r&&(b["vat-id"]=r,b.taxExempt=!0,o.attributes=b),m=d&&n?o.attributes.discountCodeRule:[],o.items&&o.items.length>0){var f=a.shop.permanent_domain,g=[],h=[],_=[],y=new Map;o.items.forEach((function(t){var e=t.product_id;-1===h.indexOf(e)&&(h.push(e),g.push('id:"'+e+'"'),_[e]=t.key);var a=y.get(e);a&&null!=a||(y.set(e,[]),a=[]),a.push({key:t.key,quantity:t.quantity,id:t.variant_id,price:t.price}),y.set(e,a)}));var v="/search.js?q="+g.join(" OR ")+"&view=bss.b2b",C=encodeURI(v);t.get(C,(function(r){var n=[];try{n=JSON.parse(r)}catch(t){console.log("product label: JSON parse returns no item")}if(n.length>0){for(var d=[],b=[],g=0;g<n.length;g++){var h=n[g];-1===b.indexOf(h.id)&&(b.push(h.id),d.push({id:h.id,tags:h.tags,collections:h.collections,key:_[h.id]}))}let r=e.cart.qbPricingList;var y=e.getPriceList(a,d,!0);if(y.length>0){for(var v=[],C=0;C<y.length;C++)for(var k=y[C],F=0;F<o.items.length;F++){var w=o.items[F];if(w.product_id==k.id&&w.key!=k.key){var S={id:k.id,discount_type:k.discount_type,value:k.value,key:w.key};v.push(S)}}for(var q=0;q<v.length;q++)y.push(v[q])}if(y.length>0||r.length>0||c||m&&m.length>0)t(i).attr("disabled","disable"),t(i).is("input")?t(i).val("Processing"):t(i).html('<div style="display: flex;"><span style="visibility: hidden;width: 0;">sdad</span><div class="bss-loader"></div></div>'),e.createCheckout(f,o,y,r,i,p,u,l,m);else{t(i).attr("disabled","disable"),l.length&&e.createCheckout(f,o,y,r,i,p,u,l),s=!0,t(i).removeAttr("disabled"),null==p?t(i).val(u):t(i).html(p);let a=t('form[action*="/cart"] [name="checkout"]');0==a.length?document.getElementById("checkout").click():t(a).trigger("click")}}}))}else console.log("Could not get cart data"),t(i).removeAttr("disabled"),null==p?t(i).val(u):t(i).html(p)},error:function(e){console.log("Could not get cart data:",e),t(i).removeAttr("disabled"),null==p?t(i).val(u):t(i).html(p)}})},e.handleCartCheckoutBtn=function(a){var s=t('form[action*="/cart"] [name="checkout"],#dropdown-cart button.btn.btn-checkout.show,a.button.checkout-button[href="/checkout"],form[action*="/checkout"] .add_to_cart,form[action*="/cart"]#cart_form #checkout,form[action*="/cart"] button.Cart__Checkout,form[action*="/cart"] button.cart__checkout,a.btn.disabled.ttmodalbtn[href="/checkout"],form[action*="/cart"] [name="checkout"][type="submit"],button.Cart__Checkout.Button.Button--primary.Button--full,.baskettop button.mini-cart-checkout,.tt-dropdown-menu .btn.itemCheckout,.bss-btn-checkout-mini-cart,button[name="checkout"].btn,form[action*="/checkout"] [name="checkout"],.cart__footer .cart__checkout-button.button,#cartform #checkout,#slidedown-cart button[onclick="window.location=\'/checkout\'"],#dropdown-cart button.btn.btn-checkout');t("#dropdown-cart button.btn.btn-checkout").length&&t("#dropdown-cart button.btn.btn-checkout").removeAttr("onclick");s.on("click",(function(s){t(this).off();let c=this,l=t(this).closest("form");s.preventDefault(),s.stopPropagation();let d=!1,u=!1;e.shopModules&&e.shopModules.length&&e.shopModules.forEach((function(t){"tax_exempt"==t.code?d=t.status:"cart_note"==t.code&&(u=t.status)}));let p=[];if(u&&t(".bss-b2b-custom-fields").length){let a=t(".bss-b2b-custom-fields textarea,.bss-b2b-custom-fields input[name=bss-radio-button]:checked");if(a.length)for(var b=0;b<a.length;b++){var m={key:a[b].className,value:a[b].value};p.push(m)}var f=t(this).closest('form[action="/cart"]').find(".cart-footer__note-input");f.length&&a.push({key:"cart note",value:f.val()});let r=t('.bss-b2b-custom-fields [type="checkbox"]:checked');if(r.length){var g="";for(b=0;b<r.length;b++)g+=" ,"+r[b].value;g.length&&(g=g.slice(2,g.length));m={key:r[0].className,value:g};p.push(m)}var h=t("#bss-select-cart");if(h.length){var _=t("#bss-select-cart option").filter(":selected").val(),y={key:t(h).attr("class"),value:_};p.push(y)}if(1792==e.storeId){var v={key:"Pickup_Store",value:t("input#pickup-store").attr("value").replace(/<[^>]+>/g,"")};p.push(v)}}let C=c,k="",F=t('.bss-b2b-tax-ex-wrapper input[name="bss-b2b-eu-tax"]'),w=t(".bss-b2b-tax-ex-message"),S=t("#bss-b2b-discount-code-input"),q=!1;l.length&&(t(l).find('.bss-b2b-tax-ex-wrapper input[name="bss-b2b-eu-tax"]').length&&(F=t(l).find('.bss-b2b-tax-ex-wrapper input[name="bss-b2b-eu-tax"]')),t(l).find(".bss-b2b-tax-ex-message").length&&(w=t(l).find(".bss-b2b-tax-ex-message"))),t(F).length&&(k=t(F).val()),t(S).length>0&&n&&t(S).is("[discount-code]")&&(q=!0);let x=i.clientValidateVat(k);if(r&&e.amo.warning.length>0)t("#modalWarningAMO").length||(t("body").prepend(o),t(".bss-amo-list-warning").length&&e.amo.warning.forEach(a=>{a.includes("data-warning-quantity")?(t(".bss-warning-quantity-title").show(),437==e.storeId||t(".bss-amo-list-warning-quantity").prepend(a)):a.includes("data-warning-amount")&&(t(".bss-warning-amount-title").show(),437==e.storeId||t(".bss-amo-list-warning-amount").prepend(a))}),t(".bss-modal-button-close").on("click",(function(){t("#modalWarningAMO").remove(),e.handleCartCheckoutBtn(a)})));else if(d&&bssB2BIsRequiredVat&&F.length||d&&!bssB2BIsRequiredVat&&k&&""!=k){let r=t(w).attr("data-error-message"),i=t(w).attr("data-success-message");if(!x)return t(w).html("<p class='bss-b2b-tax-invalid' style='color: orangered; margin-top: 5px'><span style='font-size: 20px; color: orangered; border: 1px orangered solid; border-radius: 50%; width: 40px; height: 40px; padding: 0 4px'>&#10005;</span> "+r+"</p>"),void e.handleCartCheckoutBtn(a);{t(c).attr("disabled","true");let n=k.substr(0,2),o=k.replace(n,""),s={domain:a.shop.permanent_domain,countryCode:n,vatNumber:o};if(e.validateVatSuccess)return void e.modifyCartDataAndCreateCheckout(a,k,C,c,!1,!0,p,q);fetch(bssB2bApiServer+"/wholesaler/check-valid-vat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(t=>t.json()).then((function(n){if(!n.success||"false"===n.message.valid[0])return t(w).html("<p class='bss-b2b-tax-invalid' style='color: orangered; margin-top: 5px'><span style='font-size: 20px; color: orangered; border: 1px orangered solid; border-radius: 50%; width: 40px; height: 40px; padding: 0 4px'>&#10005;</span> "+r+"</p>"),t(c).removeAttr("disabled"),void e.handleCartCheckoutBtn(a);t(w).html("<p class='bss-b2b-tax-valid' style='color: green; margin-top: 5px'><span style='font-size: 20px; color: green; border: 1px green solid; border-radius: 50%; width: 40px; height: 40px; padding: 0 4px'>&#10003;</span> "+i+"</p>"),bssB2BAutoRedirectToCheckout?e.modifyCartDataAndCreateCheckout(a,k,C,c,!1,!0,p,q):(t(c).removeAttr("disabled"),e.validateVatSuccess=!0,t(F).on("change",(function(){t('.bss-b2b-tax-ex-wrapper input[name="bss-b2b-eu-tax"]').val()!=k&&(e.validateVatSuccess=!1)})),e.handleCartCheckoutBtn(a))}))}}else e.modifyCartDataAndCreateCheckout(a,!1,C,c,!1,!1,p,q)}))},e.redirectToCheckoutPage=function(r,i,n,o){var s=a.product?a.product.id:0;i&&(s=i);var c=encodeURI("/search.js?q="+('id:"'+s+'"')+"&view=bss.b2b");let l=!1;e.shopModules&&e.shopModules.length&&e.shopModules.forEach((function(t){"tax_exempt"==t.code&&(l=t.status)})),t.get(c,(function(s){var c=[];try{c=JSON.parse(s)}catch(t){console.log("product label: JSON parse returns no item")}if(c.length>0){for(var d=[],u=[],p=[],b=0;b<c.length;b++){var m=c[b];-1===p.indexOf(m.id)&&(p.push(m.id),d.push({id:m.id,tags:m.tags,collections:m.collections}),u[m.id]={price:m.price,priceMin:m.price_min,priceMax:m.price_min,compareAtPriceMin:m.compare_at_price_min,compareAtPriceMax:m.compare_at_price_max})}var f=e.getPriceList(a,d,!1),g=t(".shopify-payment-button__button.bss-b2b-cp-dynamic,.shopify-payment-button__more-options.bss-b2b-cp-dynamic"+(""!=e.getCssSelector("product_buy_it_now_btn")?e.getCssSelector("product_buy_it_now_btn")+".bss-b2b-cp-dynamic":""));r&&(g=r);var h=!1;g.off(),g.on("click",(function(a){if(!h){a.preventDefault(),a.stopPropagation();var r=!1,s=e.getQueryArray();if(-1!==s.indexOf("variant")&&(r=s.variant),n){var d=t(n).find('select#ProductSelect--product-template :selected, select#ProductSelect--featured-product :selected, select[name="id"] :selected'+e.getCssSelector("product_select_variant_input"));d.length&&(r=d.val())}if(0!=f.length||e.qb.appliedQbRuleForOneProduct||l){let t=e.qb.appliedQbRuleForOneProduct;e.cp.productAfterUseCP.length>0&&t&&e.cp.productAfterUseCP.forEach(e=>{e.id!=i||(t.price=e.price)}),e.handleBuyItNowBtn(f,r,!!i&&c[0],n,t,g)}else{h=!0;var u=o;t(g).remove(),u.show(),t(u).trigger("click")}}}))}}))}}(t,e,a,d,p),function(t,e,a,r,i,o){e.redirectWithInvoiceUrl=function(r,i,n,o,s,c,l,d,u,p){let b={};p&&(b["vat-id"]=p,b.taxExempt=!0),t.ajax({url:bssB2bApiServer+"/checkout/redirect",data:{domain:r,product:i||a.product,variant:n,priceLists:o,quantity:s,appliedQbRule:c,shopModules:e.shopModules,vatAttributes:b},dataType:"json",type:"POST",success:function(e){e.success?window.location=e.orderData.invoiceUrl:(t(l).removeAttr("disabled"),null==d?t(l).val(u):t(l).html(d),console.log(e.message))},error:function(e){t(l).removeAttr("disabled"),null==d?t(l).val(u):t(l).html(d),console.log("Could not create checkout and redirect:",e)}})},e.handleBuyItNowBtn=function(r,i,o,s,c,l){t(l).attr("disabled","disable");let d=l,u=t(l).closest("form"),p=l,b=null,m=null;t(l).is("input")?(b=t(l).val(),t(l).val("Processing")):(m=t(l).html(),t(l).html('<div style="display: flex;"><span style="visibility: hidden;width: 0;">sdad</span><div class="bss-loader"></div></div>'));var f=a.shop.permanent_domain,g=1,h=t(s).find('input[type="number"][name="quantity"],input[type="number"][data-quantity-input],input[type="number"][class$="quantity"],input[id^="Quantity"],input[name="quantity"],select[name="quantity"]'+e.getCartPriceClass("cart_quantity_input"));h.length&&(g=parseInt(h.val()));let _=!1;e.shopModules&&e.shopModules.length&&e.shopModules.forEach((function(t){"tax_exempt"==t.code&&(_=t.status)}));let y="",v=t('.bss-b2b-tax-ex-wrapper input[name="bss-b2b-eu-tax"]'),C=t(".bss-b2b-tax-ex-message");u.length&&(v=t(u).find('.bss-b2b-tax-ex-wrapper input[name="bss-b2b-eu-tax"]'),C=t(u).find(".bss-b2b-tax-ex-message")),t(v).length&&(y=t(v).val());let k=n.clientValidateVat(y);if(_&&bssB2BIsRequiredVat&&v.length||_&&!bssB2BIsRequiredVat&&y&&""!=y){let n=t(C).attr("data-error-message"),s=t(C).attr("data-success-message");if(!k)return t(C).html("<p class='bss-b2b-tax-invalid' style='color: orangered; margin-top: 5px'><span style='font-size: 20px; color: orangered; border: 1px orangered solid; border-radius: 50%; width: 40px; height: 40px; padding: 0 4px'>&#10005;</span> "+n+"</p>"),t(d).removeAttr("disabled"),void t(l).html(m);{t(d).attr("disabled","true");let u=y.substr(0,2),h=y.replace(u,""),_={domain:a.shop.permanent_domain,countryCode:u,vatNumber:h};if(e.validateVatSuccess)return void e.redirectWithInvoiceUrl(f,o,i,r,g,c,p,m,b,y);fetch(bssB2bApiServer+"/wholesaler/check-valid-vat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}).then(t=>t.json()).then((function(a){if(!a.success||"false"===a.message.valid[0])return t(C).html("<p class='bss-b2b-tax-invalid' style='color: orangered; margin-top: 5px'><span style='font-size: 20px; color: orangered; border: 1px orangered solid; border-radius: 50%; width: 40px; height: 40px; padding: 0 4px'>&#10005;</span> "+n+"</p>"),t(d).removeAttr("disabled"),void t(l).html(m);t(C).html("<p class='bss-b2b-tax-valid' style='color: green; margin-top: 5px'><span style='font-size: 20px; color: green; border: 1px green solid; border-radius: 50%; width: 40px; height: 40px; padding: 0 4px'>&#10003;</span> "+s+"</p>"),bssB2BAutoRedirectToCheckout?e.redirectWithInvoiceUrl(f,o,i,r,g,c,p,m,b,y):(t(d).removeAttr("disabled"),e.validateVatSuccess=!0,t(v).on("change",(function(){t(v).val()!=y&&(e.validateVatSuccess=!1)})),t(l).html(m))}))}}else e.redirectWithInvoiceUrl(f,o,i,r,g,c,p,m,b,!1)},e.makeCloneBuyItNow=function(r){var i=t(r).find(".shopify-payment-button__button:not([disabled]):not(.bss-b2b-cp-dynamic),.shopify-payment-button__more-options:not([disabled]):not(.bss-b2b-cp-dynamic),.shopify-payment-button__button.shopify-payment-button__button--unbranded:not([disabled]):not(.bss-b2b-cp-dynamic)"+(""!=e.getCssSelector("product_buy_it_now_btn")?e.getCssSelector("product_buy_it_now_btn")+":not([disabled]):not(.bss-b2b-cp-dynamic)":"")),n=t(r).find(".shopify-payment-button__button.bss-b2b-cp-dynamic, .shopify-payment-button__more-options.bss-b2b-cp-dynamic");if(i.length){var o=t(i).clone();if(0==n.length){o.addClass("bss-b2b-cp-dynamic"),o.css("margin-left",0),o.css("display","block"),t(o).addClass("bss-b2b-btn-buyitnow");var s=t(r).find('.shopify-payment-button[data-shopify="payment-button"]');s.length?s.prepend(o):i.before(o),t(i).remove()}else t(n).addClass("bss-b2b-btn-buyitnow"),t(i).remove(),t(n).show();var c=t(r).attr("id").split("_"),l=c[c.length-1];if(e.page.isProductPage()&&(l=a.product?a.product.id:0),t(r).parent().find("#ProductPrice").length>0&&(l=t(r).parent().find("#ProductPrice").attr("bss-b2b-product-id")),isNaN(l)&&(l=t(r).find("[bss-b2b-product-id]").attr("bss-b2b-product-id")),isNaN(l)&&(l=(c=t(r).attr("id").split("-"))[1],isNaN(l)&&c.length>1)){var d="#ProductJson-"+c[1];try{l=JSON.parse(t(d).html()).id}catch(t){console.log("Could not parse JSON of product section")}}if(isNaN(l)){var u=t(r).closest("#product-id-product-template-quick");u.length&&(l=t(u).attr("data-product-id"))}e.redirectToCheckoutPage(t(r).find(".shopify-payment-button__button.bss-b2b-cp-dynamic, .shopify-payment-button__more-options.bss-b2b-cp-dynamic"),l,r,i)}}}(t,e,a),function(t,e,a,r,i,n){e.cp={},e.cp.productAfterUseCP=[],e.changeProductPrice=function(a,r,n,o){var s=t("[bss-b2b-product-id][bss-b2b-product-price]:not([bss-b2b-product-active]),[bss-b2b-product-id][bss-b2b-current-variant-price]:not([bss-b2b-product-active]),[bss-b2b-product-id][bss-b2b-product-sale-price]:not([bss-b2b-product-active]),[bss-b2b-product-id][bss-b2b-product-featured-price]:not([bss-b2b-product-active]),[bss-b2b-product-id][bss-b2b-product-lowest-price]:not([bss-b2b-product-active]),[bss-b2b-product-id][bss-b2b-product-from-price]:not([bss-b2b-product-active]),[bss-b2b-product-id][bss-b2b-product-now-price]:not([bss-b2b-product-active]),[bss-b2b-product-id][bss-b2b-product-min-price]:not([bss-b2b-product-active]),[bss-b2b-product-id][bss-b2b-product-max-price]:not([bss-b2b-product-active]),[bss-b2b-product-id][bss-b2b-variant-price]:not([bss-b2b-product-active]),[bss-b2b-product-id][bss-b2b-product-price]:not([bss-b2b-product-active]),[bss-b2b-product-id][bss-b2b-variant-unit-price]:not([bss-b2b-product-active])"+e.getCssSelector("product_sale_price")+e.getCssSelector("product_regular_price")+e.getCssSelector("product_featured_price")+e.getCssSelector("product_compare_price")+e.getCssSelector("product_from_price")+e.getCssSelector("product_now_price")+e.getCssSelector("product_min_price")+e.getCssSelector("product_variant_price")+e.getCssSelector("product_lowest_price")+e.getCssSelector("product_current_variant_price")+e.getCssSelector("product_unit_price"));if(r&&(s=t(r+"[bss-b2b-product-id]:not([bss-b2b-product-active])")),s.length>0||i){i=!1,s.attr("bss-b2b-product-active",!0);for(var c=[],l=[],d=0;d<s.length;d++){if(!t(s[d]).find(".bsscommerce-ltsp-message").length){var u=t(s[d]).attr("bss-b2b-product-id");r?(void 0!==t(s[d]).attr("bss-b2b-product-max-price")&&t(s[d]).parent().parent().attr("bss-b2b-product-max-price","true"),void 0!==t(s[d]).attr("bss-b2b-product-min-price")&&t(s[d]).parent().parent().attr("bss-b2b-product-min-price","true")):"price"==t(s[d]).attr("itemprop")||(t(s[d]).parent().attr("bss-b2b-product-id",u),t(s[d]).parent().attr("bss-b2b-product-parent-price","true"),void 0!==t(s[d]).attr("bss-b2b-product-max-price")&&t(s[d]).parent().parent().attr("bss-b2b-product-max-price","true"),void 0!==t(s[d]).attr("bss-b2b-product-min-price")&&t(s[d]).parent().parent().attr("bss-b2b-product-min-price","true")),u&&""!=u&&-1===l.indexOf(u)&&(l.push(u),c.push('id:"'+u+'"'))}}var p="/search.js?q="+c.join(" OR ")+"&view=bss.b2b",b=encodeURI(p);if(1676==e.storeId){var m=Math.round(c.length/2),f=c.length,g=encodeURI("/search.js?q="+c.splice(m,f-m+1).join(" OR ")+"&view=bss.b2b"),h=encodeURI("/search.js?q="+c.splice(0,f-m+1).join(" OR ")+"&view=bss.b2b");e.changePrice(g,a,r,n,o),e.changePrice(h,a,r,n,o)}else e.changePrice(b,a,r,n,o)}},e.changePrice=function(a,i,o,c,l){t.get(a,(function(a){var d=[];try{d=JSON.parse(a)}catch(t){console.log("B2B could not parse data: JSON parse returns no item")}if(d.length||s.a.showProductPriceInlcudedVat(e,i),d.length>0){for(var u=[],p=[],b=[],m=0;m<d.length;m++){var f=d[m];-1===b.indexOf(f.id)&&(b.push(f.id),u.push({id:f.id,tags:f.tags,collections:f.collections}),p[f.id]={price:f.price,priceMin:f.price_min,priceMax:f.price_max,compareAtPriceMin:f.compare_at_price_min,compareAtPriceMax:f.compare_at_price_max,variants:f.variants})}let a=e.getPriceList(i,u,!1);a.length||s.a.showProductPriceInlcudedVat(e,i);var g=!1,h=e.getQueryArray();if(c)(_=t(c).find('select[name="id"]')).length&&(g=_.val());var _,y=e.page.isProductPage();if(y)(_=t('form[action*="/cart/add"]').find('select[name="id"]')).length&&(g=_.val()),-1!==h.indexOf("variant")&&(g=h.variant);e.cp.productAfterUseCP=[];for(var v=0;v<a.length;v++){var C=a[v],k=C.id,F=C.discount_type,w=parseFloat(C.value);let d=100*w;t('[bss-b2b-product-id="'+k+'"][bss-b2b-product-saved-amount]').parent().hide(),t('[bss-b2b-product-id="'+k+'"][bss-b2b-product-parent-price]').parent().find(".sale-tag").hide();var S=t('[bss-b2b-product-id="'+k+'"][bss-b2b-product-price],[bss-b2b-product-id="'+k+'"][bss-b2b-current-variant-price],[bss-b2b-product-id="'+k+'"][bss-b2b-product-sale-price],[bss-b2b-product-id="'+k+'"][bss-b2b-product-featured-price],[bss-b2b-product-id="'+k+'"][bss-b2b-variant-price]'),q=t('[bss-b2b-product-id="'+k+'"][bss-b2b-product-lowest-price],[bss-b2b-product-id="'+k+'"][bss-b2b-product-from-price],[bss-b2b-product-id="'+k+'"][bss-b2b-product-now-price],[bss-b2b-product-id="'+k+'"][bss-b2b-product-min-price]'),x=t('[bss-b2b-product-id="'+k+'"][bss-b2b-product-highest-price],[bss-b2b-product-id="'+k+'"][bss-b2b-product-max-price]'),P=t('[bss-b2b-product-id="'+k+'"][bss-b2b-variant-id][bss-b2b-variant-unit-price],[bss-b2b-product-parent-price][bss-b2b-product-id="'+k+'"][data-unit-price]'),R=[];q.length>0&&(R=q.html());var I=[];x.length>0&&(I=x.html());var A=parseFloat(p[k].price),M=p[k];if(o){if(0==(S=0!==M.compareAtPriceMin?t(o+'[data-sale-price][bss-b2b-product-id="'+k+'"]'):t(o+'[data-regular-price][bss-b2b-product-id="'+k+'"]')).length&&(S=t(o+'[data-sale-price][bss-b2b-product-id="'+k+'"]')),g){if((N=M.variants)&&N.length)for(var B=0;B<N.length;B++){let a=N[B];if(a.id==g){a.price>=a.compare_at_price?-1!==[181,1283,1138,1289].indexOf(e.storeId)||(S=t('[data-regular-price][bss-b2b-product-id="'+k+'"],[bss-b2b-variant-price][bss-b2b-product-id="'+k+'"],[bss-b2b-product-parent-price][bss-b2b-product-id="'+k+'"]'),P=t('[bss-b2b-product-parent-price][bss-b2b-product-id="'+k+'"][data-unit-price]')):-1!==[181,1283,1183,1289].indexOf(e.storeId)||(S=t('[data-sale-price][bss-b2b-product-id="'+k+'"]:not(meta),.product__current-price[bss-b2b-product-id="'+k+'"]:not(meta),[bss-b2b-variant-price][bss-b2b-product-id="'+k+'"]:not(meta),[bss-b2b-product-parent-price][bss-b2b-product-id="'+k+'"]:not(meta)'),P=t('[bss-b2b-product-parent-price][bss-b2b-product-id="'+k+'"][data-unit-price]'));var T='form[action*="/cart/add"]';if(c&&(T=t(c)),e.checkVariantExist(T,a)?S.length&&181==e.storeId&&Object.keys(S).forEach((function(e){"product-item-content"==t(S[e]).attr("class")&&delete S[e]})):181==e.storeId||13==e.storeId||1138==e.storeId||(S=t('[data-regular-price][bss-b2b-product-id="'+k+'"]')),t('#ProductPrice.product-single__price[data-sale-price][bss-b2b-product-id="'+k+'"]').length&&(S=t('#ProductPrice.product-single__price[data-sale-price][bss-b2b-product-id="'+k+'"]')),S&&t(S).closest(".Product__Info").find("form span[data-money-convertible]").length){let e=t(S).closest(".Product__Info").find("form span[data-money-convertible]");S.push(e[0])}A=parseFloat(N[B].price)}}}else if(S.length)if(c&&t(S).hasClass("gt_product-price--number")){A=parseFloat(t(S).attr("data-currentprice"));var j=parseInt(t(c).find(".gt_product-quantity--number").val());A*=j}else{S.find('[bss-b2b-product-id="'+k+'"]').length&&(S=S.find('[bss-b2b-product-id="'+k+'"]'));var O=S.html();O=O.replace(/\D/g,""),78==e.storeId?A=parseFloat(O):77!==e.storeId&&(A=100*parseFloat(O))}else if(181==e.storeId||13==e.storeId){(S=t('[data-regular-price][bss-b2b-product-id="'+k+'"],[bss-b2b-variant-price][bss-b2b-product-id="'+k+'"],[bss-b2b-product-parent-price][bss-b2b-product-id="'+k+'"]')).length&&Object.keys(S).forEach((function(e){"product-item-content"==t(S[e]).attr("class")&&delete S[e]}));let e='[data-id="'+("#ProductItemJson-"+k)+'"]';S.length&&t(c).find(e).length&&(O=(O=S.html()).replace(/\D/g,""),A=100*parseFloat(O))}0==S.length&&(S=t(o+'[data-sale-price][bss-b2b-product-id="'+k+'"]'))}else{var N;if(g&&y&&i.product.id==k)if(1==(N=M.variants).length)g=!1;else if(N&&N.length)for(B=0;B<N.length;B++){let a=N[B];if(a.id==g){a.price>=a.compare_at_price?-1!==[181,1283,1138,1289].indexOf(e.storeId)||(S=t('[data-regular-price][bss-b2b-product-id="'+k+'"],[bss-b2b-variant-price][bss-b2b-product-id="'+k+'"],[bss-b2b-product-parent-price][bss-b2b-product-id="'+k+'"]')):-1!==[181,1138].indexOf(e.storeId)||(S=t('[data-sale-price][bss-b2b-product-id="'+k+'"],[bss-b2b-current-variant-price][bss-b2b-product-id="'+k+'"],[bss-b2b-variant-price][bss-b2b-product-id="'+k+'"]'));T='form[action*="/cart/add"]';c&&(T=t(c)),e.checkVariantExist(T,a)||-1!==[181,1138].indexOf(e.storeId)||(S=t('[data-regular-price][bss-b2b-product-id="'+k+'"]')),A=parseFloat(N[B].price)}}}if(1654==e.storeId&&!e.page.isProductPage()){let t=p[k].variants;t.length&&t.map(t=>{"per paar"==t.title&&(A=parseFloat(t.price))})}var E=parseFloat(p[k].priceMin);if(0==F){if(1138==e.storeId)if(l){t('#quick form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').css("visibility","hidden"),A=e.getModifiedPrice(0,A,d);let a=parseFloat(t("#quantity").val());A*=a;let i=t("#AddToCartForm-product-template").find(S);i.length&&i.html(r.formatMoney(A)),setTimeout((function(){let e=t(".bss-b2b-custom[data-product-id]").attr("content");t('#quick form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').html(e),t('#quick form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').css("visibility","visible")}),100)}else if(y){t('form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').css("visibility","hidden"),A=e.getModifiedPrice(0,A,d);let a=parseFloat(t("#quantity-container #quantity").val());A*=a;let i=t(".product__price-container").find(S);i.length&&i.html(r.formatMoney(A)),setTimeout((function(){let e=t(".bss-b2b-custom[data-product-id]").attr("content");t('form[action*="/cart/add"] .product__price-container .bss-b2b-custom[data-product-id]').html(e),t('form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').css("visibility","visible")}),100)}else{if(A=e.getModifiedPrice(0,A,d),c&&t(S).hasClass("gt_product-price--number")){j=parseInt(t(c).find(".gt_product-quantity--number").val());A*=j}S.html(r.formatMoney(A))}else{if(A=e.getModifiedPrice(0,A,d),c&&t(S).hasClass("gt_product-price--number")){j=parseInt(t(c).find(".gt_product-quantity--number").val());A*=j}S.html(r.formatMoney(A)),e.showUnitPrice(P,M.variants,k,A,p[k].price,g)}if(n){let t=e.MC.convertPriceByMc(A,S);S.html(t)}if(q.length>0&&R){var G=e.getModifiedPrice(0,E,d);if(R.includes(r.formatMoney(E))||r.formatMoney(E).includes(R))R=R.replace(r.formatMoney(E),r.formatMoney(G)),r.formatMoney(E).includes(R)&&(R=r.formatMoney(G));else{var V=R.replace(/\D/g,""),D=r.formatMoney(G).replace(/[^\d.,]/g,"");R=R.replace(V,D)}n&&t.each(q,(function(a,i){if((i=t(i)).children().length>0)return!0;let n=e.MC.convertPriceByMc(G,i);R=(R=R.replace(r.formatMoney(G),n)).replace("bss-b2b-product-lowest-price",'bss-shop-base-currency="'+G+'" bss-b2b-product-lowest-price')})),q.html(R)}}else if(1==F){if(1138==e.storeId)if(l){t('#quick form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').css("visibility","hidden"),A=e.getModifiedPrice(1,A,d);let a=parseFloat(t("#quantity").val());A*=a;let i=t("#AddToCartForm-product-template").find(S);i.length&&i.html(r.formatMoney(A)),setTimeout((function(){let e=t(".bss-b2b-custom[data-product-id]").attr("content");t('#quick form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').html(e),t('#quick form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').css("visibility","visible")}),100)}else if(y){t('form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').css("visibility","hidden"),A=e.getModifiedPrice(1,A,d);let a=parseFloat(t("#quantity-container #quantity").val());A*=a;let i=t(".product__price-container").find(S);i.length&&i.html(r.formatMoney(A)),setTimeout((function(){let e=t(".bss-b2b-custom[data-product-id]").attr("content");t('form[action*="/cart/add"] .product__price-container .bss-b2b-custom[data-product-id]').html(e),t('form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').css("visibility","visible")}),100)}else A=e.getModifiedPrice(1,A,d),S.html(r.formatMoney(A));else A=e.getModifiedPrice(1,A,d),S.html(r.formatMoney(A)),e.showUnitPrice(P,M.variants,k,A,p[k].price,g);if(n){let t=e.MC.convertPriceByMc(A,S);S.html(t)}if(q.length>0&&R.length>0){G=e.getModifiedPrice(1,E,d);(R.includes(r.formatMoney(E))||r.formatMoney(E).includes(R))&&(R=R.replace(r.formatMoney(E),r.formatMoney(G)),r.formatMoney(E).includes(R)&&(R=r.formatMoney(G))),n&&t.each(q,(function(a,i){if((i=t(i)).children().length>0)return!0;let n=e.MC.convertPriceByMc(G,i);R=(R=R.replace(r.formatMoney(G),n)).replace("bss-b2b-product-lowest-price",'bss-shop-base-currency="'+G+'" bss-b2b-product-lowest-price')})),q.html(R)}if(t('.bss-b2b--on-sale[on-sale-product-id="'+k+'"]').length){let e="Save ",a="#ee0000";C.name.match(/\{([^}]+)\}/)&&(e=C.name.match(/\{([^}]+)\}/)[1]+" "),C.name.match(/\[([^}]+)\]/)&&(a=C.name.match(/\[([^}]+)\]/)[1]),t('.bss-b2b--on-sale[on-sale-product-id="'+k+'"]').css("background",a).html(e+r.formatMoney(d)).fadeIn(300)}}else if(2==F){if(1138==e.storeId)if(l){t('#quick form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').css("visibility","hidden"),A=e.getModifiedPrice(2,A,w);let a=parseFloat(t("#quantity").val());A*=a;let i=t("#AddToCartForm-product-template").find(S);i.length&&i.html(r.formatMoney(A)),setTimeout((function(){let e=t(".bss-b2b-custom[data-product-id]").attr("content");t('#quick form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').html(e),t('#quick form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').css("visibility","visible")}),100)}else if(y){t('form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').css("visibility","hidden"),A=e.getModifiedPrice(2,A,w);let a=parseFloat(t("#quantity-container #quantity").val());A*=a;let i=t(".product__price-container").find(S);i.length&&i.html(r.formatMoney(A)),setTimeout((function(){let e=t(".bss-b2b-custom[data-product-id]").attr("content");t('form[action*="/cart/add"] .product__price-container .bss-b2b-custom[data-product-id]').html(e),t('form[action*="/cart/add"] .bss-b2b-custom[data-product-id]').css("visibility","visible")}),100)}else A=e.getModifiedPrice(2,A,w),S.html(r.formatMoney(A));else A=e.getModifiedPrice(2,A,w),1508==e.storeId&&A%.5==0&&(A=Math.round(A)),S.html(r.formatMoney(A)),e.showUnitPrice(P,M.variants,k,A,p[k].price,g);if(n){let t=e.MC.convertPriceByMc(A,S);S.html(t)}if(181==e.storeId);else if(q.length>0&&R.length>0){G=e.getModifiedPrice(2,E,w);(R.includes(r.formatMoney(E))||r.formatMoney(E).includes(R))&&(R=R.replace(r.formatMoney(E),r.formatMoney(G)),r.formatMoney(E).includes(R)&&(R=r.formatMoney(G)),n&&t.each(q,(function(a,i){if((i=t(i)).children().length>0)return!0;let n=e.MC.convertPriceByMc(G,i);R=(R=R.replace(r.formatMoney(G),n)).replace("bss-b2b-product-lowest-price",'bss-shop-base-currency="'+G+'" bss-b2b-product-lowest-price')}))),q.html(R)}if(t('.bss-b2b--on-sale[on-sale-product-id="'+k+'"]').length){let e="Save ",a="#ee0000";C.name.match(/\{([^}]+)\}/)&&(e=C.name.match(/\{([^}]+)\}/)[1]+" "),C.name.match(/\[([^}]+)\]/)&&(a=C.name.match(/\[([^}]+)\]/)[1]),t('.bss-b2b--on-sale[on-sale-product-id="'+k+'"]').css("background",a).html(e+w+"%").fadeIn(300)}s.a.bssB2BChangeVatPrice(g,i,A)}e.cp.productAfterUseCP.push({id:k,price:A});var $=parseFloat(p[k].priceMax);if(0==F){if(x.length>0&&I){var Q=e.getModifiedPrice(0,$,d);if(I.includes(r.formatMoney($))||r.formatMoney($).includes(I))I=I.replace(r.formatMoney($),r.formatMoney(Q)),r.formatMoney($).includes(I)&&(I=r.formatMoney(Q));else{V=I.replace(/\D/g,"");I=I.replace(V,Q/100)}x.html(I)}}else if(1==F){if(x.length>0&&I.length>0){Q=e.getModifiedPrice(1,$,d);(I.includes(r.formatMoney($))||r.formatMoney($).includes(I))&&(I=I.replace(r.formatMoney($),r.formatMoney(Q)),r.formatMoney($).includes(I)&&(I=r.formatMoney(Q))),x.html(I)}}else if(2==F&&x.length>0&&I.length>0){Q=e.getModifiedPrice(2,$,w);(I.includes(r.formatMoney($))||r.formatMoney($).includes(I))&&(I=I.replace(r.formatMoney($),r.formatMoney(Q)),r.formatMoney($).includes(I)&&(I=r.formatMoney(Q))),x.html(I)}if(-1!==[826,1033,1138].indexOf(e.storeId)&&t('.bss-b2b-custom[data-product-id="'+k+'"]').length&&t('.bss-b2b-custom[data-product-id="'+k+'"]').html(r.formatMoney(M.price)),664==e.storeId&&t('.bss-b2b-wdw-vechta-origin-price[data-product-id="'+k+'"]').length&&(t('.bss-b2b-wdw-vechta-origin-price[data-product-id="'+k+'"]').html(r.formatMoney(M.price)),t('.bss-b2b-wdw-vechta-origin-price[data-product-id="'+k+'"]').css("visibility","visible"),t('.bss-b2b-wdw-vechta-origin-price[data-product-id="'+k+'"]').css("text-decoration","line-through")),1737==e.storeId&&t('[bss-b2b-unit-1737][bss-b2b-product-id="'+k+'"]').length&&(t('[bss-b2b-unit-1737][bss-b2b-product-id="'+k+'"]').html(r.formatMoney(A/24)),t('[bss-b2b-unit-1737][bss-b2b-product-id="'+k+'"]').css("visibility","visible")),(13==e.storeId||1918==e.storeId)&&t('[bss-b2b-product-id="'+k+'"][bss-b2b-custom-taxrate]').length){let e=t('[bss-b2b-product-id="'+k+'"][bss-b2b-custom-taxrate]').attr("bss-b2b-custom-taxrate");t('[bss-b2b-product-id="'+k+'"][bss-b2b-custom-taxrate]').html(r.formatMoney(A*e))}}if(n){let t=sessionStorage.getItem("currentCurrency"),a=sessionStorage.getItem("currentCurrencyFormat");e.MC.preConvertCurrency(t,a)}else t("[bss-b2b-product-id]").css("visibility","visible"),t("[bss-b2b-product-id][bss-b2b-product-parent-price]").show();t("[bss-b2b-product-id]").css("visibility","visible"),t("[bss-b2b-product-id][bss-b2b-product-parent-price]").show(),324==e.storeId&&t("span[data-money-convertible]").show(),778==e.storeId&&t("span[bss-b2b-product-parent-price]").show(),1283==e.storeId&&t("[bss-b2b-product-price]").show()}}))},e.showUnitPrice=function(e,a,i,n,o,s){if(a&&a.length)for(let c=0;c<a.length;c++){let l=a[c],d=l.unit_price;d&&(s?s==l.id&&(e=e.html(r.formatMoney(n*parseFloat(d)/l.price))):e=(e=t('[bss-b2b-product-id="'+i+'"][bss-b2b-variant-id="'+l.id+'"][bss-b2b-variant-unit-price]')).html(r.formatMoney(n*parseFloat(d)/o)))}},e.applyChangePriceForMultiCarform=function(){var r=t('form[action*="/cart/add"],form[action*="/checkout"]'+e.getCssSelector("product_cart_form"));if(r.length){var i=300,n=e.getCssSelector("product_time_delay_change_variant");""==n||isNaN(n)||(i=parseInt(n));for(var o=0;o<r.length;o++){var s=t(r[o]),c=s.attr("id"),l=(s=t("#"+c)).find("select, input.single-option-selector__radio"+e.getCssSelector("product_variant_option_input"));if(l.length)for(var d=0;d<l.length;d++){(b=t(l[d])).attr("data-cart-form",c),b.on("change",(function(){1608==e.storeId&&t(".money[data-sale-price][bss-b2b-product-price]").css("visibility","hidden");var r=t("#"+t(this).attr("data-cart-form")),n=r.parent().parent();r.closest(".product-main").length&&(n=t(r.closest(".product-main"))),r.parent().parent().find("[bss-b2b-product-id][bss-b2b-product-parent-price]").hide(),setTimeout((function(){n.find("[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),n.find("[bss-b2b-product-id][bss-b2b-product-parent-price]").hide(),778==e.storeId?e.changeProductPrice(a,null,r):e.changeProductPrice(a,"."+n.attr("class").split(" ")[0]+" [bss-b2b-product-parent-price]",r)}),i),setTimeout((function(){e.makeCloneBuyItNow(r)}),3*i)}))}var u=s.find('[id^="AddToCart"]:not(form),button[aria-controls="CartDrawer"],a[aria-controls="CartDrawer"], button[name="add"].product-form__add-to-cart,button[name="add"].product__add-to-cart-button,button[name="add"].add-to-cart,a.ajax-cart__toggle,a.cart-toggle,button.product-form--atc-button,button.productitem--action-atc,#add-to-cart-product-template-quick'+e.getCssSelector("ajax_cart_action_button"));u.length&&(u.attr("data-cart-form",c),t(u).on("click",(function(){var a=1500,r=e.getCssSelector("ajax_cart_time_delay_opening_cart");""==r||isNaN(r)||(a=parseInt(r)),e.makeChangesAfterClickAjaxcart(a);var n=t("#"+t(this).attr("data-cart-form"));setTimeout((function(){e.makeCloneBuyItNow(n)}),3*i)})));var p=s.find(".gt_swatches--select");if(p.length){let r=c.split("_"),n=t('script[data-id="'+r[r.length-1]+'"]').parent();p=t(n).find(".gt_swatches--select, .item.gt_product-carousel--item, .gt_product-quantity--minus, .gt_product-quantity--plus");for(d=0;d<p.length;d++){var b;(b=t(p[d])).attr("data-cart-form",c),b.on("click",(function(){var r=t("#"+t(this).attr("data-cart-form"));r.parent().parent().find("[bss-b2b-product-id][bss-b2b-product-parent-price]").hide(),setTimeout((function(){r.parent().parent().find("[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),e.changeProductPrice(a,"."+r.parent().parent().attr("class").split(" ")[0]+" [bss-b2b-product-parent-price]",r)}),i),setTimeout((function(){e.makeCloneBuyItNow(r)}),3*i)}))}}}}},e.applyChangePriceForCollectionPage=function(){var r=t('form[action*="/cart/add"]'+e.getCssSelector("product_cart_form"));if(r.length){var i=300,n=e.getCssSelector("product_time_delay_change_variant");""==n||isNaN(n)||(i=parseInt(n));for(var o=0;o<r.length;o++){let n=t(r[o]).closest(".product-item-content");n.length||(n=t(r[o]));let c=t(n).find(".product-item-option");if(c.length||(c=t(n).find(".select")),243==e.storeId&&(c=t(n).find(".variant-input-wrap .variant-input input")),n.length&&c.length)if(181==e.storeId){var s=t(c).find("select.single-option-selector");let r=t(c).find(".wrapper-swatches-product-item");if(s.length&&s.on("change",(function(){let r=n;var i=t(r);t(r).closest(".product-single__meta");i.find("[bss-b2b-product-id][bss-b2b-product-parent-price]").hide(),setTimeout((function(){i.find("[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),i.find("[bss-b2b-product-id][bss-b2b-product-parent-price]").hide(),e.changeProductPrice(a,"."+i.attr("class").split(" ")[0]+" [bss-b2b-product-parent-price]",i)}),1e3)})),r.length){let i=t(r).find(".swatch-element");i.length&&i.on("click",(function(){let r=n;var i=t(r);t(r).closest(".product-single__meta");i.find("[bss-b2b-product-id][bss-b2b-product-parent-price]").hide(),setTimeout((function(){i.find("[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),i.find("[bss-b2b-product-id][bss-b2b-product-parent-price]").hide(),e.changeProductPrice(a,"."+i.attr("class").split(" ")[0]+" [bss-b2b-product-parent-price]",i)}),1e3)}))}}else if(243==e.storeId){(s=t(c)).length&&s.on("change",(function(){let r=n;var o=t(r),s=t(r).closest(".product-single__meta");o.closest(".product-single__meta").find("[bss-b2b-product-id][bss-b2b-product-parent-price]").hide(),setTimeout((function(){s.find("[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),s.find("[bss-b2b-product-id][bss-b2b-product-parent-price]").hide(),e.changeProductPrice(a,"."+s.attr("class").split(" ")[0]+" [bss-b2b-product-parent-price]",o)}),i)}))}else{(s=t(c).find("select.single-option-selector-item")).length&&s.on("change",(function(){let r=t(this).closest(".product-item-content");var n=t(r),o=t(r);n.find("[bss-b2b-product-id][bss-b2b-product-parent-price]").hide(),setTimeout((function(){o.find("[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),o.find("[bss-b2b-product-id][bss-b2b-product-parent-price]").hide(),e.changeProductPrice(a,"."+o.attr("class").split(" ")[0]+" [bss-b2b-product-parent-price]",n)}),i)}))}}}},e.handleChangeQuantityEventFirstTime=function(r,i){t("[bss-b2b-item-price],[bss-b2b-cart-item-key],[data-cart-item-regular-price], NaN[bss-b2b-ajax-cart-subtotal]"+e.getCartPriceClass("cart_total")+e.getCartPriceClass("cart_subtotal")+e.getCartPriceClass("cart_item_regular_price")+e.getCartPriceClass("cart_item_original_price")).hide(),t('form[action*="/cart"] input[type="number"], form[action*="/cart"] input[data-quantity-input],form[action*="/cart"] input[data-cart-item-input-quantity],form[action*="/cart"] input.js-qty__input,.cart-wrapper input.quantity-selector__value'+e.getCartPriceClass("cart_quantity_input")).prop("disabled",!0),t('.cart-wrapper button.cart-recap__checkout[name="checkout"][type="submit"]').length>0&&setTimeout((function(){e.cart.fixer(a,!0),e.handleCartCheckoutBtn(a)}),4e3),e.configData&&e.configData.length&&(t("[bss-b2b-item-price],[bss-b2b-cart-item-key],[data-cart-item-regular-price], NaN[bss-b2b-ajax-cart-subtotal]"+e.getCartPriceClass("cart_total")+e.getCartPriceClass("cart_subtotal")+e.getCartPriceClass("cart_item_regular_price")+e.getCartPriceClass("cart_item_original_price")).hide(),t('form[action="/cart"] input[type="number"], form[action="/cart"] input[data-quantity-input],form[action="/cart"] input[data-cart-item-input-quantity],form[action="/cart"] input.js-qty__input'+e.getCartPriceClass("cart_quantity_input")).prop("disabled",!0),setTimeout((function(){e.cart.fixer(a,!0)}),r),t("[bss-b2b-item-price], [bss-b2b-cart-item-key], [bss-b2b-ajax-cart-subtotal] "+e.getCartPriceClass("cart_item_regular_price")+e.getCartPriceClass("cart_item_original_price")).fadeIn(i)),setTimeout((function(){t('form[action*="/cart"] input[type="number"], form[action*="/cart"] input[data-quantity-input],form[action*="/cart"] input[data-cart-item-input-quantity],form[action*="/cart"] input.js-qty__input,.cart-wrapper input.quantity-selector__value'+e.getCartPriceClass("cart_quantity_input")).prop("disabled",!1)}),i)},e.changeVariantOptionProductPage=function(r,i){var n=t(r).find("[bss-b2b-product-id][bss-b2b-product-parent-price]");324==e.storeId&&(n=t(r).find("[bss-b2b-product-id][bss-b2b-product-parent-price],[data-money-convertible]")),778==e.storeId&&(n=t(r).parent().find("[bss-b2b-product-id][bss-b2b-product-parent-price]")),1283==e.storeId&&(n=t(r).closest(".product_single_detail_section").find("[bss-b2b-product-id][bss-b2b-product-price]")),0==n.length&&(r=t(r).parent().parent(),n=r.find("[bss-b2b-product-id][bss-b2b-product-parent-price]")),n.hide(),n.css("visibility","hidden");var o=200,s=e.getCssSelector("product_time_delay_change_variant");""==s||isNaN(s)||(o=parseInt(s)),setTimeout((function(){n.removeAttr("bss-b2b-product-active"),778==e.storeId||1283==e.storeId?e.changeProductPrice(a,null,!1):1138==e.storeId?(t("[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),t("[bss-b2b-product-id][bss-b2b-product-price]").removeAttr("bss-b2b-product-active"),e.changeProductPrice(a,null,!1)):e.changeProductPrice(a,"."+r.attr("class").split(" ")[0]+" [bss-b2b-product-parent-price]",!1)}),o),setTimeout((function(){e.makeCloneBuyItNow(i)}),2*o),918==e.storeId&&setTimeout((function(){if(t(".tot_price").length){let r=t(".tot_price").html().replace(/^\D+/g,"");e.printSaveTo(a,r)}}),5*o)}}(t,e,a,r,o,u)}function l(t,e,a,r){e.makeChangesAfterClickAjaxcart=function(r){t('[bss-b2b-ajax-cart-subtotal], .cart-drawer__subtotal-value, [bss-b2b-ajax-cart-line-price], [bss-b2b-ajax-original-line-price],[data-cart-price-bubble][data-cart-price], [data-section-id="cart-drawer"] [data-cart-subtotal],#ajaxifyCart .cart-subtotal--price,header[data-sticky-class="header-mobile-center header-color-dark"] > .money,.cartTotalSelector,.header-cart[data-ajax-cart-trigger]'+e.getCartPriceClass("ajax_cart_item_original_price")+e.getCartPriceClass("ajax_cart_item_regular_price")+e.getCartPriceClass("ajax_cart_item_line_price")+e.getCartPriceClass("ajax_cart_original_item_line_price")+e.getCartPriceClass("ajax_cart_total")+e.getCartPriceClass("ajax_cart_subtotal")).hide(),t(".atc-banner--container [data-atc-banner-product-price-value],.atc-banner--container [data-atc-banner-cart-subtotal]").css("visibility","hidden"),setTimeout((function(){1759==e.storeId&&e.changeProductPrice(a,null,!1),e.cart.fixer(a,!1,!0),setTimeout((function(){if(e.handleQuantityChangeAjaxCart(!0),1759==e.storeId){let r=t("input.js_agree_ck");r.length>0&&(r.is(":checked")&&e.handleCartCheckoutBtn(a),r.on("change",(function(){r.is(":checked")?e.handleCartCheckoutBtn(a):t(document).on("click",'[name="checkout"], [name="goto_pp"], [name="goto_gc"]',(function(t){console.log("click"),t.preventDefault(),t.stopPropagation()}))})))}else e.handleCartCheckoutBtn(a)}),r)}),r)},e.handleAjaxCart=function(){e.page.isCartPage()||""!=t("[data-cart-price-bubble][data-cart-price]").html()&&(t("[data-cart-price-bubble][data-cart-price]").hide(),e.cart.fixer(a,!1,!0));var r=1500;537==e.storeId&&(r=2200);var i=e.getCssSelector("ajax_cart_time_delay_opening_cart");""==i||isNaN(i)||(r=parseInt(i));var n=t('[id^="AddToCart"]:not(form), [id^="addToCart"]:not(form):not(span),button[aria-controls="CartDrawer"],a[aria-controls="CartDrawer"], button[name="add"].product-form__add-to-cart,button[name="add"].product__add-to-cart-button,button[name="add"].add-to-cart,a.ajax-cart__toggle,span.icon__fallback-text,button#add-to-cart.add-to-cart,a.cart-toggle,.mini-cart-wrap[data-cart-mini-toggle],.addtocart-button-active[data-product-submit],button.product-form--atc-button,button.productitem--action-atc,#add-to-cart-product-template,.product-form__add-button[data-action="add-to-cart"],.header__cart-toggle[data-action="toggle-mini-cart"],button[type="submit"][data-action="add-to-cart"],button.btn-addtocart,form[action*="/cart/add"] input.AddtoCart,a[data-cart-toggle][data-dropdown-menu],input[data-btn-addtocart],.cart-block-click,button[data-btn-addtocart],a.js-cart-trigger[href="/cart"],form.js-product-form,form[action*="/cart/add"] button.single_add_to_cart_button.button,.Header__Wrapper .Header__FlexItem a[data-drawer-id="sidebar-cart"],button.product-form__cart-submit,.add-to-cart-box .add-to-cart,a.header-cart-btn.cart-toggle,.product-page--submit-action .btn,.ajax-submit.action_button.add_to_cart,.site-header__cart.cart-modal,form[action*="/cart/add"] button.ajax-submit.button--add-to-cart,form[action*="/cart/add"] div.add-to-cart button.button[type="submit"],a.add-cart-btn,button.tt-dropdown-toggle,.quick-view button.add-to-cart-btn.btn,button.add.font--secondary-button,button[type="submit"].gf_add-to-cart.product-form-product-template,a.header--cart-link.font--accent,.cart-container,.icon-bag.mini_cart.dropdown_link,a.my-cart-link,.product-form--button-container button.product-form--add-to-cart,.product-form--submit span.price,a.push_side.pr.cb.chp.db,.ProductForm__AddToCart,.slideout__trigger-mobile-menu.js-mini-cart-trigger.js-slideout-open,button.btn.btn--full.btn--status.btn--animated.js-product-button-add-to-cart,a.header__btn-cart.js-popup-button,a.js-product-button-add-to-cart'+e.getCssSelector("ajax_cart_action_button"));n.length&&(n.on("click",(function(t){e.makeChangesAfterClickAjaxcart(r)})),1629==e.storeId&&n.on("hover",(function(t){e.makeChangesAfterClickAjaxcart(r)})),1609!=e.storeId&&1788!=e.storeId||n.on("mouseover",(function(t){e.makeChangesAfterClickAjaxcart(r)})))},e.handleQuantityChangeAjaxCart=function(i){var n=i?2500:2e3,o=e.getCssSelector("ajax_cart_time_delay_changing_qty");""==o||isNaN(o)||(n=parseInt(o)),t(".bss-b2b-cart-item-qty-table-header").length&&(t(".bss-b2b-cart-item-qty-table-header").off(),t(".bss-b2b-cart-item-qty-table-header").on("click",(function(e){e.stopPropagation(),t(this).closest(".bss-b2b-cart-item-qty-table").find(".bss-b2b-qty-table-wrapper").toggle()})));var s=t('form[action*="/cart"] .ajaxcart__qty-adjust,form[action*="/cart"] .ajaxifyCart--qty-adjuster,form[action*="/cart"] .js-qty__adjust,form[action*="/cart"] .quantity-selector__button,form[action*="/cart"] a[data-action="update-item-quantity"],form[action*="/cart"] button.quantity-selector__button,form[action*="/cart"] a[data-action="decrease-quantity"],.cart-window .cart-prod-qty .qty-btn,form[action*="/cart"] span.ajaxifyCart--qty-adjuster,form[action*="/cart"] a.ajaxifyCart--remove,form[action*="/checkout"] .js-change-quantity,form[action*="/cart"] a.QuantitySelector__Button,form[action*="/cart"] a.CartItem__Remove,ul.mini-products-list a.remove,.cart-item-quantity-button,.left.product-quantity-box .js-change-quantity,#cart-modal .quantity-part input[type="button"],form[action*="/cart"] a.minus,form[action*="/cart"] a.plus,div.mini-cart__item--content span.icon-minus,div.mini-cart__item--content span.icon-plus,.btn.qty-adjust,span.ss-icon.js-change-quantity');if(e.page.isProductPage()&&514==e.storeId){var c=t(".inc.button,.dec.button");t(c).on("click",(function(){var e=t(".product_single_price .grid-link__org_price[bss-b2b-product-id]").html();e=e.replace(/\D/g,"");let a=parseFloat(e),r=t("#quantity").val()*a;t(".total-price span").html(Shopify.formatMoney(r))}))}77!=e.storeId&&1609!=e.storeId||t(s).off(),t(s).on("click",(function(){t("[bss-b2b-ajax-cart-subtotal],[bss-b2b-ajax-cart-line-price],[bss-b2b-ajax-original-line-price]"+e.getCartPriceClass("ajax_cart_total")+e.getCartPriceClass("ajax_cart_subtotal")+e.getCartPriceClass("ajax_cart_item_line_price")+e.getCartPriceClass("ajax_cart_original_item_line_price").split(" ")[1]+e.getCartPriceClass("ajax_cart_item_original_price")+e.getCartPriceClass("ajax_cart_item_regular_price")).hide(),setTimeout((function(){e.cart.fixer(a,!0,!0),e.handleCartCheckoutBtn(a),setTimeout((function(){t("[bss-b2b-original-line-price]").css("visibility","visible")}),500)}),n)}));var l=t('form[action*="/cart"] .ajaxcart__qty-num,form[action*="/cart"] .cart-drawer__input,form[action*="/cart"] .cart-drawer__item-quantity,form[action*="/cart"] input.QuantitySelector__CurrentQuantity,.cart-window .cart-prod-qty input.update-product,form[action*="/cart"] input[aria-label="Quantity"],form[action*="/cart"] input[aria-label="quantity"],form[action*="/cart"] input.ajaxifyCart--num,input[aria-label="Quantity"]'+e.getCartPriceClass("ajax_cart_quantity_input"));r&&e.qbRules&&0!=e.qbRules.length||537!=e.storeId&&l.off(),l.on("change",(function(r){t("[bss-b2b-ajax-cart-subtotal],[bss-b2b-ajax-cart-line-price],[bss-b2b-ajax-original-line-price],.cart-drawer__subtotal-value,.cart-drawer__subtotal-number,.drawer .cart-item__price,.cart-item-price-wrapper .cart-item-price"+e.getCartPriceClass("ajax_cart_total")+e.getCartPriceClass("ajax_cart_subtotal")).hide(),setTimeout((function(){e.cart.fixer(a,!0,!0),e.handleCartCheckoutBtn(a)}),n)}))}}function d(t,e,a,r,i,n){e.MC={},e.MC.data={};const o=e.currencyConfig,s=e.currencyFormat,c=JSON.parse(e.currencyConfig.currency_list),l=a.shop.currency,d=a.shop.money_format;let u=d.match(/(\{\{.*\}\})/g),p=d;null!==u&&u.length&&(p=u[0]);d.replace(p,"");var b=window.Currency;let m=!1,f=sessionStorage.getItem("currentCurrency"),g=sessionStorage.getItem("currentCurrencyFormat");f||(m=!0,f=l,sessionStorage.setItem("currentCurrency",f)),g||(g=d,sessionStorage.setItem("currentCurrencyFormat",g));let h=!1;if(c.map(t=>{f==t.code&&(h=!0)}),h||sessionStorage.setItem("currentCurrency",l),e.MC.convertCurrency=function(t,a,r){let i=e.MC.getBaseCurrency(t,r);return t!==a&&(i=b.convert(i,t,a)),parseFloat(i).toFixed(2)},e.MC.convertCurrencyFromCP=function(t,e,a){let r=a;return t!==e&&(r=b.convert(r,t,e)),parseFloat(r).toFixed(2)},e.MC.getBaseCurrency=function(t,e){var a=e.replace(/[^0-9.,-]+/g,"");function r(t,e){return void 0===t?e:t}function i(t,e,a,i){return e=r(e,2),a=r(a,","),i=r(i,"."),"."==a&&t.includes(".")&&(t=t.replace(/\./g,"")),","==a&&t.includes(",")&&(t=t.replace(/\,/g,"")),","==i&&(t=t.replace(",",".")),t}let n="";switch(s[t].money_with_currency_format.match(/\{\{\s*(\w+)\s*\}\}/)[1]){case"amount":n=i(a,2);break;case"amount_no_decimals":n=i(a,0);break;case"amount_with_comma_separator":n=i(a,2,".",",");break;case"amount_no_decimals_with_comma_separator":n=i(a,0,".",",")}return parseFloat(n).toFixed(2)},e.MC.convertPriceByMc=function(a,r){let n=sessionStorage.getItem("currentCurrency"),c=sessionStorage.getItem("currentCurrencyFormat"),d=n,u=t(".bss-nice-select span.current-currency"),p=t(".bss-nice-select span.current .flags");t(".option.notranslate.selected").removeClass("selected");let b=t(`.option.notranslate[data-value="${d}"]`).find(".flags").attr("class");t(`.option.notranslate[data-value="${d}"]`).addClass("selected"),u.html(d),p.attr("class",b),a=a.toFixed(),r&&r.attr("bss-shop-base-currency",a);let m=s[d].money_with_currency_format,f=c,g=f.match(/(\{\{.*\}\})/g),h=f;null!==g&&g.length&&(h=g[0]);let _=a/100;_=_.toString();let y=e.MC.convertCurrencyFromCP(l,d,_),v=i.formatMoney(y,h);if(o.round_price){let t=o.round_style;if(y=100*Math.round(parseFloat(y)),v=i.formatMoney(y,h),"remove_decimal"==t){let t=v.substr(v.length-3);".00"!=t&&",00"!=t||(v=v.slice(0,-3))}}return m.replace(h,v)},e.MC.preConvertCurrency=function(a,r,n=!1,c=!1){let u=t(".bss-nice-select span.current-currency"),p=t(".bss-nice-select span.current .flags");t(".option.notranslate.selected").removeClass("selected");let b=t(`.option.notranslate[data-value="${a}"]`).find(".flags").attr("class");t(`.option.notranslate[data-value="${a}"]`).addClass("selected"),u.html(a),p.attr("class",b);let m=a,f=s[a].money_with_currency_format,g=r.match(/(\{\{.*\}\})/g),h=r;null!==g&&g.length&&(h=g[0]);d.includes("no_decimals"),t("span[bss-b2b-product-price]");let _=t("[bss-b2b-product-price],[bss-b2b-product-id],[bss-b2b-current-variant-price],[bss-b2b-product-compare-price],[bss-b2b-product-parent-price], [bss-b2b-item-original-price], [bss-b2b-original-line-price], [data-cart-subtotal], [bss-b2b-cart-total-price], .bss-qb-total-price-item, [bss-b2b-product-lowest-price],[bss-b2b-product-from-price],[bss-b2b-product-now-price],[bss-b2b-product-min-price],[bss-b2b-variant-unit-price],[data-regular-price],[data-sale-price],[data-cart-item-discount-amount],[data-cart-item-final-price],[data-cart-item-original-price],[bss-b2b-cart-discount-total], .product-single__sale-price,[data-unit-price],#comparePrice-product-template,.product-single__price--compare,.inline-list.product-meta [bss-b2b-product-price][data-sale-price] span[aria-hidden],[data-compare-price],.js-price,[bss-b2b-item-final-price],[bss-b2b-final-line-price],[bss-b2b-cart-discount-amount],[data-cart-item-regular-price]");t("[bss-b2b-product-lowest-price],[bss-b2b-product-from-price],[bss-b2b-product-now-price],[bss-b2b-product-min-price]");n.length&&(_=n),t.each(_,(function(a,r){let n=!1,s=!1,d=!1,u=!1;if((r=t(r)).children().length>0||t(r).is("meta"))if(r.closest("ul.inline-list").length&&r.children().length>1){if(e.page.isProductPage()&&!t(r.children()[0]).children().is("sup"))return!0}else if(r.children().is("br"))r.html().includes("Save<br>")&&(n=!0);else if(r.children().is(".txt--emphasis"))r,r.html().includes("now")&&(s=!0);else if(r.is(".order-discount--cart")&&r.children().is("strong"))d=!0;else{if(r.is("[bss-b2b-ajax-cart-subtotal]")&&r.children().is("[bss-b2b-ajax-cart-subtotal]")){let t=r.html();return void(t.includes("{")&&t.includes("}")&&r.html(t.replace(/{|}/g,"")))}if(!r.children().is("sup"))return!0}let p=r.html();if(p.includes("<sup")&&(u=!0,p=p.substring(0,p.indexOf("<sup")).replace("-","")),p.includes("-")&&(p=p.replace(/\-/g,"")),!(c||(b=p,b.replace(/\s*([0-9|\.|\,]*)[^\S\r\n]/g,"").replace(/\s/g,"")!=(g=f.replace(h,""),void 0===g?"":t("<div/>").html(g).text()).replace(/\s/g,""))||(t(r).is(".cart-subtotal__price[data-cart-subtotal]")||t(r).is("span[bss-b2b-product-price]"))&&t(r).closest(".cart__footer").find(".cart-subtotal .cart-subtotal__price[data-cart-subtotal]").length))return;var b,g;let _=e.MC.getBaseCurrency(l,p);_=100*parseFloat(_),r.attr("bss-shop-base-currency",_);let y=e.MC.convertCurrency(l,m,p),v=i.formatMoney(y,h);if(o.round_price){let t=o.round_style;if(y=100*Math.round(parseFloat(y)),v=i.formatMoney(y,h),"remove_decimal"==t){let t=v.substr(v.length-3);".00"!=t&&",00"!=t||(v=v.slice(0,-3))}}let C=f.replace(h,v),k=r.attr("bss-b2b-product-lowest-price"),F=r.attr("bss-b2b-product-from-price");(void 0!==k&&!1!==k||void 0!==F&&!1!==F)&&(C="from "+C),n&&(C="Save<br>"+C),s&&(C="now "+C),d&&(C="- "+C),r.html(C)})),t("[bss-b2b-product-id]").css("visibility","visible"),t("[bss-b2b-product-id],[bss-b2b-product-parent-price]").show(),t("[bss-b2b-final-line-price],[bss-b2b-item-final-price]").css("visibility","visible"),t(".mini-cart__recap-price-line span[bss-b2b-cart-total-price],[bss-b2b-cart-total-price]").css("visibility","visible"),t("[data-cart-subtotal],#cart-total,#total-cart-bottom,[bss-b2b-ajax-cart-subtotal]").fadeIn(700),t("[data-cart-subtotal],#cart-total,#total-cart-bottom,[bss-b2b-ajax-cart-subtotal],[bss-b2b-final-line-price]").css("visibility","visible"),t("[bss-b2b-cart-item-key][bss-b2b-original-line-price]").css("visibility","visible"),t("[data-cart-item-regular-price]").css("visibility","visible"),n&&(n.css("visibility","visible"),n.show()),_.css("visibility","visible"),_.show()},e.MC.initCurrencySwitcher=function(){const a=t(window).width();let r="";const d=o.show_on_mobile,u=o.show_on_desktop,p=o.desktop_position,h=o.mobile_position;if(a>600&&u)r=p;else{if(!(a<600&&d))return;r=h}t(".bss-currency-wrapper").addClass(r);let _="cart"==window.location.pathname.split("/")[1],y=o.show_cart_message,v=o.cart_message;v=v.replace("[checkout_currency]",l);let C=o.cart_message_color,k=o.cart_message_bg;if(y&&_){const e=`<div class="bss-currency-cart-message" style="text-align: center; padding: 1rem; color:${C}; background-color: ${k};">\n                                    ${v}\n                                    </div>`;t("#shopify-section-header").after(e)}if(o&&o.auto_location&&m){let t=e.countryCode;""!==t&&void 0!==t&&c.map(e=>{if(e.code.includes(t)){f=e.code;let t=s[f].money_with_currency_format,a=t.substring(t.indexOf("{"),t.indexOf("}}")+2);console.log(a,"formatString"),g=a,sessionStorage.setItem("currentCurrency",f),sessionStorage.setItem("currentCurrencyFormat",g)}})}n&&e.configData&&0!=e.configData.length||(f=sessionStorage.getItem("currentCurrency"),e.MC.preConvertCurrency(f,g,!1,!0)),t(".bss-currency-wrapper").fadeIn(100),t("#switcher").on("click",(function(e){t("#switcher").toggleClass("open")})),t(".bss-nice-select li.option").on("click",(function(a){let r=t(".bss-nice-select span.current-currency"),n=t(".bss-nice-select span.current .flags");t(".current-currency").html();t(".option.notranslate.selected").removeClass("selected");const c=a.target;t(c).addClass("selected");const d=t(c).find(".flags").attr("class");r.html(t(c).attr("data-value")),n.attr("class",d);let u=t(c).attr("data-value"),p=s[u].money_with_currency_format,m=p.substring(p.indexOf("{"),p.indexOf("}}")+2);sessionStorage.setItem("currentCurrency",u),sessionStorage.setItem("currentCurrencyFormat",m);t("span[bss-b2b-product-price]");let f=t("[bss-b2b-product-price],[bss-b2b-product-id],[bss-b2b-current-variant-price],[bss-b2b-product-compare-price],[bss-b2b-product-parent-price], [bss-b2b-item-original-price], [bss-b2b-original-line-price], [data-cart-subtotal], [bss-b2b-cart-total-price], [bss-shop-base-currency], [bss-b2b-cart-discount-total], .bss-qb-total-price-item, .bss-b2b-variant-unit-price, .product-single__sale-price,[data-compare-price],#comparePrice-product-template,.product-single__price--compare,.inline-list.product-meta [bss-b2b-product-price][data-sale-price] span[aria-hidden],.js-price,[data-cart-item-regular-price]");t.each(f,(function(a,r){let n=!1,s=!1;if((r=t(r)).children().length>0||t(r).is("meta"))if(r.closest("ul.inline-list").length&&r.children().length>1){if(e.page.isProductPage()&&!t(r.children()[0]).children().is("sup"))return!0}else if(r.children().is("br"))r.html().includes("Save<br>")&&(n=!0);else if(r.children().is(".txt--emphasis"))lowestPriceElement=r,r.html().includes("now")&&(s=!0);else if(!r.children().is("sup"))return!0;let c=r.html();c.includes("<sup")&&(c=c.substring(0,c.indexOf("<sup")).replace("-","")),c.includes("now")&&(s=!0),c.includes("-")&&(c=c.replace(/\-/g,""));const d=r.attr("bss-shop-base-currency");let f=b.convert(d,l,u);f=parseFloat(f)/100,f=f.toFixed(2);let g=i.formatMoney(f,m);if(o.round_price){let t=o.round_style;if(f=100*Math.round(parseFloat(f)),g=i.formatMoney(f,m),"remove_decimal"==t){let t=g.substr(g.length-3);".00"!=t&&",00"!=t||(g=g.slice(0,-3))}}let h=p.replace(m,g),_=r.attr("bss-b2b-product-lowest-price"),y=r.attr("bss-b2b-product-from-price");(void 0!==_&&!1!==_||void 0!==y&&!1!==y)&&(h="from "+h),n&&(h="Save<br>"+h),s&&(h="now "+h),r.html(h)}))}))},e.MC.changeVariantOptionProductPage=function(){var a=t('form[action*="/cart/add"]');t(a).find("select, input.single-option-selector__radio,input.product-form__single-selector"+e.getCssSelector("product_variant_option_input")).on("change",(function(){t(".product-price-unit").hide(),setTimeout((function(){let a=sessionStorage.getItem("currentCurrency"),r=sessionStorage.getItem("currentCurrencyFormat");e.MC.preConvertCurrency(a,r),t("[data-regular-price]").css("visibility","visible"),t("[data-regular-price]").show(),t(".product-price-unit").show()}),200)}))},e.MC.initCurrencySwitcher(),e.MC.hideCartPriceElements=function(){t(e.cart.inputQuantityElement).prop("disabled",!0),t("[data-cart-item-regular-price],[bss-b2b-item-price],[data-cart-subtotal],[bss-b2b-ajax-cart-subtotal],[data-cart-item-id]  [data-cart-item-price-container] .cart-item__original-price,[data-cart-item-id]  [data-cart-item-line-price-container] .cart-item__original-price,.cartTotalSelector,.cart_subtotal"+e.getCartPriceClass("cart_total")+e.getCartPriceClass("cart_subtotal")+e.getCartPriceClass("cart_item_regular_price")+e.getCartPriceClass("cart_item_original_price")).hide(),t("[data-cart-subtotal],[bss-b2b-product-price],[bss-b2b-product-id],[bss-b2b-item-final-price],[bss-b2b-final-line-price],[bss-b2b-cart-discount-amount],[data-cart-item-discount-amount],[data-cart-item-final-price],[data-cart-item-original-price],[data-cart-price],[data-unit-price],[bss-b2b-cart-item-key],[bss-b2b-cart-discount-total],[data-cart-discount-amount],.cart-item__price,.cart-subtotal--price,.order-discount--cart,[data-cart-item-regular-price]").hide()},e.MC.showCartPriceElements=function(){t(e.cart.inputQuantityElement).prop("disabled",!1),t("[data-cart-item-regular-price],[bss-b2b-item-price],[data-cart-subtotal],[bss-b2b-ajax-cart-subtotal],[data-cart-item-id]  [data-cart-item-price-container] .cart-item__original-price,[data-cart-item-id]  [data-cart-item-line-price-container] .cart-item__original-price,.cartTotalSelector,.cart_subtotal"+e.getCartPriceClass("cart_total")+e.getCartPriceClass("cart_subtotal")+e.getCartPriceClass("cart_item_regular_price")+e.getCartPriceClass("cart_item_original_price")).show(),t("[data-cart-subtotal],[bss-b2b-product-price],[bss-b2b-product-id],[bss-b2b-item-final-price],[bss-b2b-final-line-price],[bss-b2b-cart-discount-amount],[data-cart-item-discount-amount],[data-cart-item-final-price],[data-cart-item-original-price],[data-cart-price],[data-unit-price],[bss-b2b-cart-item-key],[bss-b2b-cart-discount-total],[data-cart-discount-amount],.cart-item__price,.cart-subtotal--price,.order-discount--cart,[data-cart-item-regular-price]").show()},e.MC.handleCartPrice=function(){e.cart.isExistedUpdateCartBtn||(t(e.cart.inputQuantityElement).off(),t(e.cart.inputQuantityElement).on("change",(function(){let a=setInterval((function(){e.MC.hideCartPriceElements()}),1);setTimeout((function(){let r=t("[data-cart-subtotal],[bss-b2b-product-price],[bss-b2b-product-id],[bss-b2b-item-final-price],[bss-b2b-final-line-price],[bss-b2b-cart-discount-amount],[data-cart-item-discount-amount],[data-cart-item-final-price],[data-cart-item-original-price],[data-cart-price],[data-unit-price],[bss-b2b-cart-item-key],[bss-b2b-cart-discount-total],[data-cart-discount-amount],.cart-item__price,.cart-subtotal--price,.order-discount--cart,[data-cart-item-regular-price]");r.hide(),r.css("visibility","hidden");let i=sessionStorage.getItem("currentCurrency"),n=sessionStorage.getItem("currentCurrencyFormat");e.MC.preConvertCurrency(i,n,r),clearInterval(a),e.MC.reRenderQtyChangeEvent()}),1500)}))),t(".ajaxifyCart--qty-adjuster,.ajaxcart__qty-adjust,.js-qty__adjust").on("click",(function(){let a=setInterval((function(){e.MC.hideCartPriceElements()}),1);setTimeout((function(){let r=t("[data-cart-subtotal],[bss-b2b-product-id],[bss-b2b-product-price],[bss-b2b-item-final-price],[bss-b2b-final-line-price],[bss-b2b-cart-discount-amount],[data-cart-item-discount-amount],[data-cart-item-final-price],[data-cart-item-original-price],[data-cart-price],[bss-b2b-cart-item-key],[bss-b2b-ajax-cart-subtotal],[bss-b2b-cart-discount-total],[data-cart-discount-amount],.cart-item__price,.cart-subtotal--price,.order-discount--cart,[bss-b2b-product-sale-price]:not([bss-shop-base-currency]),[data-cart-item-regular-price]");r.hide(),r.css("visibility","hidden");let i=sessionStorage.getItem("currentCurrency"),n=sessionStorage.getItem("currentCurrencyFormat");e.MC.preConvertCurrency(i,n,r),clearInterval(a),e.MC.reRenderQtyChangeEvent()}),3e3)}))},e.MC.reRenderQtyChangeEvent=function(){e.MC.handleCartPrice(),e.MC.showCartPriceElements()},e.MC.handleAjaxCart=function(){var a=3e3,r=e.getCssSelector("ajax_cart_time_delay_opening_cart");""==r||isNaN(r)||(a=parseInt(r));var i=t('[id^="AddToCart"]:not(form), [id^="addToCart"]:not(form):not(span),button[aria-controls="CartDrawer"],a[aria-controls="CartDrawer"], button[name="add"].product-form__add-to-cart,button[name="add"].product__add-to-cart-button,button[name="add"].add-to-cart,a.ajax-cart__toggle,span.icon__fallback-text,button#add-to-cart.add-to-cart,a.cart-toggle,.mini-cart-wrap[data-cart-mini-toggle],.addtocart-button-active[data-product-submit],button.product-form--atc-button,button.productitem--action-atc,#add-to-cart-product-template,.product-form__add-button[data-action="add-to-cart"],.header__cart-toggle[data-action="toggle-mini-cart"],button[type="submit"][data-action="add-to-cart"],button.btn-addtocart,form[action*="/cart/add"] input.AddtoCart,a[data-cart-toggle][data-dropdown-menu],input[data-btn-addtocart],.cart-block-click,button[data-btn-addtocart],a.js-cart-trigger[href="/cart"],form.js-product-form,form[action*="/cart/add"] button.single_add_to_cart_button.button,.Header__Wrapper .Header__FlexItem a[data-drawer-id="sidebar-cart"],button.product-form__cart-submit,.add-to-cart-box .add-to-cart,a.header-cart-btn.cart-toggle,.product-page--submit-action .btn,.ajax-submit.action_button.add_to_cart,.site-header__cart.cart-modal,form[action*="/cart/add"] button.ajax-submit.button--add-to-cart,form[action*="/cart/add"] div.add-to-cart button.button[type="submit"],a.add-cart-btn'+e.getCssSelector("ajax_cart_action_button"));i.length&&i.on("click",(function(r){var i=setInterval((function(){let a=t("[data-cart-subtotal],[bss-b2b-product-id],[bss-b2b-product-price],[bss-b2b-item-final-price],[bss-b2b-final-line-price],[bss-b2b-cart-discount-amount],[data-cart-item-discount-amount],[data-cart-item-final-price],[data-cart-item-original-price],[data-cart-price],[bss-b2b-cart-item-key],.cart-item__price,.cart-subtotal--price,[bss-b2b-product-sale-price]:not([bss-shop-base-currency]),[data-cart-item-regular-price]");a.hide(),a.css("visibility","hidden");let r=sessionStorage.getItem("currentCurrency"),i=sessionStorage.getItem("currentCurrencyFormat");e.MC.preConvertCurrency(r,i,a),t(e.cart.inputQuantityElement).length&&e.MC.handleCartPrice()}),300);setTimeout((function(){clearInterval(i)}),a)}))},e.MC.changeCurrencyCartPageQB=function(){let a=".bss-qb-cart-subtotal,[data-cart-subtotal],[bss-b2b-product-price],.bss-qb-total-price-item,";n||(a+="[data-cart-item-regular-price],"),","==a.substr(a.length-1)&&(a=a.substr(0,a.length-1));let r=t(a);r.hide(),r.css("visibility","hidden");let i=sessionStorage.getItem("currentCurrency"),o=sessionStorage.getItem("currentCurrencyFormat");e.MC.preConvertCurrency(i,o,r)},t("a.full-width-link ,.quick-product__btn[data-product-id],.productitem--action-trigger[data-quickshop-full], .productitem--action-trigger[data-quickshop-slim],a[data-fancybox].quick").on("click",(function(){setTimeout((function(){!function(){let t=sessionStorage.getItem("currentCurrency"),a=sessionStorage.getItem("currentCurrencyFormat");e.MC.preConvertCurrency(t,a)}(),e.MC.changeVariantOptionProductPage()}),1500)})),!n||!e.configData||!e.configData.length){e.page.isProductPage()&&e.MC.changeVariantOptionProductPage();var _=e.page.getPage(),y=_[_.length-2]==window.location.host,v=t('form[action*="/cart/add"]');y&&v.length&&e.MC.changeVariantOptionProductPage(),e.MC.handleAjaxCart(),e.MC.handleCartPrice()}}function u(){BSS_B2B.cart={},BSS_B2B.cart.updatedLineItems=[],BSS_B2B.cart.updatedLineItemsAndUseAMO=[],BSS_B2B.cart.productMap=[],BSS_B2B.cart.cpPricingList=[],BSS_B2B.cart.modifiedItemsSubtotalPrice=!1,BSS_B2B.cart.inputQuantityElement='form[action*="/cart"] input[type="number"], form[action*="/cart"] input[data-quantity-input],form[action*="/cart"] input[data-cart-item-input-quantity],form[action*="/cart"] input.js-qty__input,form[action*="/cart"] input.js-qty__num,form[action*="/cart"] input.quantity-selector__value,.cart-wrapper input.quantity-selector__value,form[action*="/cart"] input.ajaxifyCart--num,form[action*="/cart"] input[aria-label="Quantity"],form[action*="/cart"] input[data-qv-qtt-id],form[action*="/cart"] input[name="quantity"],form[action*="/cart"] input[name="updates[]"],.quantity-controls input[aria-label="Quantity"],table.line-item-table .line-item__quantity input,form[action*="/cart"] input.ajax-cart__qty-input'+BSS_B2B.getCssSelector("cart_quantity_input"),BSS_B2B.cart.buttonChangeQuantity='form[action*="/cart"] .js-qty__adjust,form[action*="/cart"] .ajaxifyCart--qty-adjuster,form[action*="/cart"] .qty-wrapper .qty-up,form[action*="/cart"] .qty-wrapper .qty-down,form[action*="/cart"] .quantity-selector__button,#shopify-section-cart-template [data-section-id="cart-template"] .quantity-selector__button,form[action*="/cart"] .qtybtn,form[action*="/cart"] a[data-action="decrease-quantity"],.cart-wrapper button.quantity-selector__button,.cart-wrapper a[data-action="decrease-quantity"],form[action*="/cart"] a[data-qv-minus-qtt],form[action*="/cart"] a[data-qv-plus-qtt],form[action*="/cart"] a.minus.button,form[action*="/cart"] a.plus.button,.cart-window .cart-prod-qty .qty-btn,.tt-input-counter .plus-btn,.tt-input-counter .minus-btn,.quantity-controls .alt-focus,.product-quantity-box .js-change-quantity,table.line-item-table .line-item__quantity button,form[action*="/cart"] .quantity-element,form[action*="/cart"].product-single__form button[type="submit"].btn.btn--full.add-to-cart.btn--secondary,form[action*="/cart"] a.plus,form[action*="/cart"] a.minus,form[action*="/cart"] a.ajax-cart__qty-control--up,form[action*="/cart"] a.ajax-cart__qty-control--down,form[action*="/cart"] .table-shopping-qty button,form[action*="/cart"] #quantity-minus,.btn.qty-adjust,form[action*="/cart"] #quantity-plus',BSS_B2B.cart.removeButtons='form[action*="/cart"] [data-cart-remove], form[action*="/cart"] .cart__remove:not(:has([data-cart-remove])), a[rv-data-cart-remove].remove',BSS_B2B.cart.quantityInputSelectorWithKeyItem=function(t){return['[data-cart-item-key="'+t+'"] input[type="number"][data-quantity-input]','[data-cart-item-key="'+t+'"] input[data-quantity-input]','[data-cart-item-key="'+t+'"] input[data-cart-item-input-quantity]','[data-cart-item-key="'+t+'"] input.js-qty__input','[data-cart-item-key="'+t+'"] input.js-qty__num','[data-cart-item-key="'+t+'"] input.quantity-selector','[data-cart-item-key="'+t+'"] input.cart__quantity-selector','[data-cart-item-key="'+t+'"] input.js--num','[data-cart-item-id="'+t+'"] input.cart-item__qty-input','[data-cart-item-key="'+t+'"] input.cart__product-qty','[data-cart-item-key="'+t+'"] input.form__input.cart__quantity','input.js-qty__num[data-id="'+t+'"]','input.ajaxcart__qty-num[data-id="'+t+'"]']}}function p(t,e,a,i){console.log("B2B script"),e.validateVatSuccess=!1;var n=n||{};r(i,n),void 0!==a&&null!=a&&0!=a.length||(e.shopModules=[{code:"cp",status:1},{code:"qb",status:1},{code:"form",status:1},{code:"mc",status:0},{code:"amo",status:0},{code:"tax_exempt",status:0},{code:"dc",status:0},{code:"cart_note",status:0}],a=e.shopModules);var o=!0,s=!0,p=!1,b=!1,m=!1,f=!1,g=!1;if(a.forEach((function(t){"cp"==t.code?o=t.status:"qb"==t.code?s=t.status:"form"==t.code?t.status:"mc"==t.code?p=t.status:"amo"==t.code?b=t.status:"tax_exempt"==t.code?m=t.status:"dc"==t.code?f=t.status:"cart_note"==t.code&&(g=t.status)})),function(t,e,a,i){e.getCssSelector=function(t){if(null!=e.customPricingSettings){if(null!=e.customPricingSettings[t]&&-1!==t.indexOf("_time_delay_"))return e.customPricingSettings[t];if(null!=e.customPricingSettings[t]&&e.customPricingSettings[t].length)return","+e.customPricingSettings[t]}return""},e.getQueryArray=function(){for(var t,e=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<a.length;r++)t=a[r].split("="),e.push(t[0]),e[t[0]]=t[1];return e},e.printSaveTo=function(a,i){var n=n||{};r(a,n);let o=[],s=0;if(a.product){s=parseFloat(a.product.price),i&&i.length<7&&(s=100*parseFloat(i));let r=t(".bss-save-to-cp");for(let t=0;t<e.configData.length;t++){let r=e.configData[t];0==r.product_condition_type?o.push(r):1==r.product_condition_type?r.product_ids.split(",").includes(a.product.id.toString())&&o.push(r):2==r.product_condition_type?a.collections.filter(t=>r.product_collections.split(",").includes(t.toString())).length&&o.push(r):3==r.product_condition_type&&a.product.tags.filter(t=>r.product_tags.split(",").includes(t.toString())).length&&o.push(r)}let c=[];if(o.length){let e;for(let t=0;t<o.length;t++)0==o[t].discount_type?(e=parseFloat(o[t].discount_value),c.push(100*e)):1==o[t].discount_type?(e=s-100*parseFloat(o[t].discount_value),c.push(e)):2==o[t].discount_type&&(e=s-s*parseFloat(o[t].discount_value)/100,c.push(e));let a=Math.min.apply(Math,c);r.html(n.formatMoney(a)),t(".bss-custom").css({visibility:"visible"})}}},e.getPriceList=function(t,a,r){if(!i||!e.configData||0===e.configData.length)return[];let n=[],o=[],s=e.configData,c=t.customer;return s.forEach((function(i){let s=i.apply_to,l=i.customer_ids,d=i.customer_tags;if(0==s);else if(1==s){if(null==c.id)return void(918==e.storeId&&e.printSaveTo(t))}else if(2==s){if(null!==c.id)return;918==e.storeId&&e.printSaveTo(t)}else if(3==s){if(null==c.id)return void(918==e.storeId&&e.printSaveTo(t));if(l=l.split(","),-1===l.indexOf(c.id+""))return}else if(4==s){if(null==c.tags)return void(918==e.storeId&&e.printSaveTo(t));if(d=d.split(","),0==d.filter(t=>c.tags.includes(t+"")).length)return void(918==e.storeId&&e.printSaveTo(t))}let u=i.product_condition_type,p=i.product_tags?i.product_tags.split(","):[],b=i.product_ids?i.product_ids.split(","):[],m=i.product_collections?i.product_collections.split(","):[];for(let t=0;t<a.length;t++){let e=a[t].id,s=a[t].collections,c=a[t].tags;if(0==u)-1===o.indexOf(e)&&(o.push(e),n.push({id:e,discount_type:i.discount_type,value:i.discount_value,key:!!r&&a[t].key,name:i.name}));else if(1==u)-1!==b.indexOf(e+"")&&-1===o.indexOf(e)&&(o.push(e),n.push({id:e,discount_type:i.discount_type,value:i.discount_value,key:!!r&&a[t].key,name:i.name}));else if(2==u){s.filter(t=>m.includes(t+"")).length>0&&-1===o.indexOf(e)&&(o.push(e),n.push({id:e,discount_type:i.discount_type,value:i.discount_value,key:!!r&&a[t].key,name:i.name}))}else if(3==u){p.filter(t=>c.includes(t+"")).length>0&&-1===o.indexOf(e)&&(o.push(e),n.push({id:e,discount_type:i.discount_type,value:i.discount_value,key:!!r&&a[t].key,name:i.name}))}let l=i.start_date,d=i.end_date,f=new Date;if(l&&f<new Date(l))return;if(d&&f>new Date(d))return}})),n},e.getModifiedPrice=function(t,e,a){let r=!1;return 0==t?r=a>e?e:a:1==t?r=a>e?0:e-a:2==t&&(r=e*(1-a/100)),r},e.checkVariantExist=function(a,r){var i=t(a).find('select[data-index], select[id^="SingleOption"], select.single-option-selector, select[data-option]'+e.getCssSelector("product_variant_option_input"));if(i.length)for(var n=0;n<i.length;n++)t(i[n]).val();else{i=t(a).find('input[type="radio"]:checked, input.single-option-selector__radio:checked');for(n=0;n<i.length;n++)t(i[n]).val()}var o=r.title;o=(o=o.replace(/\s/g,"")).replace(/\//g,"");var s=t(a).attr("id"),c="";void 0!==s&&(c=s.replace(/\W/g,""));var l=t(a).find('select#ProductSelect--product-template :selected, select#ProductSelect--featured-product :selected, select[name="id"] :selected, select[id$="'+c+'"] :selected'+e.getCssSelector("product_select_variant_input"));return!l.length||l.val()==r.id},e.getCartPriceClass=function(t){var a=e.getCssSelector(t);return-1!==a.indexOf("=itemKey")&&(a=a.replace(/=itemkey/g,"")),a},e.page={},e.page.getPage=function(){return window.location.href.split("/")},e.page.isCartPage=function(){var t=e.page.getPage();return"cart"==t[t.length-1]||t[t.length-1].includes("cart")},e.page.isCollectionPage=function(){var t=e.page.getPage();return"collections"==t[t.length-2]},e.page.isProductPage=function(){var t=e.page.getPage();return"products"==t[t.length-2]}}(t,e,0,o),u(),f&&e.page.isCartPage()&&(!function(t,e,a,r,i){e.dc={},e.dc.getDiscountCodeAppied=function(){t.ajax({url:"/cart.js",type:"GET",dataType:"json",success:function(r){let i=r.attributes;if(i.discountCodeRule&&i.discountCodeRule.length>0){let r=JSON.parse(i.discountCodeRule).discount_code,d=new Date,u=d.toLocaleTimeString();var n=[],o=[];for(let t=0;t<a.cart.items.length;t++){var s=a.cart.items[t].product_id;-1===n.indexOf(s)&&(n.push(s),o.push('id:"'+s+'"'))}var c="/search.js?q="+o.join(" OR ")+"&view=bss.b2b",l=encodeURI(c);t.get(l,(function(i){var n=[];try{n=JSON.parse(i)}catch(t){console.log("product label: JSON parse returns no item")}if(n.length>0){for(let t=0;t<a.cart.items.length;t++){let e=a.cart.items[t];for(let t=0;t<n.length;t++)e.product_id==n[t].id&&(n[t].key=e.key)}let i={today:d,moment:u,customer:a.customer,cart_items:n,domain:a.shop.permanent_domain,discount_code:r};fetch(bssB2bApiServer+"/dc/check-discount-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(t=>t.json()).then((async function(a){a.success&&(t("#bss-b2b-discount-code-input").attr("discount-code",!0),t("#bss-b2b-discount-code-applied-wapper").html('<div id="bss-b2b-discount-code-applied"><span>'+r+'</span><div id="bss-b2b-clear-discount-code">\nX\n</div></div>'),e.dc.handleRemoveDiscountCodeApplied())})).catch(t=>{console.error("Error:",t)})}}))}}})},e.dc.handleRemoveDiscountCodeApplied=function(){document.getElementById("bss-b2b-clear-discount-code").addEventListener("click",async t=>{t.preventDefault(),document.getElementById("bss-b2b-discount-code-input").value="",document.getElementById("bss-b2b-discount-code-applied-wapper").innerHTML="",document.getElementById("bss-b2b-discount-code-message").innerHTML="",document.getElementById("bss-b2b-discount-code-input").removeAttribute("discount-code");let e={attributes:{discountCodeRule:JSON.stringify({})}};await fetch("/cart/update.js",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})})}}(t,e,i),e.dc.getDiscountCodeAppied()),!e.isAllowFree&&("null"==e.planCode||""==e.planCode||"undefined"==e.planCode))return void t("[bss-b2b-cart-item-key],[bss-b2b-product-id],[bss-b2b-variant-id],[bss-b2b-cart-item-key],[bss-b2b-cart-total-price],[bss-b2b-cart-total-discount],[data-cart-item-regular-price],[data-cart-subtotal]").css("visibility","visible");o&&e.configData&&0!==e.configData.length||(t("[bss-b2b-cart-item-key],[bss-b2b-product-id],[bss-b2b-variant-id],[bss-b2b-cart-item-key],[bss-b2b-cart-total-price],[bss-b2b-cart-total-discount],[data-cart-item-regular-price],[data-cart-subtotal]").css("visibility","visible"),setTimeout((function(){t(".shopify-payment-button__button, .shopify-payment-button__more-options").addClass("bss-b2b-btn-buyitnow")}),1e3));let h=e.currencyConfig;if(null==h||null==h)p=!1;else{const e=t(window).width(),a=h.show_on_mobile,r=h.show_on_desktop;e>600?r||(p=!1):a||(p=!1)}var _,y,v;if(p&&(_="https://cdn.shopify.com/s/javascripts/currencies.js",y=function(){console.log("Load currency form render"),e.currencyConfig.auto_location?t.ajax({url:"https://geo-ip-service.bsscommerce.com/geoip/getCountryByIP",data:{shopId:e.storeId},method:"POST",success:function(a){a.success?(e.countryCode=a.countryCode,"undefined"!=typeof Storage?(sessionStorage.countryCode=a.countryCode,console.log("sr:",sessionStorage.countryCode)):console.log(BSS_PL.countryCode),d(t,e,i,0,n,o)):(console.log("Could not get country by IP"),d(t,e,i,0,n,o))},error:function(a){console.log("Could not get country by IP"),d(t,e,i,0,n,o)}}):d(t,e,i,0,n,o)},(v=document.createElement("script")).type="text/javascript",v.readyState?v.onreadystatechange=function(){"loaded"!=v.readyState&&"complete"!=v.readyState||(v.onreadystatechange=null,y())}:v.onload=function(){y()},v.src=_,document.getElementsByTagName("head")[0].appendChild(v)),m||t(".bss-b2b-tax-ex-wrapper").length&&t(".bss-b2b-tax-ex-wrapper").remove(),661==e.storeId&&e.page.isCartPage()&&(o&&e.configData&&e.configData.length>0||s&&e.qbRules&&e.qbRules.length>0)){let e=t('form[action*="/cart"] [name="checkout"],#dropdown-cart button.btn.btn-checkout.show,a.button.checkout-button[href="/checkout"],form[action*="/checkout"] .add_to_cart,form[action*="/cart"]#cart_form #checkout,form[action*="/cart"] button.Cart__Checkout,button.trigger-checkout');if(e.length>0){let t="<input type='button' class='action_button add_to_cart' id='checkout' value='Checkout'></input>";e.before(t),e.remove()}}!function(t,e,a,r,i,n,o,s){e.cart.isExistedUpdateCartBtn=t('form[action*="/cart"] button[type="submit"][name="update"]:visible, form[action*="/cart"] input[type="submit"][name="update"]:visible,form[action*="/cart"] .update.btn.item'+e.getCartPriceClass("cart_update_cart_btn")).length>0,e.cart.cartQtyOnChange=function(r,n,o){e.amo.warning&&e.amo.warning.length>0&&(e.amo.warning=[]),t(e.cart.inputQuantityElement).prop("disabled",!0),i&&e.qbRules&&0!=e.qbRules.length||t("[data-cart-item-regular-price],[bss-b2b-item-price],[data-cart-subtotal],[bss-b2b-ajax-cart-subtotal],[data-cart-item-id]  [data-cart-item-price-container] .cart-item__original-price,[data-cart-item-id]  [data-cart-item-line-price-container] .cart-item__original-price,.cartTotalSelector,.cart_subtotal"+e.getCartPriceClass("cart_total")+e.getCartPriceClass("cart_subtotal")+e.getCartPriceClass("cart_item_regular_price")+e.getCartPriceClass("cart_item_original_price")).hide(),t('.cart-wrapper button.cart-recap__checkout[name="checkout"][type="submit"], input.ajax-cart__button-submit').length>0?setTimeout((function(){e.cart.fixer(a,!0,!1),e.handleCartCheckoutBtn(a)}),4e3):setTimeout((function(){e.cart.fixer(a,!0,!1)}),r),setTimeout((function(){t(e.cart.inputQuantityElement).prop("disabled",!1)}),o?2500:n)},e.cart.updateWhenItemQuantityChange=function(a,n,s,c,l,d,u){n.original_total_price;var p=n.items_subtotal_price,b=0,m=1200,f=e.getCssSelector("cart_time_delay_re_calculate");""==f||isNaN(f)||(m=parseInt(f));var g=2e3,h=e.getCssSelector("cart_time_delay_changing_qty");""==h||isNaN(h)||(g=parseInt(h));for(var _=t(e.cart.inputQuantityElement),y=t(e.cart.buttonChangeQuantity),v=[],C=0;C<d.length;C++){var k=[];for(let t=0;t<n.items.length;t++)n.items[t].product_id==d[C].id&&k.push(n.items[t]);for(var F=0;F<k.length;F++){var w=k[F],S=w.original_price,q=w.original_line_price,x=parseFloat(d[C].value),P=d[C].discount_type,R=S,I=q,A=w.unit_price;if(1==P)I=(R=100*x>S?0:S-100*x)*w.quantity,b+=(100*x>S?S:100*x)*w.quantity;else if(2==P)I=R*w.quantity,R*=1-x/100,1508==e.storeId&&R%.5==0&&(R=Math.round(R)),I=q-100*((S*(x/100)).toFixed(2)/100).toFixed(2)*w.quantity,b+=100*((S*(x/100)).toFixed(2)/100).toFixed(2)*w.quantity;else if(0==P){var M=100*parseFloat(d[C].value);I=(R=M>S?S:M)*w.quantity,b+=(M>S?0:S-M)*w.quantity}w.unit_price&&(A=R*parseFloat(w.unit_price)/parseFloat(w.original_price));var B=new Map;if(n.items&&n.items.length>0){a.shop.permanent_domain;var T=[],j=[],O=[];n.items.forEach((function(t){var e=t.product_id;-1===j.indexOf(e)&&(j.push(e),T.push('id:"'+e+'"'),O[e]=t.key);var a=B.get(e);a&&null!=a||(B.set(e,[]),a=[]),a.push({key:t.key,quantity:t.quantity,id:t.variant_id,price:t.price}),B.set(e,a)}))}if((i||o)&&v.push({modifiedLineItemPrice:I,modifiedItemPrice:R,key:w.key,quantity:w.quantity}),918==e.storeId&&setTimeout(()=>{t("[data-id="+w.variant_id+"]").parent().parent().find(".product-price").html(r.formatMoney(R)),t("[data-id="+w.variant_id+"]").parent().parent().find(".product-total-price").html(r.formatMoney(I))},1e3),t('.product-price[id="'+w.variant_id+'"]').html(r.formatMoney(R)),1283==e.storeId&&setTimeout(()=>{t('[bss-b2b-cart-item-key="'+w.key+'"][bss-b2b-item-original-price]').html(r.formatMoney(R))},1e3),1792==e.storeId&&t('[data-cart-item-key="'+w.key+'"][bss-b2b-item-compare-price]').css("visibility","visible"),t('[bss-b2b-cart-item-key="'+w.key+'"][bss-b2b-item-original-price]').html(r.formatMoney(R)),t('[bss-b2b-cart-item-key="'+w.key+'"][bss-b2b-item-final-price]').html(r.formatMoney(R)),t('[bss-b2b-original-line-price][bss-b2b-cart-item-key="'+w.key+'"]').html(r.formatMoney(I)),t('[bss-b2b-final-line-price][bss-b2b-cart-item-key="'+w.key+'"]').html(r.formatMoney(I)),t('[bss-b2b-ajax-cart-line-price][bss-b2b-cart-item-key="'+w.key+'"]').html(r.formatMoney(I)),t('[bss-b2b-ajax-original-line-price][bss-b2b-cart-item-key="'+w.key+'"]').html(r.formatMoney(I)),t('[bss-b2b-cart-item-key="'+w.key+'"][bss-b2b-ajax-original-line-price]').html(r.formatMoney(I)),t('[data-cart-item-id="'+w.key+'"]  [data-cart-item-price-container] .cart-item__original-price').html(r.formatMoney(R)),t('[bss-b2b-cart-item-key="'+w.product_id+'"][bss-b2b-ajax-cart-line-price]').html(r.formatMoney(I)),t('[data-cart-item-id="'+w.key+'"]  [data-cart-item-line-price-container] .cart-item__original-price').html(r.formatMoney(I)),t('[bss-b2b-cart-item-key="'+w.id+'"][bss-b2b-ajax-original-line-price]').html(r.formatMoney(I)),t(".atc-banner--container [data-atc-banner-product-price-value]").html(r.formatMoney(R)),t('[bss-b2b-cart-item-key="'+w.key+'"][bss-b2b-cart-item-unit-price]').html(r.formatMoney(A)),t(".mini-products-list #cart-item-"+w.variant_id+" .price").html(r.formatMoney(I)),t('[data-cart-item][data-variant-id="'+w.variant_id+'"] .money').html(r.formatMoney(R)),t('[bss-b2b-cart-item-key="'+w.key+'"][bss-b2b-unit-1737]').html(r.formatMoney(R/24)),t('[data-cart-item][data-variant-id="'+w.variant_id+'"]').closest('form[action*="/checkout"]').find(".cart_subtotal")){var N=t('[data-cart-item][data-variant-id="'+w.variant_id+'"]').closest('form[action*="/checkout"]').find(".cart_subtotal");N.find(".money").length>0&&N.find(".money").html(r.formatMoney(p-b))}let l=t('a[href*="variant='+w.variant_id+'"].cart-image').closest(".cart-row");if(l.length){let e=t(l[0]).find("[bss-b2b-product-id][bss-b2b-product-handle][bss-b2b-variant-id]");t(e).html(r.formatMoney(I)),t("[bss-b2b-product-id][bss-b2b-product-handle][bss-b2b-variant-id]").css("visibility","visible")}664==e.storeId&&t('.bss-b2b-wdw-vechta-origin-price[data-product-key="'+w.key+'"]').length&&(t('.bss-b2b-wdw-vechta-origin-price[data-product-key="'+w.key+'"]').html(r.formatMoney(S)),t('.bss-b2b-wdw-vechta-origin-price[data-product-key="'+w.key+'"]').css("visibility","visible"),t('.bss-b2b-wdw-vechta-origin-price[data-product-key="'+w.key+'"]').css("text-decoration","line-through"));let u=[];if(t.each(t(".tt-cart-list .tt-item .tt-item-close a:first-child"),(function(t,e){let a=[];a.push(this.getAttribute("href")),a.forEach(t=>{u.push(t.substring(t.indexOf("id="),t.indexOf("&")).replace("id=",""))})})),t.each(t(".tt-cart-list .tt-item [data-cart-item][data-variant-id].tt-price"),(function(t,e){this.setAttribute("data-variant-id",u[t])})),t('[data-cart-item][data-variant-id="'+w.variant_id+'"].tt-price').html(r.formatMoney(R)),t('[bss-b2b-final-line-price][bss-b2b-cart-item-key="'+w.key+'"]').html(r.formatMoney(I)),13==e.storeId||1918==e.storeId){if(t('[bss-b2b-cart-item-key="'+w.key+'"][bss-b2b-item-original-price][bss-b2b-custom-taxrate]').length){let e=t('[bss-b2b-cart-item-key="'+w.key+'"][bss-b2b-item-original-price][bss-b2b-custom-taxrate]').attr("bss-b2b-custom-taxrate");t('[bss-b2b-cart-item-key="'+w.key+'"][bss-b2b-item-original-price][bss-b2b-custom-taxrate]').html(r.formatMoney(R*e))}if(t('[bss-b2b-cart-item-key="'+w.key+'"][bss-b2b-final-line-price][bss-b2b-custom-taxrate]').length){let e=t('[bss-b2b-cart-item-key="'+w.key+'"][bss-b2b-final-line-price][bss-b2b-custom-taxrate]').attr("bss-b2b-custom-taxrate");t('[bss-b2b-cart-item-key="'+w.key+'"][bss-b2b-final-line-price][bss-b2b-custom-taxrate]').html(r.formatMoney(I*e))}}var E=e.getCssSelector("ajax_cart_item_original_price");""!=E&&c&&(E=(E=E.replace(/itemkey/g,w.key)).replace(",",""),t(E).html(r.formatMoney(R))),s&&(t('[data-cart-item-key="'+w.key+'"] [data-cart-item-regular-price]').html(r.formatMoney(R)),t('[data-cart-item-key="'+w.key+'"] [bss-b2b-item-final-price]').html(r.formatMoney(R)),t('[data-cart-item-key="'+w.key+'"] [data-cart-item-line-price] [data-cart-item-regular-price]').html(r.formatMoney(I)),t('[data-cart-item-id="'+w.key+'"]  [data-cart-item-price-container] .cart-item__original-price').html(r.formatMoney(R)),t('[data-cart-item-id="'+w.key+'"]  [data-cart-item-line-price-container] .cart-item__original-price').html(r.formatMoney(I)),t('[data-cart-item-id="'+w.key+'"]  [bss-b2b-ajax-original-line-price]').html(r.formatMoney(I)),t('[data-cart-item-id="'+w.key+'"]  [bss-b2b-final-line-price]').html(r.formatMoney(I)),[...t("[data-cart-item]")].forEach((function(t,e){let a=t.getAttribute("data-cart-item-key");if(w.key==a){let e=t.querySelector("[data-unit-price]");w.unit_price&&(A=R*parseFloat(w.unit_price)/parseFloat(w.original_price),e.innerHTML=r.formatMoney(A))}})))}}e.cart.cpPricingList=v,s?c?e.handleQuantityChangeAjaxCart(!1):(_.off(),_.on("change",(function(t){e.cart.cartQtyOnChange(m,g,u)})),1138==e.storeId||y.off(),y.on("click",(function(){1138==e.storeId&&(t("[bss-b2b-final-line-price]").css("visibility","hidden"),t("[bss-b2b-final-line-price]").css("display","none"),t("[bss-b2b-cart-total-price]").css("visibility","hidden"),t("[bss-b2b-cart-total-price]").css("display","none")),e.cart.cartQtyOnChange(m,g,u)})),o||t(e.cart.removeButtons).on("click",(function(){e.cart.cartQtyOnChange(m,g,u)}))):t(e.cart.removeButtons).on("click",(function(){e.cart.cartQtyOnChange(m,g,u)}));var G=p-b;e.cart.modifiedItemsSubtotalPrice=G,t("[bss-b2b-cart-total-price]").html(r.formatMoney(G)),t("[bss-b2b-ajax-cart-subtotal]").html(r.formatMoney(G)),t("[bss-b2b-total-discount]").html(r.formatMoney(b)),t(".cart-subtotal--price").html(r.formatMoney(G)),t("#cart-total").html(r.formatMoney(G)),t("#total-cart-bottom").html(r.formatMoney(G)),t(".cartTotalSelector").html(r.formatMoney(G)),t(".tt-cart-total-price").html(r.formatMoney(G)),t(".tt-product-total .total-product-js").html(r.formatMoney(G)),t(".tt-price.full-total-js").html(r.formatMoney(G)),t(".cart__item-sub.cart__item-row.cart__item--subtotal [data-subtotal]").html(r.formatMoney(G)),c&&t('[bss-b2b-ajax-cart-subtotal], .cart-drawer__subtotal-value, [data-cart-price-bubble][data-cart-price],[data-section-id="cart-drawer"] [data-cart-subtotal],#ajaxifyCart .cart-subtotal--price,.atc-banner--container [data-atc-banner-cart-subtotal],.cartTotalSelector').html(r.formatMoney(G)),s&&(1240!==e.storeId&&t("[data-cart-subtotal]").html(r.formatMoney(G)),t(".cart__item-sub.cart__item-row.cart__item--subtotal [data-subtotal]").html(r.formatMoney(G))),s&&621==e.storeId&&e.page.isCartPage()&&e.handleCartCheckoutBtn(a),e.cart.visbileElementAfterUpdateQuantity(c,s),e.cart.hoverMinicart(a,n,s,c,l,d,u)},e.cart.hoverMinicart=function(a,r,i,n,o,s,c){for(var l=t(".cart_container.clearfix,.cart-container"),d=0;d<l.length;d++)l[d].querySelectorAll(".js-change-quantity").forEach((function(c){c.addEventListener("click",(function(){1655==e.storeId?setTimeout((function(){t(".header .money.sale,.header .cart_subtotal.js-cart_subtotal").css("visibility","hidden"),e.cart.updateWhenItemQuantityChange(a,r,i,n,o,s,!1),e.handleChangeQuantityEventFirstTime(1e3,1e3)}),1500):setTimeout((function(){e.cart.updateWhenItemQuantityChange(a,r,i,n,o,s,!1),e.handleChangeQuantityEventFirstTime(1500,1500)}),3e3)}))})),l[d].querySelectorAll(".remove-icon").forEach((function(t){t.addEventListener("click",(function(){setTimeout((function(){e.cart.updateWhenItemQuantityChange(a,r,i,n,o,s,!1),e.handleChangeQuantityEventFirstTime(1500,1500)}),3e3)}))}));var u=t("button.ajax-submit.action_button.add_to_cart");for(d=0;d<u.length;d++)u[d].addEventListener("click",(function(){setTimeout((function(){e.cart.updateWhenItemQuantityChange(a,r,i,n,o,s,!1),e.handleChangeQuantityEventFirstTime(1500,1500)}),3e3)}))},e.cart.getLineItemsPrice=function(a,r,i,n){var o=e.cart.isExistedUpdateCartBtn;if(!i||!o){var s=[],c=[],l=[];if(r.items.forEach((function(t){var e=t.product_id;-1===c.indexOf(e)&&null!==e&&(c.push(e),s.push('id:"'+e+'"'),l[e]=t.key)})),e.cart.updatedLineItems.length&&e.cart.productMap.length&&e.page.isCartPage())e.cart.updateWhenItemQuantityChange(a,r,i,n,e.cart.productMap,e.cart.updatedLineItems,!1);else if(e.cart.updatedLineItems.length&&e.cart.productMap.length&&n&&i)e.cart.updateWhenItemQuantityChange(a,r,i,n,e.cart.productMap,e.cart.updatedLineItems,!1);else{var d="/search.js?q="+s.join(" OR ")+"&view=bss.b2b",u=encodeURI(d);t.get(u,(function(t){var o=[];try{o=JSON.parse(t)}catch(t){console.log("product label: JSON parse returns no item")}if(o.length>0){for(var s=[],c=[],d=0;d<o.length;d++){var u=o[d];-1===c.indexOf(u.id)&&(c.push(u.id),s.push({id:u.id,tags:u.tags,collections:u.collections,price:u.price_min,key:l[u.id]}))}var p=e.getPriceList(a,s,!0);e.cart.updatedLineItems=p,e.cart.productMap=s,e.cart.updateWhenItemQuantityChange(a,r,i,n,s,p,!0)}}))}}},e.cart.getLineItemsPriceWhenUseAMO=function(a,r,i,n){var o=e.cart.isExistedUpdateCartBtn;if(!i||!o){var s=[],c=[],l=[];if(r.items.forEach((function(t){var e=t.product_id;-1===c.indexOf(e)&&null!==e&&(c.push(e),s.push('id:"'+e+'"'),l[e]=t.key)})),e.cart.updatedLineItemsAndUseAMO.length&&e.cart.productMap.length)e.cart.updateWhenItemQuantityChangeAndUseAMO(a,r,i,n,e.cart.productMap,e.cart.updatedLineItemsAndUseAMO,!1);else if(e.cart.updatedLineItemsAndUseAMO.length&&e.cart.productMap.length&&n&&i)e.cart.updateWhenItemQuantityChangeAndUseAMO(a,r,i,n,e.cart.productMap,e.cart.updatedLineItems,!1);else{var d="/search.js?q="+s.join(" OR ")+"&view=bss.b2b",u=encodeURI(d);t.get(u,(function(t){var o=[];try{o=JSON.parse(t)}catch(t){console.log("product label: JSON parse returns no item")}if(o.length>0){for(var s=[],c=[],d=0;d<o.length;d++){var u=o[d];-1===c.indexOf(u.id)&&(c.push(u.id),s.push({id:u.id,tags:u.tags,collections:u.collections,price:u.price_min,key:l[u.id]}))}var p=e.amo.getAppliedRulesForCartItems(s,!0);e.cart.updatedLineItemsAndUseAMO=p,e.cart.updateWhenItemQuantityChangeAndUseAMO(a,r,i,n,s,p,!0)}}))}}},e.cart.fixer=function(a,r,c){t.ajax({url:"/cart.js",type:"GET",dataType:"json",success:function(l){if(l){a.shop.permanent_domain;i&&(e.qb.insertQtyTableToCartItemBlock(l),c&&!e.page.isCartPage()||e.cart.reRenderQtyTable(),!c||!r||n&&0!=e.configData.length||e.handleQuantityChangeAjaxCart(!1)),n&&e.configData&&e.configData.length&&e.cart.getLineItemsPrice(a,l,r,c),o&&e.amoRules&&e.amoRules.length>0&&(n&&e.configData&&e.configData.length?setTimeout((function(){e.cart.getLineItemsPriceWhenUseAMO(a,l,r,c)}),1e3):e.cart.getLineItemsPriceWhenUseAMO(a,l,r,c)),s&&setTimeout((function(){let a=t("[data-cart-item-regular-price],[bss-b2b-item-price],[data-cart-subtotal],[bss-b2b-ajax-cart-subtotal],[bss-b2b-cart-item-key],[data-cart-price],[bss-b2b-cart-total-price],[bss-b2b-cart-discount-total],[data-cart-discount-amount],[data-cart-price-bubble][data-cart-price],[data-cart-item-id]  [data-cart-item-price-container] .cart-item__original-price,[data-cart-item-id]  [data-cart-item-line-price-container] .cart-item__original-price,.cartTotalSelector ,.cart_subtotal ,.cart-item__price ,.cart-subtotal--price"+e.getCartPriceClass("cart_total")+e.getCartPriceClass("cart_subtotal")+e.getCartPriceClass("cart_item_regular_price")+e.getCartPriceClass("cart_item_original_price")),r=sessionStorage.getItem("currentCurrency"),i=sessionStorage.getItem("currentCurrencyFormat");e.MC.preConvertCurrency(r,i,a)}),1e3)}else console.log("Could not get cart data")},error:function(t){console.log("Could not get cart data:",t)}})},e.cart.reRenderQtyTable=function(){n&&e.configData&&0!=e.configData.length||(e.cart.isExistedUpdateCartBtn||(t(e.cart.inputQuantityElement).off(),t(e.cart.inputQuantityElement).on("change",(function(t){setTimeout((function(){e.cart.fixer(a,!1,!1)}),1500)})),t(e.cart.buttonChangeQuantity).off(),t(e.cart.buttonChangeQuantity).on("click",(function(){setTimeout((function(){e.cart.fixer(a,!1,!1)}),1500)}))))},e.cart.updateWhenItemQuantityChangeAndUseAMO=function(a,r,o,s,c,l,d){var u,p=t(e.cart.inputQuantityElement),b=t(e.cart.buttonChangeQuantity);""==(u=e.getCssSelector("cart_time_delay_changing_qty"))||isNaN(u)||(m=parseInt(u)),""==(u=e.getCssSelector("cart_time_delay_changing_qty"))||isNaN(u)||(m=parseInt(u));for(var m=2e3,f=[],g=0;g<l.length;g++)for(let t=0;t<r.items.length;t++)r.items[t].product_id==l[g].productId&&(r.items[t]={...r.items[t],...l[g]},f.push(r.items[t]));setTimeout((function(){e.amoSettings.amoType?e.amo.checkAMORuleForAllProductsOfCartPage(f):e.amo.checkAMORuleForPerProductOfCartPage(f)}),1e3),o?s?e.handleQuantityChangeAjaxCart(!1):(p.off(),p.on("change",(function(t){e.cart.cartQtyOnChange(1200,m,d)})),b.off(),b.on("click",(function(){e.cart.cartQtyOnChange(1200,m,d)})),n&&e.configData&&e.configData.length>0&&t(e.cart.removeButtons).on("click",(function(){e.cart.cartQtyOnChange(1200,m,d)}))):i&&e.qbRules&&e.qbRules.length>0||n&&e.configData&&e.configData>0||t(e.cart.removeButtons).on("click",(function(){e.cart.cartQtyOnChange(1200,m,d)})),e.cart.visbileElementAfterUpdateQuantity(s,o),e.cart.hoverMinicart(a,r,o,s,c,l,d)},e.cart.visbileElementAfterUpdateQuantity=function(a,r){a&&t('[bss-b2b-ajax-cart-subtotal], .cart-drawer__subtotal-value,[bss-b2b-ajax-cart-line-price], [bss-b2b-ajax-original-line-price],[data-cart-price-bubble][data-cart-price],[data-section-id="cart-drawer"] [data-cart-subtotal],#ajaxifyCart .cart-subtotal--price,.drawer .cart-item__price,.cartTotalSelector').show(),r?(t("[data-cart-item-regular-price],[data-cart-item-id]  [data-cart-item-price-container] .cart-item__original-price,[data-cart-item-id]  [data-cart-item-line-price-container] .cart-item__original-price").fadeIn(700),t("[data-cart-subtotal],#cart-total,#total-cart-bottom,[bss-b2b-ajax-cart-subtotal]").fadeIn(700)):t("[bss-b2b-cart-item-key],[bss-b2b-cart-total-price],[data-cart-item-regular-price],[data-cart-subtotal]").css("visibility","visible"),(r||a)&&(t("[bss-b2b-cart-item-key],[data-cart-subtotal],#cart-total,#total-cart-bottom,[bss-b2b-ajax-cart-subtotal],[bss-b2b-cart-item-key][bss-b2b-original-line-price], [data-cart-item-regular-price], [bss-b2b-ajax-original-line-price],[bss-b2b-product-id],[bss-b2b-final-line-price],[bss-b2b-item-final-price],[bss-b2b-product-id][bss-b2b-product-sale-price],.product-price,[bss-b2b-product-id].priceRow,[bss-b2b-product-id][bss-b2b-product-handle][bss-b2b-variant-id],.cart-prod-price .money span,.ajaxcart__price span[bss-b2b-ajax-original-line-price].atc-banner--container [data-atc-banner-product-price-value],.atc-banner--container [data-atc-banner-cart-subtotal],[bss-b2b-cart-total-price]").css("visibility","visible").show(),1655==e.storeId&&t(".header .money.sale,.header .cart_subtotal.js-cart_subtotal").css("visibility","visible"))}}(t,e,i,n,s,o,b,p),l(t,e,i,s),c(t,e,i,n,!0,0,0,b,p,f),function(t,e,a,r,i,n,o,s){e.qb={},e.cart.qbPricingList=[],e.qb.appliedQbRuleForOneProduct=!1,e.qb.quantityInputSelectorOnProductPage=['input[type="number"][name="quantity"]','input[type="number"][data-quantity-input]','input[type="number"][class$="quantity"]','input[id^="Quantity"]','input[name="quantity"]'],e.qb.buttonChangeQuantityOnProductPage=t('form[action="/cart/add"] .qtyminus,form[action="/cart/add"] .qtyplus'),e.qb.defaultLineItemCssSelector=function(t){return'[data-cart-item-key="'+t+'"] .product-details'},e.qb.lineItemCssSelector=function(t){return'[data-cart-item-key="'+t+'"] .bss-b2b-qb-table'},e.qb.quantityInputSelectorOnCartPage=function(t){return['[data-cart-item-key="'+t+'"] input[type="number"]','[data-cart-item-key="'+t+'"] input[data-quantity-input]','[data-cart-item-key="'+t+'"] input[data-cart-item-input-quantity]','[data-cart-item-key="'+t+'"] input.js-qty__input','[data-cart-item-key="'+t+'"] input.js-qty__num','[data-cart-item-key="'+t+'"] input.ajaxifyCart--num']},e.qb.priceOfEachItemElement=function(t){return['[data-cart-item-key="'+t+'"] .cart__price.text-right [data-cart-item-regular-price]:not(:has(>span))','[data-cart-item-key="'+t+'"] .cart__table-cell:not(.cart__table-cell--total) .cart__price:not(:has(>span))','[data-cart-item-key="'+t+'"] .cart-drawer__price .cart-item__original-price.cart-item__price:not(:has(>span))','[data-cart-item-key="'+t+'"] [data-cart-item-price-container] .cart-item__original-price.cart-item__price:not(:has(>span))','[data-cart-item-key="'+t+'"] .cart__table-cell--price.medium-up--text-right:not(:has(>span))','[data-cart-item-key="'+t+'"] .grid__item.one-half.post-large--text-right .h5:not(:has(>span))','[data-cart-item-key="'+t+'"] .text-right[data-label="Price"]:not(:has(>span))','[data-cart-item-key="'+t+'"] [bss-b2b-item-original-price]:not(:has(>span))']},e.qb.totalPriceOfItemElement=function(t){return['[data-cart-item-key="'+t+'"] [data-cart-item-line-price] [data-cart-item-regular-price]:not(:has(>span))','[data-cart-item-key="'+t+'"] span[bss-b2b-cart-item-key="'+t+'"][bss-b2b-original-line-price]','[data-cart-item-key="'+t+'"] .cart__table-cell--line-price[data-label="Total"]:not(:has(>span))','[data-cart-item-key="'+t+'"] .text-right[data-label="Total"]:not(:has(>span))','[data-cart-item-key="'+t+'"] .cart__item-total:not(:has(>span))','[data-cart-item-key="'+t+'"] span[bss-b2b-cart-item-key="'+t+'"][bss-b2b-ajax-original-line-price]','[data-cart-item-key="'+t+'"] .cart-original-price.order-discount--cart-price:not(:has(>span))','[data-cart-item-id="'+t+'"] [data-cart-item-line-price-container] .cart-item__original-price.cart-item__price:not(:has(>span))','[data-cart-item-key="'+t+'"] .grid__item.two-thirds.text-right .cart__price:not(:has(>span)):not(".cart__price--bold")','[data-cart-item-key="'+t+'"] .grid--full.cart__row--table-large .grid__item.text-right .h5:not(:has(>span))','[data-cart-item-key="'+t+'"] span.cart__price.cart__price--bold:not(:has(>span))','[data-cart-item-key="'+t+'"] .product-price:not(:has(>span))','[data-cart-item-key="'+t+'"] span[bss-b2b-cart-item-key="'+t+'"][bss-b2b-final-line-price]','[data-cart-item-key="'+t+'"] .cart-item-price,[data-cart-item-key="'+t+'"] .price_total .money,[data-cart-item-key="'+t+'"] .cart-item__totals .price.price--end,[data-cart-item-key="'+t+'"] [data-cart-item-line-price-container] .cart__item-price .money,[data-cart-item-key="'+t+'"] .gt_total.gt_price_total span.bss-custom-show-price-qb']},e.qb.cartSubtotalPriceElement=function(){return[".large--one-third .cart__subtotal:not(:has(>span))",".cart-subtotal__price[data-cart-subtotal]:not(:has(>span))","[bss-b2b-cart-total-price]","[bss-b2b-ajax-cart-subtotal]",".cart-subtotal--price small:not(:has(>span))",".cart-subtotal--price:not(:has(>span))",".cart__subtotal .cart__subtotal-price:not(:has(>span))",".cart__totals .cart__subtotal:not(:has(>span))","#ajaxifyModal [bss-b2b-product-handle][bss-b2b-variant-id][bss-b2b-product-sale-price]","#your-shopping-cart [bss-b2b-product-handle][bss-b2b-variant-id][bss-b2b-product-sale-price]",".bdr-box .flex.cart-subtotal-row .cart__subtotal.text-right:not(:has(>span))",".minicartTol .product-price",".subtotal .cart-item-total-price",".cart_subtotal .money",".totals__subtotal-value","span[data-cart-subtotal] .money",".gt_subtotal"]},e.qb.insertQtyTableToCartItemBlock=function(r=!1){try{t(e.cart.buttonChangeQuantity);var i=a.cart;if(r&&(i=r),i.items&&i.items.length>0){a.shop.permanent_domain;var o=[],c=[],l=new Map,d=new Map,u=[];i.items.forEach((function(t){var e=t.product_id;-1===c.indexOf(e)&&(c.push(e),o.push('id:"'+e+'"'),l.set(e,[]));let a=l.get(e);a.push(t.key),l.set(e,a);var r=d.get(e);r&&null!=r||(d.set(e,[]),r=[]),r.push({key:t.key,quantity:t.quantity,id:t.variant_id,price:t.price}),d.set(e,r),u.push({key:t.key,price:t.price})}));var p="/search.js?q="+o.join(" OR ")+"&view=bss.b2b",b=encodeURI(p);t.get(b,(function(a){var r=[];try{r=JSON.parse(a)}catch(t){console.log("product label: JSON parse returns no item")}if(r.length>0){for(var o=[],c=[],p=0;p<r.length;p++){var b=r[p];-1===c.indexOf(b.id)&&(c.push(b.id),l.get(b.id).forEach((function(t){o.push({id:b.id,tags:b.tags,collections:b.collections,key:t})})))}let a=0;n&&e.configData&&e.configData.length>0&&(a=1e3),setTimeout(()=>{var a=e.qb.getPriceList(o,d);let r=a.priceLists;e.cart.qbPricingList=r;let c=a.appliedRulesForCartItemsByKey;if(r&&r.length>0)e.qb.showPriceWhenUseQB(r,e.cart.cpPricingList,i);else{let a=e.qb.cartSubtotalPriceElement().join(",");t(a).length&&(t(a).css("text-decoration","none"),t(".bss-qb-cart-subtotal").length&&t(".bss-qb-cart-subtotal").remove()),s&&e.MC.changeCurrencyCartPageQB()}c.forEach((function(t,a){u.forEach(e=>{e.key==a&&(t.price=e.price)}),n&&e.configData&&e.configData.length>0&&e.cart.cpPricingList.forEach((function(e){e.key==a&&(t.price=e.modifiedItemPrice)})),e.qb.generateTableOnCartPage(a,t)})),t(".bss-b2b-cart-item-qty-table-header").on("click",(function(e){e.stopPropagation(),t(this).closest(".bss-b2b-cart-item-qty-table").find(".bss-b2b-qty-table-wrapper").toggle()})),1967==e.storeId&&t(".bss-b2b-qty-table-wrapper").attr("style","display: block !important")},a)}})),n&&e.configData&&e.configData.length>0||t(e.cart.removeButtons).on("click",(function(){e.cart.cartQtyOnChange(1200,2e3,!0)}))}else console.log("Could not get cart data")}catch(t){console.log("Could not get shop data")}},e.qb.getAppliedRuleOnProductPage=function(r,i=null){var n=!1,o=!1,s=e.getQueryArray(),c=t('form[action*="/cart/add"]').find('select[name="id"]');c.length&&(o=c.val()),-1!==s.indexOf("variant")&&(o=s.variant);let l=e.qbRules,d=a.customer,u=a.product;u.variants.forEach(t=>{t.id!=o||(n=t)});let p=u?u.id:"";r&&(p=r);let b=!1;return l.forEach((function(t){if(b)return;let e=t.apply_to,r=t.customer_ids,n=t.customer_tags;if(0==e);else if(1==e){if(null==d.id)return}else if(2==e){if(null!==d.id)return}else if(3==e){if(null==d.id)return;if(r=r.split(","),-1===r.indexOf(d.id+""))return}else if(4==e){if(null==d.tags)return;if(n=n.split(","),0==n.filter(t=>d.tags.includes(t+"")).length)return}let o=t.product_condition_type,s=t.product_tags?t.product_tags.split(","):[],c=t.product_ids?t.product_ids.split(","):[],l=t.product_collections?t.product_collections.split(","):[],m=a.collections,f=u?u.tags:"";if(i&&(f=i),0==o)b=t;else if(1==o)-1!==c.indexOf(p+"")&&(b=t);else if(2==o){m.filter(t=>l.includes(t+"")).length>0&&(b=t)}else if(3==o){s.filter(t=>f.includes(t+"")).length>0&&(b=t)}})),b&&(e.cp.productAfterUseCP.length>0?e.cp.productAfterUseCP.forEach(t=>{t.id==p&&(b.price=t.price)}):b.price=n.price),e.qb.appliedQbRuleForOneProduct=b,b},e.qb.getAppliedRulesForCartItems=function(t){let r=e.qbRules,i=a.customer,n=new Map,o=new Map;return r.forEach((function(e){let a=e.apply_to,r=e.customer_ids,s=e.customer_tags;if(0==a);else if(1==a){if(null==i.id)return}else if(2==a){if(null!==i.id)return}else if(3==a){if(null==i.id)return;if(r=r.split(","),-1===r.indexOf(i.id+""))return}else if(4==a){if(null==i.tags)return;if(s=s.split(","),0==s.filter(t=>i.tags.includes(t+"")).length)return}let c=e.product_condition_type,l=e.product_tags?e.product_tags.split(","):[],d=e.product_ids?e.product_ids.split(","):[],u=e.product_collections?e.product_collections.split(","):[];t.forEach((function(t){if(n.get(t.id)&&o.get(t.key))return;let a=t.collections,r=t.tags,i=t.id,s=!1;if(0==c)s=e;else if(1==c)-1!==d.indexOf(i+"")&&(s=e);else if(2==c){a.filter(t=>u.includes(t+"")).length>0&&(s=e)}else if(3==c){l.filter(t=>r.includes(t+"")).length>0&&(s=e)}s&&(s.price=t.price,n.set(t.id,s),o.set(t.key,s))}))})),{ruleMapForId:n,ruleMapForKey:o}},e.qb.getPriceList=function(t,a){if(0==i)return[];var r=e.qb.getAppliedRulesForCartItems(t),n=r.ruleMapForKey,o=r.ruleMapForId,s=new Map;o.forEach((function(t,e){if(1==t.rule_type){var a=s.get(t.id);a&&null!=a||(a=[],s.set(t.id,[])),a.push(e),s.set(t.id,a)}}));var c=[];return o.forEach((function(t,r){if(0==t.rule_setting)if(0==t.rule_type){var i=a.get(r),n=0;i.forEach((function(t){n+=t.quantity}));var o=t.qty_table,l=-1,d=-1;o.forEach((function(t){let e=parseInt(t.qty_from),a=t.qty_to;null!=a&&a.toString().length>0?(a=parseInt(t.qty_to),n>=e&&n<=a&&(d=parseFloat(t.discount_value),l=parseInt(t.discount_type))):n>=e&&(d=parseFloat(t.discount_value),l=parseInt(t.discount_type))})),-1!=d&&-1!=l&&i.forEach((function(e){c.push({id:e.id,discount_type:l,discount_value:d,price:e.price,quantity:e.quantity,key:e.key,qty_table:t.qty_table,rule_setting:t.rule_setting})}))}else if(1==t.rule_type){if((b=s.get(t.id))&&null!=b){n=0,i=a.get(r);b.forEach((function(t){a.get(t).forEach((function(t){n+=t.quantity}))}));o=t.qty_table,l=-1,d=-1;o.forEach((function(t){let e=parseInt(t.qty_from),a=t.qty_to;null!=a&&a.toString().length>0?(a=parseInt(t.qty_to),n>=e&&n<=a&&(d=parseFloat(t.discount_value),l=parseInt(t.discount_type))):n>=e&&(d=parseFloat(t.discount_value),l=parseInt(t.discount_type))})),-1!=d&&-1!=l&&i.forEach((function(e){c.push({id:e.id,discount_type:l,discount_value:d,price:e.price,quantity:e.quantity,key:e.key,qty_table:t.qty_table,rule_setting:t.rule_setting})}))}}else{i=a.get(r),n=0,o=t.qty_table;i.forEach((function(e){var a=e.quantity,r=-1,i=-1;o.forEach((function(t){let e=parseInt(t.qty_from),n=t.qty_to;null!=n&&n.toString().length>0?(n=parseInt(t.qty_to),a>=e&&a<=n&&(i=parseFloat(t.discount_value),r=parseInt(t.discount_type))):a>=e&&(i=parseFloat(t.discount_value),r=parseInt(t.discount_type))})),-1!=i&&-1!=r&&c.push({id:e.id,discount_type:r,discount_value:i,price:e.price,quantity:e.quantity,key:e.key,qty_table:t.qty_table,rule_setting:t.rule_setting})}))}else{let n=e.cart.cpPricingList.length>0?e.cart.cpPricingList:[];if(0==t.rule_type){i=a.get(r);var u=0;n.length>0?i.forEach((function(t){let e=!1;for(let a=0;a<n.length;a++)if(n[a].key==t.key){u+=.01*n[a].modifiedLineItemPrice,e=!0;break}e||(u+=t.quantity*t.price*.01)})):i.forEach((function(t){u+=t.quantity*t.price*.01}));var p=t.amount_table;l=-1,d=-1;p.forEach((function(t){let e=parseFloat(t.amount_from),a=t.amount_to;null!=a&&a.toString().length>0?(a=parseFloat(t.amount_to),u>=e&&u<=a&&(d=parseFloat(t.discount_value),l=parseInt(t.discount_type))):u>=e&&(d=parseFloat(t.discount_value),l=parseInt(t.discount_type))})),-1!=d&&-1!=l&&i.forEach((function(e){c.push({id:e.id,discount_type:l,discount_value:d,price:e.price,quantity:e.quantity,key:e.key,amount_table:t.amount_table,rule_setting:t.rule_setting})}))}else if(1==t.rule_type){var b;if((b=s.get(t.id))&&null!=b){u=0,i=a.get(r);b.forEach((function(t){a.get(t).forEach((function(t){if(n.length>0){let e=!1;for(let a=0;a<n.length;a++)if(n[a].key==t.key){u+=.01*n[a].modifiedLineItemPrice,e=!0;break}e||(u+=t.quantity*t.price*.01)}else u+=t.quantity*t.price*.01}))}));p=t.amount_table,l=-1,d=-1;p.forEach((function(t){let e=parseFloat(t.amount_from),a=t.amount_to;null!=a&&a.toString().length>0?(a=parseFloat(t.amount_to),u>=e&&u<=a&&(d=parseFloat(t.discount_value),l=parseInt(t.discount_type))):u>=e&&(d=parseFloat(t.discount_value),l=parseInt(t.discount_type))})),-1!=d&&-1!=l&&i.forEach((function(e){c.push({id:e.id,discount_type:l,discount_value:d,price:e.price,quantity:e.quantity,key:e.key,amount_table:t.amount_table,rule_setting:t.rule_setting})}))}}else{i=a.get(r),u=0,p=t.amount_table;i.forEach((function(e){var a=0;if(n.length>0){let t=!1;for(let r=0;r<n.length;r++)if(n[r].key==e.key){a=.01*n[r].modifiedLineItemPrice,t=!0;break}t||(a=e.price*e.quantity*.01)}else a=e.price*e.quantity*.01;var r=-1,i=-1;p.forEach((function(t){let e=parseFloat(t.amount_from),n=t.amount_to;null!=n&&n.toString().length>0?(n=parseFloat(t.amount_to),a>=e&&a<=n&&(i=parseFloat(t.discount_value),r=parseInt(t.discount_type))):a>=e&&(i=parseFloat(t.discount_value),r=parseInt(t.discount_type))})),-1!=i&&-1!=r&&c.push({id:e.id,discount_type:r,discount_value:i,price:e.price,quantity:e.quantity,key:e.key,amount_table:t.amount_table,rule_setting:t.rule_setting})}))}}})),{priceLists:c,appliedRulesForCartItemsByKey:n}},e.qb.getQtyTableHtml=function(t,a=!0,i){if(0==t.rule_setting){var n=t.qty_table,o="<table>";o+="<thead><tr><th>"+e.qbTranslations.table_qty_range_text+"</th><th>"+e.qbTranslations.table_discount_text+"</th></tr></thead>",o+="<tbody>";for(var s=0;s<n.length;s++){var c=n[s].discount_value;switch(n[s].discount_type){case 0:c=r.formatMoney(100*c);break;case 1:c=e.qbSettings.qbType?(c=t.price-100*c)>0?r.formatMoney(c):r.formatMoney(0):r.formatMoney(100*c);break;case 2:e.qbSettings.qbType?c=r.formatMoney(t.price-t.price*(c/100)):c+="%"}let a=!1;i&&(null==n[s].qty_to||0==n[s].qty_to.toString().length?i>=n[s].qty_from&&(a=!0):i>=n[s].qty_from&&n[s].qty_to>=i&&(a=!0));let l="<td>"+n[s].qty_from+" - "+n[s].qty_to+"</td>",d="<tr class='bss-b2b-qty-table-row "+(a?"qty-row-active":"")+"' data-min='"+n[s].qty_from+"' data-max='"+n[s].qty_to+"'>";null!=n[s].qty_to&&0!=n[s].qty_to.toString().length||(l="<td> â‰¥ "+n[s].qty_from+"</td>",d="<tr class='bss-b2b-qty-table-row' data-min='"+n[s].qty_from+"' data-max='"+n[s].qty_from+"'>"),o+=d,o+=l,o+="<td>"+c+(0==n[s].discount_type||e.qbSettings.qbType?" "+e.qbTranslations.flat_price_suffix:"")+"</td>",o+="</tr>"}o+="</tbody>",o+="</table>";var l='<div class="bss-b2b-cart-item-qty-table">';return l+='<p class="bss-b2b-cart-item-qty-table-header">'+e.qbTranslations.table_header_text+"</p>",l+='<div class="bss-b2b-qty-table-wrapper"'+(a?'style="display: block">':'style="display: none">')+o+"</div>",l+="</div>"}var d=t.amount_table;o="<table>";o+="<thead><tr><th>"+e.qbTranslations.table_amount_range_text+"</th><th>"+e.qbTranslations.table_discount_text+"</th></tr></thead>",o+="<tbody>";for(s=0;s<d.length;s++){c=d[s].discount_value;switch(d[s].discount_type){case 0:case 1:c=r.formatMoney(100*c);break;case 2:c+="%"}let t="<td>"+r.formatMoney(100*Number(d[s].amount_from))+" - "+r.formatMoney(100*Number(d[s].amount_to))+"</td>",a="<tr class='bss-b2b-qty-table-row' data-min='"+d[s].amount_from+"' data-max='"+d[s].amount_to+"'>";null!=d[s].amount_to&&0!=d[s].amount_to.toString().length||(t="<td> â‰¥ "+d[s].amount_from+"</td>",a="<tr class='bss-b2b-qty-table-row' data-min='"+d[s].amount_from+"' data-max='"+d[s].amount_from+"'>"),o+=a,o+=t,o+="<td>"+c+(0==d[s].discount_type?" "+e.qbTranslations.flat_price_suffix:"")+"</td>",o+="</tr>"}o+="</tbody>",o+="</table>";l='<div class="bss-b2b-cart-item-qty-table">';return l+='<p class="bss-b2b-cart-item-qty-table-header">'+e.qbTranslations.table_header_text_ab+"</p>",l+='<div class="bss-b2b-qty-table-wrapper"'+(a?'style="display: block">':'style="display: none">')+o+"</div>",l+="</div>"},e.qb.generateTableOnProductListingPage=function(a,r){var i=e.qb.getAppliedRuleOnProductPage(a,r);if(i){var n=e.qb.getQtyTableHtml(i);let r=t(`.screen-layer.screen-layer--product[data-product-id=${a}]`);if(r.length){let e=t(r).find(".product-single__meta .product-single__header");e.length&&!t(e).find(".bss-b2b-cart-item-qty-table").length&&t(e).append(n)}t(".bss-b2b-cart-item-qty-table-header").on("click",(function(e){e.stopPropagation(),t(this).closest(".bss-b2b-cart-item-qty-table").find(".bss-b2b-qty-table-wrapper").toggle()})),t(".bss-b2b-qty-table-row").on("click",(function(a){a.preventDefault();var r=e.qb.quantityInputSelectorOnProductPage.join(",");t(r).val(t(this).attr("data-max")),t(".bss-b2b-qty-table-row").removeClass("qty-row-active"),t(this).addClass("qty-row-active")}))}},e.qb.generateTableOnProductPage=function(){var a=e.qb.getAppliedRuleOnProductPage(!1),r=!1,i=e.qb.quantityInputSelectorOnProductPage.join(",");if(t(i).length>0&&(r=t(i).val()),a){var n=e.qb.getQtyTableHtml(a,!0,r);if(1489==e.storeId&&(n=n.replace("display: block","display: none")),t('form[action*="/cart/add"] .bss-b2b-qb-table').length>0)t('form[action*="/cart/add"] .bss-b2b-qb-table').prepend(n);else if(546==e.storeId){t('button[data-checkout="same"][data-pf-type="ProductATC"]').parent().parent().before(n);let e=setInterval((function(){let a=t('div[data-intro="Product Price"]');t(".bss-b2b-cart-item-qty-table").length?clearInterval(e):a.closest(".cpb-product-actions").prepend(n)}),500)}else 918==e.storeId?t(".price_top").after(n):1967==e.storeId?t(".gf_product-prices").after(n):t('form[action*="/cart/add"]').prepend(n);t(".bss-b2b-cart-item-qty-table-header").on("click",(function(e){e.stopPropagation(),t(this).closest(".bss-b2b-cart-item-qty-table").find(".bss-b2b-qty-table-wrapper").toggle()})),0==a.rule_setting&&t(".bss-b2b-qty-table-row").on("click",(function(a){a.preventDefault(),t(i).val(t(this).attr("data-max")),t(".bss-b2b-qty-table-row").removeClass("qty-row-active"),1746==e.storeId?(t(".bss-b2b-qty-table-row").css("background-color","#fff"),t(".bss-b2b-qty-table-row").css("color","#000"),t(this).css("color","#fff"),t(this).css({"border-color":"#000","border-width":"1px","border-style":"solid"}),t(this).css("background-color","#03baad")):t(this).addClass("qty-row-active")}))}var o=t('form[action*="/cart/add"],form[action*="/checkout"]'+e.getCssSelector("product_cart_form"));if(o.length)for(var s=0;s<o.length;s++){var c=t(o[s]),l=c.attr("id"),d=c.find("select, input.single-option-selector__radio"+e.getCssSelector("product_variant_option_input"));if(d.length)for(var u=0;u<d.length;u++){var p=t(d[u]);p.attr("data-cart-form",l),p.on("change",(function(){setTimeout((function(){c.find(".bss-b2b-cart-item-qty-table").remove(),e.qb.generateTableOnProductPage()}),1e3)}))}}if(t(i).length){t(i).on("change",(function(){t(".bss-b2b-cart-item-qty-table").remove(),e.qb.generateTableOnProductPage()}));let a=e.qb.buttonChangeQuantityOnProductPage;a.length>0&&a.on("click",(function(){t(".bss-b2b-cart-item-qty-table").remove(),e.qb.generateTableOnProductPage()}))}},e.qb.showPriceWhenUseQB=function(a,i,o){let c=e.qb.cartSubtotalPriceElement().join(",");var l=o.original_total_price;n&&e.configData&&e.configData.length&&(l=e.cart.modifiedItemsSubtotalPrice),t(c).css("text-decoration","line-through"),a.forEach((function(a){let o=e.qb.priceOfEachItemElement(a.key).join(","),s=e.qb.totalPriceOfItemElement(a.key).join(",");var c=!1;let d=!1,u=!1,p=a.price*a.quantity,b=a.quantity,m=a.price,f=100*a.discount_value;if(t(s).css("text-decoration","line-through"),t(s).parent().find(".bss-qb-total-price-item").length>0)return;if(n&&e.configData&&e.configData.length&&i.forEach((function(t){t.key==a.key&&(p=t.modifiedLineItemPrice,m=t.modifiedItemPrice)})),0==a.discount_type?m<f?(u=m,c=u*b):(u=f,c=f*b):1==a.discount_type?m<f?(u=0,c=0):(u=m-f,c=(m-f)*b):(u=m*(1-a.discount_value/100),c=e.getModifiedPrice(2,p,a.discount_value)),d=p-c,l-=d,t(o).length>0){if(t(o).css("text-decoration","line-through"),t(o).parent().find(".bss-qb-price-item").length>0)return;{let e='<span class="bss-qb-price-item" bss-shop-base-currency="'+u+'" style="display: block;">'+r.formatMoney(u)+"</span>";t(o).after(e)}}let g='<span class="bss-qb-total-price-item" bss-shop-base-currency="'+c+'" style="display: block;">'+r.formatMoney(c)+"</span>";t(s).after(g)}));let d='<span class="bss-qb-cart-subtotal" bss-shop-base-currency="'+l+'" style="display: block;">'+r.formatMoney(l)+"</span>";t(c).parent().find(".bss-qb-cart-subtotal").length?t(".bss-qb-cart-subtotal").html(r.formatMoney(l)):t(c).after(d),s&&e.MC.changeCurrencyCartPageQB(),t("[bss-b2b-cart-item-key],[bss-b2b-product-id],[bss-b2b-variant-id],[bss-b2b-cart-item-key],[bss-b2b-cart-total-price],[bss-b2b-cart-total-discount],[data-cart-item-regular-price],[data-cart-subtotal]").css("visibility","visible")},e.qb.generateTableOnCartPage=function(a,r){var i=e.qb.quantityInputSelectorOnCartPage(a).join(","),n=t(e.qb.lineItemCssSelector(a));if(0==n.length&&(n=t(e.qb.defaultLineItemCssSelector(a))),n.length&&0==n.parent().find(".bss-b2b-cart-item-qty-table").length){var o=e.cart.quantityInputSelectorWithKeyItem(a).join(",");let c=!1;t(o).length>0&&(c=t(o).val());var s=e.qb.getQtyTableHtml(r,!1,c);n.after(s),0==r.rule_setting&&t('[data-cart-item-key="'+a+'"] .bss-b2b-qty-table-row').on("click",(function(r){r.preventDefault(),r.stopPropagation(),t(i).val(t(this).attr("data-max")).trigger("change"),t.post("/cart/change.js",{quantity:parseInt(t(this).attr("data-max")),id:a},"json").done((function(){t("form[action*='/cart']").submit()})),t('[data-cart-item-key="'+a+'"] .bss-b2b-qty-table-row').removeClass("qty-row-active"),1746==e.storeId?(t(".bss-b2b-qty-table-row").css("background-color","#fff"),t(".bss-b2b-qty-table-row").css("color","#000"),t(this).css("color","#fff"),t(this).css({"border-color":"#000","border-width":"1px","border-style":"solid"}),t(this).css("background-color","#03baad")):t(this).css({"background-color":e.qbSettings.row_hover_background_color,color:e.qbSettings.row_hover_text_color})}))}},e.qb.settingTableQBOrAB=function(){let t="\n            .bss-b2b-cart-item-qty-table-header {background-color:"+e.qbSettings.header_table_background+";color:"+e.qbSettings.text_header_table_color+";}.bss-b2b-qty-table-wrapper {background-color:"+e.qbSettings.table_background_color+";color:"+e.qbSettings.text_table_color+";}.bss-b2b-qty-table-wrapper th, .bss-b2b-qty-table-wrapper td {border: 1px solid "+e.qbSettings.header_table_background+" !important;}.bss-b2b-qty-table-row.qty-row-active {background-color:"+e.qbSettings.row_hover_background_color+";color:"+e.qbSettings.row_hover_text_color+";border-color:"+e.qbSettings.row_hover_background_color+";}.bss-b2b-qty-table-row:not(.qty-row-active):not(:hover) {background-color:"+e.qbSettings.table_background_color+";color:"+e.qbSettings.text_table_color+";}";var a=document.createElement("style");a.type="text/css",a.innerText=t,document.head.appendChild(a)}}(t,e,i,n,s,o,0,p),s&&e.qbRules&&e.qbRules.length>0&&e.qb.settingTableQBOrAB(),function(t,e,a,r,i,n,o){e.amo={},e.amo.warning=[],e.amo.quantityInputSelectorOnCartPage=function(t){return['[data-cart-item-key="'+t+'"] input[type="number"][data-quantity-input]','[data-cart-item-key="'+t+'"] input[data-quantity-input]','[data-cart-item-key="'+t+'"] input[data-cart-item-input-quantity]','[data-cart-item-key="'+t+'"] input.js-qty__input','[data-cart-item-key="'+t+'"] input.js-qty__num','[data-cart-item-key="'+t+'"] input.quantity-selector','[data-cart-item-key="'+t+'"] input.cart__quantity-selector','[data-cart-item-key="'+t+'"] input.js--num','[data-cart-item-id="'+t+'"] input.cart-item__qty-input','[data-cart-item-key="'+t+'"] input.cart__product-qty','[data-cart-item-key="'+t+'"] input.form__input.cart__quantity','input.js-qty__num[data-id="'+t+'"]','input.ajaxcart__qty-num[data-id="'+t+'"]']},e.amo.amountItemOfPrductOnCartPage=function(t){return['[data-cart-item-key="'+t+'"] [data-cart-item-line-price] [data-cart-item-regular-price]','[data-cart-item-key="'+t+'"] .cart__item-total','[data-cart-item-key="'+t+'"] [data-label="Total"]']},e.amo.checkAMORuleForPerProductOfCartPage=function(i){e.amo.warning.length>0&&(e.amo.warning=[]);for(var s=0;s<i.length;s++){let u=i[s];var c=e.amo.quantityInputSelectorOnCartPage(u.key).join(","),l=parseFloat(u.minimum_quantity),d=100*l;if(u.type){let t=u.quantity,a="<li class='bss-amo-text-warning' data-warning-quantity data-warning-id='"+u.id+"' style='display: block'>"+u.title+": "+parseFloat(u.minimum_quantity)+" "+e.amoTranslations.product_text+" </li>";if(t<l)e.amo.warning.includes(a)||e.amo.warning.push(a);else if(e.amo.warning.includes(a)){let t=e.amo.warning.indexOf(a);e.amo.warning.splice(t,1)}}else{let t=u.original_line_price,a=r.formatMoney(100*parseFloat(u.minimum_quantity)),i="<li class='bss-amo-text-warning' data-warning-amount data-warning-id='"+u.id+"' style='display: block'>"+u.title+": "+a+" </li>",s=u.price;if(n&&e.configData&&e.configData.length>0){e.cart.cpPricingList.forEach((function(e){e.key==u.key&&(s=e.modifiedItemPrice,t=e.modifiedLineItemPrice)}))}if(o&&e.qbRules&&e.qbRules.length>0){e.cart.qbPricingList.forEach((function(a){if(u.key==a.key){t=s*a.quantity;let r=100*a.discount_value,i=a.quantity;0==a.discount_type?s>r&&(t=r*a.quantity):t=1==a.discount_type?s<r?0:(s-r)*i:e.getModifiedPrice(2,t,a.discount_value)}}))}if(t<d)e.amo.warning.includes(i)||e.amo.warning.push(i);else if(e.amo.warning.includes(i)){let t=e.amo.warning.indexOf(i);e.amo.warning.splice(t,1)}}n&&o||t(c).length&&(t(c).off(),t(c).change((function(){setTimeout((function(){e.cart.fixer(a,!0)}),1e3)})))}if(e.handleCartCheckoutBtn(a),o&&e.qbRules&&e.qbRules.length>0||n&&e.configData&&e.configData>0);else{let a=t(e.cart.removeButtons);a.length&&(t(a).off(),t(e.cart.removeButtons).on("click",(function(){e.cart.cartQtyOnChange(1200,2e3,!0)})))}t(".cart-subtotal__price").css("display","")},e.amo.checkAMORuleForAllProductsOfCartPage=function(i){e.amo.warning.length>0&&(e.amo.warning=[]);let s=e.amoRules;for(var c=0;c<s.length;c++){let u=s[c];u.amountItemApplyRule=0,u.quantityItemApplyRule=0,u.titleProductApplyRule=[];for(var l=0;l<i.length;l++){let r=i[l];var d=e.amo.quantityInputSelectorOnCartPage(r.key).join(",");if(u.id==r.ruleId)if(u.titleProductApplyRule.push(r.product_title),r.type)u.quantityItemApplyRule+=r.quantity;else{let t=r.original_line_price,a=r.price;if(n&&e.configData&&e.configData.length>0){e.cart.cpPricingList.forEach((function(e){e.key==r.key&&(a=e.modifiedItemPrice,t=e.modifiedLineItemPrice)}))}if(o&&e.qbRules&&e.qbRules.length>0){e.cart.qbPricingList.forEach((function(i){if(r.key==i.key){t=a*i.quantity;let r=100*i.discount_value,n=i.quantity;0==i.discount_type?a>r&&(t=r*i.quantity):t=1==i.discount_type?a<r?0:(a-r)*n:e.getModifiedPrice(2,t,i.discount_value)}}))}u.amountItemApplyRule+=t}n&&o||t(d).length&&(t(d).off(),t(d).change((function(){setTimeout((function(){e.cart.fixer(a,!0)}),1e3)})))}if(u.type){if(u.quantityItemApplyRule<parseFloat(u.minimum_quantity)&&u.titleProductApplyRule.length>0){let t="<li class='bss-amo-text-warning' data-warning-quantity data-warning-id='"+u.id+"' style='display: block'>"+u.titleProductApplyRule.join(", ")+": "+parseFloat(u.minimum_quantity)+" "+e.amoTranslations.product_text+" </li>";e.amo.warning.push(t)}}else{let t=parseFloat(100*u.minimum_quantity);if(u.amountItemApplyRule<t&&u.titleProductApplyRule.length>0){let a=r.formatMoney(t),i="<li class='bss-amo-text-warning' data-warning-amount data-warning-id='"+u.id+"' style='display: block'>"+u.titleProductApplyRule.join(", ")+": "+a+" </li>";e.amo.warning.push(i)}}}if(e.handleCartCheckoutBtn(a),o&&e.qbRules&&e.qbRules.length>0||n&&e.configData&&e.configData>0);else{let a=t(e.cart.removeButtons);a.length&&(t(a).off(),t(e.cart.removeButtons).on("click",(function(){e.cart.cartQtyOnChange(1200,2e3,!0)})))}t(".cart-subtotal__price").css("display","")},e.amo.getAppliedRulesForCartItems=function(t,r){let i=e.amoRules,n=a.customer,o=[];return i.forEach((function(e){let a=e.customer_tags,i=e.apply_to;if(0==i);else if(1==i){if(null!==n.id)return}else if(2==i){if(""==a||null==a)return;if(null==n.tags)return;if(a=a.split(","),0==a.filter(t=>n.tags.includes(t+"")).length)return}let s=e.product_condition_type,c=e.product_tags?e.product_tags.split(","):[],l=e.product_ids?e.product_ids.split(","):[],d=e.product_collections?e.product_collections.split(","):[];for(let a=0;a<t.length;a++){let i=t[a].id,n=t[a].collections,u=t[a].tags;if(0==s)o.push({ruleId:e.id,productId:i,type:e.type,minimum_quantity:e.minimum_quantity,key:!!r&&t[a].key});else if(1==s)-1!==l.indexOf(i+"")&&o.push({ruleId:e.id,productId:i,type:e.type,minimum_quantity:e.minimum_quantity,key:!!r&&t[a].key});else if(2==s){n.filter(t=>d.includes(t+"")).length>0&&o.push({ruleId:e.id,productId:i,type:e.type,minimum_quantity:e.minimum_quantity,key:!!r&&t[a].key})}else if(3==s){c.filter(t=>u.includes(t+"")).length>0&&o.push({ruleId:e.id,productId:i,type:e.type,minimum_quantity:e.minimum_quantity,key:!!r&&t[a].key})}}})),o},e.amo.getAppliedRulesForEachProduct=function(r,i){var n=e.amoRules,o=a.customer,s=[],c=[],l=[],d=i.id;-1===l.indexOf(d)&&null!==d&&(l.push(d),c.push('id:"'+d+'"'));var u="/search.js?q="+c.join(" OR ")+"&view=bss.b2b",p=encodeURI(u);return t.get(p,(function(a){var c=[];try{c=JSON.parse(a)}catch(t){console.log("product label: JSON parse returns no item")}var l,d=!1,u=e.getQueryArray();r&&((l=t(r).find('select[name="id"]')).length&&(d=l.val()));e.page.isProductPage()&&((l=t('form[action*="/cart/add"]').find('select[name="id"]')).length&&(d=l.val()),-1!==u.indexOf("variant")&&(d=u.variant));var p=i.variants;if(p&&p.length)for(var b=0;b<p.length;b++){let t=p[b];t.id==d&&n.forEach((function(e){let a=e.customer_tags,r=e.apply_to;if(0==r);else if(1==r){if(null!==o.id)return}else if(2==r)if(""==a||null==a){if(null==o.tags)return}else{if(null==o.tags)return;if(a=a.split(","),0==a.filter(t=>o.tags.includes(t+"")).length)return}let n=e.product_condition_type,l=e.product_tags?e.product_tags.split(","):[],d=e.product_ids?e.product_ids.split(","):[],u=e.product_collections?e.product_collections.split(","):[],p=c[0].collections,b=c[0].tags;if(0==n)s.push({id:i.id,title:t.name,type:e.type,minimum_quantity:e.minimum_quantity,price:t.price});else if(1==n)-1!==d.indexOf(i.id+"")&&s.push({id:i.id,title:t.name,type:e.type,minimum_quantity:e.minimum_quantity,price:t.price});else if(2==n){p.filter(t=>u.includes(t+"")).length>0&&s.push({id:i.id,title:t.name,type:e.type,minimum_quantity:e.minimum_quantity,price:t.price})}else if(3==n){l.filter(t=>b.includes(t+"")).length>0&&s.push({id:i.id,title:t.name,type:e.type,minimum_quantity:e.minimum_quantity,price:t.price})}}))}})),s},t('button.product-item__action-button[data-secondary-action="open-quick-view"]').length>0&&t('button.product-item__action-button[data-secondary-action="open-quick-view"]').on("click",(function(){setTimeout((function(){t('button[data-action="add-to-cart"]').on("click",(function(){setTimeout((function(){e.cart.fixer(a,!0,!0)}),1e3)}))}),1e3)}))}(t,e,i,n,0,o,s);let C=300;if(537==e.storeId&&(C=30),b&&e.amoRules&&e.amoRules.length>0&&(e.configData&&0!=e.configData.length&&o||e.qbRules&&0!=e.qbRules.length&&s||e.cart.fixer(i,!1,!0)),-1!==[77,664,1289,1031].indexOf(e.storeId)&&(C=2e3),-1!==[1169].indexOf(e.storeId)&&(C=5e3),-1!==[661,1283].indexOf(e.storeId)&&(C=100),-1!==[1958].indexOf(e.storeId)&&e.page.isCartPage()&&(C=1500),setTimeout((function(){if(e.configData&&0!=e.configData.length&&o||e.qbRules&&0!=e.qbRules.length&&s||m||f){if(300==e.storeId)e.page.isCartPage()&&(t("#MyShippingOptions").is(":hidden")&&t("#MyPaymentOptions").is(":hidden")&&e.handleCartCheckoutBtn(i),t('.PO-option-box .cart-attribute__field input[type="checkbox"]').on("change",(function(){t("#MyPaymentOptions").is(":visible")?(t('button.button-primary[name="checkout"]').off(),t("#MyPaymentOptions input").on("change",(function(){0!=t("#Company_Name").val().length&&0!=t("#Purchase_Order_Number").val().length&&e.handleCartCheckoutBtn(i)}))):e.handleCartCheckoutBtn(i)})),t('.shipping-options-box .cart-attribute__field input[type="checkbox"]').on("change",(function(){t("#MyShippingOptions").is(":visible")?(t('button.button-primary[name="checkout"]').off(),t(".shipping-options-box input").on("change",(function(){0!=t("#carrier").val().length&&0!=t("#shipping-method").val().length&&0!=t("#carrier-account-number").val().length&&e.handleCartCheckoutBtn(i)}))):e.handleCartCheckoutBtn(i)})));else if(437==e.storeId)e.page.isCartPage()&&(t("#CartPageAgree").is(":checked")&&e.handleCartCheckoutBtn(i),t("#CartPageAgree").on("change",(function(){t("#CartPageAgree").is(":checked")&&e.handleCartCheckoutBtn(i)})));else if(1759==e.storeId){let a=t("input.js_agree_ck");a.length>0&&(a.is(":checked")&&e.handleCartCheckoutBtn(i),a.on("change",(function(){a.is(":checked")?e.handleCartCheckoutBtn(i):t(document).on("click",'[name="checkout"], [name="goto_pp"], [name="goto_gc"]',(function(t){t.preventDefault(),t.stopPropagation()}))})))}else 1792==e.storeId?setTimeout((function(){let a=t("input#pickup-store");a.length>0&&(a.val().length>0&&e.handleCartCheckoutBtn(i),t("ul#storeUL").on("click",(function(){a.val().length>0?e.handleCartCheckoutBtn(i):t(document).on("click",".cart__checkout-button",(function(t){t.preventDefault(),t.stopPropagation()}))})))}),1e3):e.handleCartCheckoutBtn(i);if(e.page.isCartPage()){if(e.cart.fixer(i,!1,!0),o&&e.configData&&e.configData.length){e.handleAjaxCart(),t("[data-cart-price-bubble][data-cart-price]").hide();var a=1500,r=e.getCssSelector("cart_time_delay_re_calculate");""==r||isNaN(r)||(a=parseInt(r));var n=2e3,c=e.getCssSelector("cart_time_delay_changing_qty");if(""==c||isNaN(c)||(n=parseInt(c)),!e.cart.isExistedUpdateCartBtn){t(e.cart.inputQuantityElement).on("change",(function(){e.handleChangeQuantityEventFirstTime(a,n)}));var l=t(e.cart.buttonChangeQuantity);l.length&&l.on("click",(function(){e.handleChangeQuantityEventFirstTime(a,n)}))}t(".recently-viewed-products-placeholder").length&&e.changeProductPrice(i,!1,!1),t("#shopify-section-recently-viewed-products").length&&e.changeProductPrice(i,!1,!1)}}else{if(o&&e.configData&&e.configData.length&&(e.changeProductPrice(i,!1,!1),t(window).scroll((function(){e.changeProductPrice(i,!1,!1)})),1138==e.storeId&&e.page.isProductPage())){t("#quantity-plus, #quantity-minus").on("click",(function(){t(".product__price-container [bss-b2b-product-id][bss-b2b-product-parent-price]").css("visibility","hidden"),t(".product__price-container [bss-b2b-product-id][bss-b2b-product-price]").css("visibility","hidden"),t(".product__price-container [bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),t(".product__price-container [bss-b2b-product-id][bss-b2b-product-price]").removeAttr("bss-b2b-product-active"),e.changeProductPrice(i,null,!1,!1,!0)}))}(o&&e.configData&&e.configData.length||s&&e.qbRules&&e.qbRules.length)&&e.handleAjaxCart()}}}),C),1283==e.storeId&&e.page.isProductPage()){let e=t(".inc.button,.dec.button");t(e).on("click",(function(){var e=t(".product_single_price .product_price[bss-b2b-product-id]").html();e=e.replace(/\D/g,"");let a=parseFloat(e),r=t("#quantity").val()*a;t(".total-price span").html(n.formatMoney(r))}))}setTimeout(()=>{if(1169==e.storeId){let e=t('select.circular-box[name="quantity"]');t(e).on("change",(function(){let e=t(this).val(),a=t(this).next();var r=t(this).closest(".product-detail");let i=null;if(r.length&&(i=r.find("#ProductPrice"),i.length)){i=i.html().replace(/\D/g,"");let t=e*parseFloat(i);a.html(n.formatMoney(t))}}))}},C),setTimeout((function(){if(e.configData&&0!=e.configData.length&&o||e.qbRules&&0!=e.qbRules.length&&s||m){if(e.page.isProductPage()){if(o&&e.configData&&e.configData.length){var a=t('form[action*="/cart/add"]'),r=t('form[action*="/cart/add"]').parent();if(null==r.attr("class")&&(r=r.parent()),0===r.find("[bss-b2b-product-parent-price]").length&&(t("#shopify-section-product-template .product__content-main").length&&(r=t("#shopify-section-product-template .product__content-main")),t("#shopify-section-product-template").length&&(r=t("#shopify-section-product-template")),t(".Product__Info").length&&(r=t(".Product__Info"))),a.length){t(a).find("select, input.single-option-selector__radio,input.product-form__single-selector"+e.getCssSelector("product_variant_option_input")).on("change",(function(){e.changeVariantOptionProductPage(r,a)})),t(a).find("div.swatch-element").on("click",(function(){e.changeVariantOptionProductPage(r,a)})),t(a).find(".variant-input-wrap .variant-input").on("click",(function(){e.changeVariantOptionProductPage(r,a)})),1792==e.storeId&&t(a).closest(".product__info-container").find('input[name="Contenance"]').on("click",(function(){t(a).closest(".product__info-container").find("#price-template--14998906011807__main").hide(),setTimeout((function(){e.changeVariantOptionProductPage(r,a),e.changeProductPrice(i,null,a)}),500),setTimeout((function(){t(a).closest(".product__info-container").find("#price-template--14998906011807__main").show()}),1300)})),t(a).find(".gf_variants.single-option-selector.single-option-selector-product").on("change",(function(){e.changeVariantOptionProductPage(r,a)})),t(a).find("li.HorizontalList__Item").on("click",(function(){e.changeVariantOptionProductPage(r,a.parent()),setTimeout((function(){t("span[data-money-convertible]").hide()}),50),setTimeout((function(){e.handleAjaxCart(t,e,i),e.makeChangesAfterClickAjaxcart(2e3)}),2e3)})),t(a).find("input#addToCart").on("click",(function(){setTimeout((function(){e.handleAjaxCart(t,e,i),e.makeChangesAfterClickAjaxcart(2200)}),2200)})),t(a).find("a.btn-cart").on("click",(function(){setTimeout((function(){e.handleAjaxCart(t,e,i),e.makeChangesAfterClickAjaxcart(1200)}),1200)}));var n=1200,c=e.getCssSelector("ajax_cart_time_delay_opening_cart");""==c||isNaN(c)||(n=parseInt(c)),t(a).find("[data-cart-submit]").on("click",(function(){setTimeout((function(){t("button.ajax-cart__toggle").on("click",(function(){e.makeChangesAfterClickAjaxcart(n)}))}),n)}));var l=t(a).find(".gt_swatches--select");if(l.length){let i=t(a).attr("id").split("_"),n=t('script[data-id="'+i[i.length-1]+'"]').parent();l=t(n).find(".gt_swatches--select, .item.gt_product-carousel--item, .gt_product-quantity--minus, .gt_product-quantity--plus"),t(l).on("click",(function(){e.changeVariantOptionProductPage(r,a)}))}(l=t(a).find("input[data-product-option]")).length&&t(l).on("click",(function(){e.changeVariantOptionProductPage(r,a)})),(l=t(a).find("input[data-product-option]")).length&&t(l).on("click",(function(){e.changeVariantOptionProductPage(r,a)})),1868==e.storeId&&t('input.single-option-selector[type="radio"]').on("click",(function(){setTimeout((function(){e.changeVariantOptionProductPage(r,a)}),200)})),1031==e.storeId&&t(".gf_swatch").on("click",(function(){setTimeout((function(){e.changeVariantOptionProductPage(r,a)}),200)}))}}setTimeout((function(){s&&e.qbRules&&e.qbRules.length&&e.qb.generateTableOnProductPage()}),1e3)}else if(o&&e.configData&&e.configData.length&&(e.applyChangePriceForMultiCarform(),181!=e.storeId&&13!=e.storeId||e.applyChangePriceForCollectionPage(),function(t,e,a){t("a.full-width-link").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var a=t('[data-product-modal-wrapper] form[action*="/cart/add"],.modal.modal--quick-shop.modal--is-active[data-product-id] form[action*="/cart/add"]');a.length&&e.makeCloneBuyItNow(a)}),2e3)})),t(".quick-product__btn[data-product-id]").on("click",(function(){setTimeout((function(){t(".shopify-payment-button__button").fadeIn()}),500),setTimeout((function(){e.applyChangePriceForMultiCarform();var a=t('.modal.modal--quick-shop.modal--is-active[data-product-id] form[action*="/cart/add"]');a.length&&e.makeCloneBuyItNow(a)}),1500)})),t(".productitem--action-trigger[data-quickshop-full], .productitem--action-trigger[data-quickshop-slim]").on("click",(function(){setTimeout((function(){t(".shopify-payment-button__button").fadeIn()}),500),setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('.modal.modal--quickshop-full[data-modal-container] form[action*="/cart/add"],.modal.modal--quickshop-slim[data-modal-container] form[action*="/cart/add"]');if(r.length){var i=r.closest(".product-main");t(i).find("[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),66==e.storeId||778==e.storeId?e.changeProductPrice(a,null,r):e.changeProductPrice(a,"."+t(i).attr("class").split(" ")[0]+" [bss-b2b-product-parent-price]",r),t(i).find("[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),e.makeCloneBuyItNow(r)}}),1500)})),t("a[data-fancybox].quick").on("click",(function(){setTimeout((function(){t(".shopify-payment-button__button").fadeIn()}),500),setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('#product-id-product-template-quick form[action*="/cart/add"]');if(r.length){var i=r.closest("#product-id-product-template-quick");t(i).find("[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),e.changeProductPrice(a,"."+t(i).attr("class").split(" ")[0]+" [bss-b2b-product-parent-price]",r),t(i).find("[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),e.makeCloneBuyItNow(r)}}),1500)})),t('button.product-item__action-button[data-action="open-modal"]').on("click",(function(){setTimeout((function(){t(".shopify-payment-button__button").fadeIn()}),500),setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('#modal-quick-view-collection-template form[action*="/cart/add"]');if(r.length){var i=r.closest("#modal-quick-view-collection-template");t(i).find("[bss-b2b-product-id][bss-b2b-product-price]").removeAttr("bss-b2b-product-active"),e.changeProductPrice(a,"#"+t(i).attr("id").split(" ")[0]+" [bss-b2b-product-price]",r),t(i).find("[bss-b2b-product-id][bss-b2b-product-price]").removeAttr("bss-b2b-product-active"),e.makeCloneBuyItNow(r)}}),1500)})),t('a.quickview-button[title="Quick View"]').on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('.quickview-tpl form[action*="/cart/add"]');r.length&&(e.changeProductPrice(a,!1,r),e.makeCloneBuyItNow(r))}),2e3)})),t("a[data-original-title].quickview-icon.quickview.open-quick-view.woodmart-tltp").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form[action*="/cart/add"]#product-form');r.length&&(e.changeProductPrice(a,!1,r),e.makeCloneBuyItNow(r),e.handleAjaxCart())}),1500)})),t("a.btn-action.quick_view").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('.product-focus form[action*="/cart/add"]#product-form');r.length&&(e.changeProductPrice(a,!1,r),e.makeCloneBuyItNow(r))}),2e3)})),t("input.cart__submit.btn.btn--small-wide").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form[action*="/cart"].cart');r.length&&(e.changeProductPrice(a,!1,r),e.makeCloneBuyItNow(r),e.handleAjaxCart())}),1500)})),243==e.storeId&&t(".quick-product__btn").on("click",(function(){setTimeout((function(){e.applyChangePriceForCollectionPage()}),1500)})),t("a.quick-view").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form[action*="/cart/add"].productForm');r.length&&(e.changeProductPrice(a,!1,r),e.makeCloneBuyItNow(r),t("button#AddToCart-quickView").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form[action*="/cart"]');r.length&&(e.changeProductPrice(a,!1,r),e.makeCloneBuyItNow(r),e.applyChangePriceForCollectionPage(),e.handleAjaxCart())}),1e3)})))}),1e3)})),t("a.add-to-cart").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form[action*="/cart"]');r.length&&(e.changeProductPrice(a,!1,r),e.makeCloneBuyItNow(r),e.applyChangePriceForCollectionPage(),e.handleAjaxCart())}),1e3)})),t("a.quick-add-button-variants").on("click",(function(){setTimeout((function(){var r=t('form[action*="/cart"]');r.length&&(e.changeProductPrice(a,!1,r[0]),setTimeout((function(){e.makeCloneBuyItNow(r[0])}),2e3))}),1e3)})),t(".btn.quick-view-text.product_link").on("click",(function(){if(t(this).closest(".products").length){let e=t(this).closest(".products").find(".product-detail [bss-b2b-product-id]").attr("bss-b2b-product-id");t(document).find(".price.h6[bss-b2b-product-id]").attr("bss-b2b-product-id",e),t(document).find(".compare-price[bss-b2b-product-id]").attr("bss-b2b-product-id",e),t(document).find(".details.clearfix .total-price[bss-b2b-product-id]").attr("bss-b2b-product-id",e),t(document).find(".details.clearfix .total-price .h5[bss-b2b-product-id]").attr("bss-b2b-product-id",e)}})),t("a.qs-button, button.btn-cart").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form[data-form="cdz-mini-cart"], div.product-info-main');r.length&&(e.changeProductPrice(a,!1,r),e.makeCloneBuyItNow(r),t("a.btn-cart, button.btn-update-qty").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform(),t("div.block-content").length&&(e.handleAjaxCart(),e.handleCartCheckoutBtn(a))}),1200)})))}),1e3)})),t("button.btn-update-qty, a.btn-cart, a.btn-remove.update-cart-btn").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t("div.block-content");r.length&&(e.changeProductPrice(a,!1,r),e.handleAjaxCart(),e.handleCartCheckoutBtn(a))}),1200)})),t("a.quick-view-btn").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form[action*="/cart/add"].shopify-product-form');r.length&&(e.changeProductPrice(a,!1,r),t("input#addToCart").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form[action*="/cart"]');r.length&&(e.changeProductPrice(a,!1,r),e.handleAjaxCart())}),1e3)})))}),1e3)})),t("input.cart-popup, input#addToCart").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form[action*="/cart"]');r.length&&(e.changeProductPrice(a,!1,r),e.handleAjaxCart())}),1e3)})),t("div.quick-product__btn").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t("div.product-single__meta");r.length&&(e.changeProductPrice(a,!1,r),t("button#add-to-cart").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form#CartDrawerForm[action*="/cart"]');r.length&&(e.changeProductPrice(a,!1,r),e.handleAjaxCart())}),1e3)})))}),1e3)})),t("span.quick_shop.ss-icon.js-quick-shop-link").on("click",(function(){setTimeout((function(){var r=t('form[action*="/cart/add"]');e.changeProductPrice(a,!1,r),t("button.ajax-submit.action_button.add_to_cart").on("click",(function(){setTimeout((function(){r.length&&e.handleAjaxCart()}),500)}))}),1e3)})),t("span.quick_shop").on("click",(function(){if(1788==e.storeId){let r=t(this).attr("data-id"),i=t(".price__container.price__container--display-price-true .current_price");i.hide(),i.attr("bss-b2b-product-id",r),i.attr("bss-b2b-product-price",""),i.removeAttr("bss-b2b-product-active"),setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t("div.quick-shop__text-wrap");r.length&&(e.changeProductPrice(a,!1,r),t("button.button--add-to-cart").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form.ajax-cart__form[action*="/cart"]');r.length&&(e.changeProductPrice(a,!1,r),e.handleAjaxCart(),e.handleCartCheckoutBtn(a))}),2200)})),t(r).find("div.swatch-element").on("click",(function(){let i=t(this).attr("data-id"),n=t(".price__container.price__container--display-price-true .current_price");n.hide(),n.attr("bss-b2b-product-id",i),n.attr("bss-b2b-product-price",""),n.removeAttr("bss-b2b-product-active"),e.changeProductPrice(a,!1,r)})))}),1e3)}else setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t("div.quick-shop__text-wrap");r.length&&(e.changeProductPrice(a,!1,r),t("button.button--add-to-cart").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form.ajax-cart__form[action*="/cart"]');r.length&&(e.changeProductPrice(a,!1,r),e.handleAjaxCart(),e.handleCartCheckoutBtn(a))}),2200)})))}),1e3)})),t("a.quick.btn.auto-width").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t("div.product-product-template-quick");r.length&&(e.changeProductPrice(a,!1,r),t("input.add-to-cart").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t("ul.clearfix.account-active");r.length&&(e.changeProductPrice(a,!1,r),e.handleAjaxCart())}),1500)})))}),1e3)})),t("a.quick-view-text").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('.quick-view form[action*="/cart/add"]');t('form[action*="/cart/add"]').parent();r.length&&(t("[bss-b2b-product-id][bss-b2b-product-parent-price]").css("visibility","hidden"),t("[bss-b2b-product-id][bss-b2b-product-price]").css("visibility","hidden"),t(".prices.product_price[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),t(".price.h2[bss-b2b-product-id][bss-b2b-product-price]").removeAttr("bss-b2b-product-active"),e.changeProductPrice(a,!1,r),e.handleAjaxCart(),e.handleCartCheckoutBtn(a),t(".single-option-selector").on("change",(function(){t("[bss-b2b-product-id][bss-b2b-product-parent-price]").css("visibility","hidden"),t("[bss-b2b-product-id][bss-b2b-product-price]").css("visibility","hidden"),t(".price.h2[bss-b2b-product-id][bss-b2b-product-price]").removeAttr("bss-b2b-product-active"),e.changeProductPrice(a,".price.h2",r)})))}),500)})),t("button.btn.btn--circle.btn--icon.quick-product__btn").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form[action*="/cart/add"]');r.length&&(e.changeProductPrice(a,!1,r),e.handleAjaxCart(),e.handleCartCheckoutBtn(a))}),1e3)})),t(".tt-btn-quickview").on("click",(function(){let r=t(this).closest(".respimgsize"),i=t(r).find("[bss-b2b-product-id]"),n=null;i.length&&(n=t(i).attr("bss-b2b-product-id"));let o=t(".modal-dialog.modal-lg").find("[bss-b2b-product-price]");t(o).removeAttr("bss-b2b-product-active"),t(o).css("visibility","hidden"),t(o).attr("bss-b2b-product-id",n),setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form[action*="/cart/add"]#modal_quick_view');r.length&&(e.changeProductPrice(a,!1,r),e.handleAjaxCart(),e.handleCartCheckoutBtn(a))}),500)})),t(".my-cart-link-container").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form[action*="/cart"].js-cart-form');r.length&&(e.changeProductPrice(a,!1,r),e.handleAjaxCart(),e.handleCartCheckoutBtn(a))}),1e3)})),t("a.btn.product-loop__quickview").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('#quick form[action*="/cart/add"]');if(r.length){t("[bss-b2b-product-id][bss-b2b-product-parent-price]").css("visibility","hidden"),t("[bss-b2b-product-id][bss-b2b-product-price]").css("visibility","hidden"),t("[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),t("[bss-b2b-product-id][bss-b2b-product-price]").removeAttr("bss-b2b-product-active"),e.changeProductPrice(a,!1,r),e.handleAjaxCart(),e.handleCartCheckoutBtn(a),t(r).find("div.swatch-element").on("click",(function(){t("[bss-b2b-product-id][bss-b2b-product-parent-price]").css("visibility","hidden"),t("[bss-b2b-product-id][bss-b2b-product-price]").css("visibility","hidden"),t("[bss-b2b-product-id][bss-b2b-product-parent-price]").removeAttr("bss-b2b-product-active"),t("[bss-b2b-product-id][bss-b2b-product-price]").removeAttr("bss-b2b-product-active"),e.changeProductPrice(a,null,!1)})),t("#quantity-plus, #quantity-minus").on("click",(function(){t('#quick form[action*="/cart/add"] [bss-b2b-product-id][bss-b2b-product-parent-price]').css("visibility","hidden"),t('#quick form[action*="/cart/add"] [bss-b2b-product-id][bss-b2b-product-price]').css("visibility","hidden"),t('#quick form[action*="/cart/add"] [bss-b2b-product-id][bss-b2b-product-parent-price]').removeAttr("bss-b2b-product-active"),t('#quick form[action*="/cart/add"] [bss-b2b-product-id][bss-b2b-product-price]').removeAttr("bss-b2b-product-active"),e.changeProductPrice(a,null,!1,!0)}))}}),2e3)})),t(".product-modal").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform();var r=t('form[action*="/cart"].product_form');r.length&&(e.changeProductPrice(a,!1,r),e.handleAjaxCart(),e.handleCartCheckoutBtn(a))}),2e3)})),t("a.upsell_qv.js_add_qv.tooltip_left").on("click",(function(){setTimeout((function(){e.applyChangePriceForMultiCarform(),e.changeProductPrice(a,null,!1),e.handleAjaxCart(),e.handleCartCheckoutBtn(a)}),2e3)}))}(t,e,i)),s&&e.qbRules&&e.qbRules.length&&1778==e.storeId){t(".grid-product__link.quick-product__btn").on("click",(function(){const a=t(this).attr("data-product-id");var r=encodeURI(`/search.js?q=id:"${a}"&view=bss.b2b`);t.get(r,(function(t){var r=[];try{r=JSON.parse(t)}catch(t){console.log("b2b: JSON parse returns no item")}if(r.length>0){const t=r[0].tags;e.qb.generateTableOnProductListingPage(a,t)}}))}))}}else g&&t(".bss-b2b-custom-fields").length&&function(t,e,a){t('form[action*="/cart"] [name="checkout"],#dropdown-cart button.btn.btn-checkout.show,a.button.checkout-button[href="/checkout"],form[action*="/checkout"] .add_to_cart,form[action*="/cart"]#cart_form #checkout,form[action*="/cart"] button.Cart__Checkout,form[action*="/cart"] button.cart__checkout,a.btn.disabled.ttmodalbtn[href="/checkout"],form[action*="/cart"] [name="checkout"][type="submit"],button.Cart__Checkout.Button.Button--primary.Button--full,.baskettop button.mini-cart-checkout,.tt-dropdown-menu .btn.itemCheckout,.bss-btn-checkout-mini-cart,button[name="checkout"].btn,form[action*="/checkout"] [name="checkout"]').on("click",(function(r){t(this).off();let i=this;t(this).closest("form");r.preventDefault(),r.stopPropagation();let n=[],o=t(".bss-b2b-custom-fields textarea,.bss-b2b-custom-fields input[name=bss-radio-button]:checked");if(o.length)for(var s=0;s<o.length;s++){var c={key:o[s].className,value:o[s].value};n.push(c)}var l=t(this).closest('form[action="/cart"]').find(".cart-footer__note-input");l.length&&o.push({key:"cart note",value:l.val()});let d=t('.bss-b2b-custom-fields [type="checkbox"]:checked');if(d.length){var u="";for(s=0;s<d.length;s++)u+=" ,"+d[s].value;u.length&&(u=u.slice(2,u.length));c={key:d[0].className,value:u};n.push(c)}var p=t("#bss-select-cart");if(p.length){var b=t("#bss-select-cart option").filter(":selected").val(),m={key:t(p).attr("class"),value:b};n.push(m)}if(1792==e.storeId){var f={key:"Pickup_Store",value:t("input#pickup-store").attr("value").replace(/<[^>]+>/g,"")};n.push(f)}let g=i;n.length&&null!=n&&null!=n&&e.modifyCartDataAndCreateCheckout(a,"",g,i,!1,!0,n)}))}(t,e,i)}),100);let k=0;var F=setInterval((function(){if(k<=12){if(!(e.configData&&0!=e.configData.length&&o||e.qbRules&&0!=e.qbRules.length&&s||m))return void clearInterval(F);var a=t('form[action*="/cart/add"]'+e.getCssSelector("product_cart_form")),r=t(".shopify-payment-button__button:not([disabled]):not(.bss-b2b-cp-dynamic),.shopify-payment-button__more-options:not([disabled]):not(.bss-b2b-cp-dynamic),.shopify-payment-button__button.shopify-payment-button__button--unbranded:not([disabled]):not(.bss-b2b-cp-dynamic)"+(""!=e.getCssSelector("product_buy_it_now_btn")?e.getCssSelector("product_buy_it_now_btn")+":not([disabled]):not(.bss-b2b-cp-dynamic)":""));if(a.length&&r.length){for(var i=0;i<a.length;i++)e.makeCloneBuyItNow(a[i]);clearInterval(F)}}else clearInterval(F);k++}),500)}function b(t){var e=BSS_B2B.shopModules;void 0!==e&&null!=e&&0!=e.length||(BSS_B2B.shopModules=[{code:"cp",status:1},{code:"qb",status:1},{code:"form",status:1},{code:"tax_exempt",status:0}],e=BSS_B2B.shopModules);var a=!0,r=!0,i=!1;e.forEach((function(t){"cp"==t.code?a=t.status:"qb"==t.code?t.status:"form"==t.code?r=t.status:"tax_exempt"==t.code&&(i=t.status)})),BSS_B2B.isAllowFree||"null"!=BSS_B2B.planCode&&""!=BSS_B2B.planCode&&"undefined"!=BSS_B2B.planCode||(r=!1),r?t("#RegisterForm").length&&t("#RegisterForm").fadeIn(500):"/account/register"==window.location.pathname&&t("#RegisterForm").length&&t("#RegisterForm").fadeIn(500);var n={};t("#bss-b2b-store-data").length&&(n=JSON.parse(t("#bss-b2b-store-data").html()));let o=window.location.href.split("/"),c="cart"==o[o.length-1]||o[o.length-1].includes("cart");(setTimeout((function(){let r="",o=0;if("undefined"!=typeof Storage&&(sessionStorage.bssB2BCountryCode&&"NA"!=sessionStorage.bssB2BCountryCode&&"undefined"!=sessionStorage.bssB2BCountryCode&&(r=sessionStorage.bssB2BCountryCode),sessionStorage.bssB2BCountryTax&&"NA"!=sessionStorage.bssB2BCountryTax&&"undefined"!=sessionStorage.bssB2BCountryTax&&(o=sessionStorage.bssB2BCountryTax)),""==r&&i){let r={domain:n.shop.permanent_domain};fetch(bssB2bApiServer+"/vat/get-tax-based-country",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(t=>t.json()).then((function(r){r.success?(BSS_B2B.countryCode=r.countryCode,BSS_B2B.countryTax=r.tax,"undefined"!=typeof Storage?(sessionStorage.bssB2BCountryCode=r.countryCode,sessionStorage.bssB2BCountryTax=r.tax,console.log("SR country code & Tax:",sessionStorage.bssB2BCountryCode,sessionStorage.bssB2BCountryTax)):console.log("Country Code & Tax:",BSS_B2B.countryCode,BSS_B2B.countryTax)):console.log("Could not get country by IP"),p(t,BSS_B2B,e,n),a&&BSS_B2B.configData&&0!==BSS_B2B.configData.length||s.a.showProductPriceInlcudedVat(BSS_B2B,n)}))}else BSS_B2B.countryCode=r,BSS_B2B.countryTax=o,p(t,BSS_B2B,e,n),a&&BSS_B2B.configData&&0!==BSS_B2B.configData.length||s.a.showProductPriceInlcudedVat(BSS_B2B,n)}),500),c)||($('header form[action="/account"]').length?(console.log("init registration mini form"),function(t,e,a,r){const i=e.rfGeneralSettings.text_color_failed,n=e.rfGeneralSettings.text_color_success;e.RF={},e.RF.data={},e.RF.getInputNumber=0,e.RF.requireFields=[],e.RF.errMsg="",e.RF.errField=null,e.RF.isValidate=!0,e.RF.validVAT=!1,e.RF.validABN=!1,e.RF.oldBorderCSS=t("input").css("border"),e.RF.needScroll=!1;let o="";function s(){let a=t('[bss-b2b-is-email-field], input[name="customer[password]"]').closest('form[action="/account"]');596==e.storeId&&(a=t("[bss-b2b-is-email-field]").closest("#customer-wrapper").find("#create-customer form")),t(a).removeAttr("novalidate"),t(a).prepend('<div class="bss-b2b-registration-form-top"></div>');let r=t(a).find('input[type*="password"]');if(r.length&&0!==e.created_account?(o=t(r).attr("class"),t(r).after('<div class="bss-b2b-registration-form-render"></div>')):t('[bss-b2b-is-email-field], form[action="/account"] input[type="email"]').length&&t('[bss-b2b-is-email-field], form[action="/account"] input[type="email"]').after('<div class="bss-b2b-registration-form-render"></div>'),596==e.storeId){let e=t("#create-customer form");t(e).removeAttr("novalidate");let a=t(e).find('input[type*="password"]');a.length&&(o=t(a[0]).attr("class"),t(a).after('<div class="bss-b2b-registration-form-render"></div>'))}}if("/account/login"==window.location.pathname){if(t('form#create_customer, form[name="create"]').length&&s(),"true"==new URL(window.location.href).searchParams.get("isBssLogin")&&(t("form[action='/account/login'] input[type='email']").val(window.localStorage.getItem("bssEmail")),t("form[action='/account/login'] input[type='password']").val(window.localStorage.getItem("bssPassword")),t("form[action='/account/login'] input[type='submit']").off(),t("form[action='/account/login'] [type='submit']").click(),window.localStorage.removeItem("bssEmail"),window.localStorage.removeItem("bssPassword")),596==e.storeId){let e=t("#create-customer form");t(e).removeAttr("novalidate");let a=t(e).find('input[type*="password"]');a.length&&(o=t(a[0]).attr("id"),t(a[0]).after('<div id="bss-b2b-registration-form-render"></div>'))}}else s();let c=t(".bss-b2b-registration-form-render"),l=t(".bss-b2b-registration-form-top"),d=t(".bss-b2b-registration-form-render-top-header"),u=t(".bss-b2b-registration-form-render-bottom-header"),p=t(".bss-b2b-registration-form-render").closest('form[action="/account"]'),b=t(".bss-b2b-registration-form-render-bottom-header").closest('form[action="/account"]'),m=0,f=0,g=setInterval((function(){5==m?clearInterval(g):(t(p).removeAttr("onsubmit"),m+=1)}),1e3),h=setInterval((function(){t(".bss-b2b-registration-form-render").closest("form[onsubmit]");5==f?clearInterval(h):(t(b).removeAttr("onsubmit"),f+=1)}),1e3);p.length&&setTimeout(()=>{t(p).removeAttr("onsubmit")},1e3),b.length&&setTimeout(()=>{t(b).removeAttr("onsubmit")},1e3);let _=e.status;if(e.RF.formatABN=function(t){let e=t.replace(/\s/g,"").split("");return 11==e.length&&(e[1]=e[1]+" ",e[4]=e[4]+" ",e[7]=e[7]+" "),e.join("")},e.RF.getVatValidationInput=function(){e.RF.getInputNumber=e.RF.getInputNumber+1,3!=e.RF.getInputNumber&&(t(".vat-validation").length?t(".vat-validation").change((function(){e.RF.valiationVatField(t(".vat-validation").val())})):setTimeout(()=>{e.RF.getVatValidationInput()},1e3))},e.RF.getABNValidationInput=function(){if(e.RF.getABNInputNumber=e.RF.getABNInputNumber+1,3!=e.RF.getABNInputNumber)if(t(".abn-validation").length){let a=t("#company-field");a.length&&a.attr("disabled",!0),t(".abn-validation").change((function(){e.RF.valiationABNField(t(".abn-validation").val())}))}else setTimeout(()=>{e.RF.getABNValidationInput()},1e3)},e.RF.valiationVatField=function(r){t("#bss-vat-msg").remove(),t('<p id="bss-vat-msg" style="text-align: center">'+(e.rfGeneralSettings&&e.rfGeneralSettings.loadingForm&&""!==e.rfGeneralSettings.loadingForm?e.rfGeneralSettings.loadingForm:"Loading...")+"</p>").insertAfter(".vat-validation");let o=r.substring(0,2),s=r.substring(2,r.length);t.ajax({type:"POST",url:bssB2bApiServer+"/wholesaler/check-valid-vat",dataType:"JSON",data:{countryCode:o,vatNumber:s,domain:a.shop.permanent_domain},success:function(a){if(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),a.success)if("true"==a.message.valid[0]){e.RF.validVAT=!0;const a=`<p id="bss-vat-msg" style="color: ${n}; text-align: center;">`+(e.rfGeneralSettings&&e.rfGeneralSettings.vat_valid&&""!==e.rfGeneralSettings.vat_valid?e.rfGeneralSettings.vat_valid:"VALID VAT NUMBER")+"</p>";t(a).insertAfter(".vat-validation")}else{e.RF.validVAT=!1;const a=`<p id="bss-vat-msg" style="color: ${i}; text-align: center;">`+(e.rfGeneralSettings&&e.rfGeneralSettings.vat_not_valid&&""!==e.rfGeneralSettings.vat_not_valid?e.rfGeneralSettings.vat_not_valid:"EU VAT is not valid. Please re-enter")+"</p>";t(a).insertAfter(".vat-validation")}else{e.RF.validVAT=!1;const r=`<p id="bss-vat-msg" style="color: ${i}; text-align: center;">${a.message}</p>`;t(r).insertAfter(".vat-validation")}},error:function(a,r,n){e.RF.validVAT=!1;const o=`<p id="bss-vat-msg" style="color: ${i}; text-align: center;">${result.message}</p>`;t(o).insertAfter(".vat-validation")}})},e.RF.valiationABNField=function(r){t("#bss-abn-msg").remove(),t('<p id="bss-abn-msg" style="text-align: center">'+(e.rfGeneralSettings&&e.rfGeneralSettings.loadingForm&&""!==e.rfGeneralSettings.loadingForm?e.rfGeneralSettings.loadingForm:"Loading...")+"</p>").insertAfter("#abn-validation"),t.ajax({type:"POST",url:bssB2bApiServer+"/wholesaler/check-valid-abn",dataType:"JSON",data:{abn:r,domain:a.shop.permanent_domain},success:function(a){if(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-abn-msg").remove(),a.success){e.RF.validABN=!0;const r=`<p id="bss-abn-msg" style="color: ${n}; text-align: center;"><span id="bss-abn-status" style="background-color: ${a.status?"#43c358":"#b9b7b7"}"></span> ${a.status?"Active":"Cancelled"} -  `+a.name+"</p>";t("#company-field").length&&t("#company-field").val(a.name);let i=e.RF.formatABN(t("#abn-validation").val());t("#abn-validation").val(i),t(r).insertAfter(".abn-validation")}else{e.RF.validABN=!1;const r=`<p id="bss-abn-msg" style="color: ${i}; text-align: center;">${a.message}</p>`;t(r).insertAfter(".abn-validation")}},error:function(a,r,n){e.RF.validABN=!1;const o=`<p id="bss-abn-msg" style="color: ${i}; text-align: center;">${result.message}</p>`;t(o).insertAfter(".abn-validation")}})},e.RF.getRequireField=function(a){t(a).find(".formbuilder-required").map((a,r)=>{let i=t(r).parent().parent().attr("class").split(" "),n=i[2].replace("field-","");"field-vat-validation"==i[2]&&(n="vat-validation"),""==t("#"+n).val()?e.RF.requireFields.push(n):t("#"+n).css("border",e.RF.oldBorderCSS)}),t(a).find('input[name="customer[password]"]').length&&""==t(a).find('input[name="customer[password]"]').val()?e.RF.requireFields.push(t(a).find('input[name="customer[password]"]').attr("id")):t(a).find('input[name="customer[password]"]').css("border",e.RF.oldBorderCSS),t(a).find('input[name="customer[email]"]').length&&""==t(a).find('input[name="customer[email]"]').val()?e.RF.requireFields.push(t(a).find('input[name="customer[email]"]').attr("id")):t(a).find('input[name="customer[email]"]').css("border",e.RF.oldBorderCSS),t(a).find('input[name="customer[first_name]"]').length&&""==t(a).find('input[name="customer[first_name]"]').val()?e.RF.requireFields.push(t(a).find('input[name="customer[first_name]"]').attr("id")):t(a).find('input[name="customer[first_name]"]').css("border",e.RF.oldBorderCSS),t(b).find('input[name="customer[password]"]').length&&""==t(b).find('input[name="customer[password]"]').val()?e.RF.requireFields.push(t(b).find('input[name="customer[password]"]').attr("id")):t(b).find('input[name="customer[password]"]').css("border",e.RF.oldBorderCSS),t(b).find('input[name="customer[email]"]').length&&""==t(b).find('input[name="customer[email]"]').val()?e.RF.requireFields.push(t(b).find('input[name="customer[email]"]').attr("id")):t(b).find('input[name="customer[email]"]').css("border",e.RF.oldBorderCSS),t(b).find('input[name="customer[first_name]"]').length&&""==t(b).find('input[name="customer[first_name]"]').val()?e.RF.requireFields.push(t(b).find('input[name="customer[first_name]"]').attr("id")):t(b).find('input[name="customer[first_name]"]').css("border",e.RF.oldBorderCSS)},e.RF.checkRequireField=function(t,a,r,i){e.RF.errField=i;let n=r;return a.map(e=>{t.map(t=>{e.name.includes(t)&&""==e.value&&(n=!1)})}),n},e.RF.getAllCheckBoxField=function(){let e=[];return t(".bss-b2b-registration-form-render").each((function(){t(this).find(":input").map((a,r)=>{if(t(r).attr("id").includes("checkbox-group")){let a=t(r).attr("id").split("-").splice(0,3).join("-");e.includes(a)||e.push(a)}})})),e},e.RF.checkValidEmailField=function(a,r,i){e.RF.errField=r;let n=a;return t(".bss-b2b-registration-form-render").each((function(){t(this).find(':input[type="email"]').map((a,r)=>{i.includes(t(r).attr("id"))?(t(r).val().includes("@")||(e.RF.errField="input#"+t(r).attr("id"),e.RF.errMsg=e.rfGeneralSettings&&e.rfGeneralSettings.email_format&&""!==e.rfGeneralSettings.email_format?e.rfGeneralSettings.email_format:"Must be email format",n=!1),""==t(r).val()&&(e.RF.errField="input#"+t(r).attr("id"),e.RF.errMsg=e.rfGeneralSettings&&e.rfGeneralSettings.email_format&&""!==e.rfGeneralSettings.required_field?e.rfGeneralSettings.required_field:"This field is required",n=!1)):t(r).val().includes("@")||""===t(r).val()||(e.RF.errField="input#"+t(r).attr("id"),e.RF.errMsg=e.rfGeneralSettings&&e.rfGeneralSettings.email_format&&""!==e.rfGeneralSettings.email_format?e.rfGeneralSettings.email_format:"Must be email format",n=!1)})})),n},e.RF.getAllFileValue=function(e){let a=t(e).find("input[type='file']"),r=[],i=null;return a.length&&a.map((t,e)=>{if(e.files.length){for(var a=0;a<e.files.length;a++)e.files[a].size>10485760&&(i=`The following file couldnâ€™t be uploaded: ${e.files[a].name} is more than 10mb`),-1==["text/csv","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/gif","image/jpeg","image/png","application/pdf","audio/wav","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","video/mp4","text/plain","application/x-zip-compressed"].indexOf(e.files[a].type)&&(i=`The following file couldnâ€™t be uploaded: ${e.files[a].name} is not supported`);r.push({id:e.id,file:e.files})}}),i?{fail:!0,error:i}:r},e.RF.getAllFieldValue=function(t,a){e.RF.needScroll=!1;let r=[],i=new Map;a.map((t,e)=>{i.set(t+"[]","")});for(var n=0;n<t.length;n++)if(t[n].name.includes("password")){if(3==e.created_account||1==e.created_account?(e.RF.data.wholesaler.password=t[n].value,r.push({name:"password",value:t[n].value})):r.push({name:"password",value:null}),null==t[n].value||""==t[n].value){e.RF.isValidate=!1,e.RF.errField='input[name="customer[password]"]',e.RF.errMsg=e.rfGeneralSettings&&e.rfGeneralSettings.required_field&&""!==e.rfGeneralSettings.required_field?e.rfGeneralSettings.required_field:"This field is required",e.RF.needScroll=!0;break}}else if(t[n].name.includes("last_name"))r.push({name:"last_name",value:t[n].value}),e.RF.data.wholesaler.last_name=t[n].value;else if(t[n].name.includes("email")){if(r.push({name:"email",value:t[n].value.trim()}),e.RF.data.wholesaler.email=t[n].value.trim(),null==t[n].value||""==t[n].value){e.RF.isValidate=!1,e.RF.errField='input[name="customer[email]"]',e.RF.errMsg=e.rfGeneralSettings&&e.rfGeneralSettings.required_field&&""!==e.rfGeneralSettings.required_field?e.rfGeneralSettings.required_field:"This field is required",e.RF.needScroll=!0;break}t[n].value.includes("@")||(e.RF.isValidate=!1,e.RF.errField='input[name="customer[email]"]',e.RF.errMsg="Must be email format")}else if(t[n].name.includes("first_name")){if(r.push({name:"first_name",value:t[n].value}),e.RF.data.wholesaler.first_name=t[n].value,null==t[n].value||""==t[n].value){e.RF.isValidate=!1,e.RF.errField='input[name="customer[first_name]"]',e.RF.errMsg=e.rfGeneralSettings&&e.rfGeneralSettings.required_field&&""!==e.rfGeneralSettings.required_field?e.rfGeneralSettings.required_field:"This field is required",e.RF.needScroll=!0;break}}else if(!t[n].name.includes("utf8")&&!t[n].name.includes("form_type"))if(t[n].name.includes("checkbox-group")){let e="";e=""!==i.get(t[n].name)?i.get(t[n].name)+","+t[n].value:t[n].value,i.set(t[n].name,e)}else r.push(t[n]);return i.forEach((t,e)=>{r.push({name:e,value:t})}),r},e.RF.getPhoneFieldValue=function(){let e=t("#phone-field");if(e.length)return e[0].value},e.RF.getCompanyFieldValue=function(){let e=t("#company-field");if(e.length)return e[0].value},e.RF.checkValidABN=function(a){return a?(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-abn-msg").remove(),t('label[for="abn-validation"]').after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.abn_not_valid?e.rfGeneralSettings.abn_not_valid:"ABN is not valid. Please re-enter")+"</span>"),t('input[name="abn-validation"]').css("border","solid 1px "+i),t([document.documentElement,document.body]).animate({scrollTop:t('label[for="abn-validation"]').offset().top-5},600),!1):!(t(".abn-validation").length>0&&""!==t(".abn-validation").val())||(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-abn-msg").remove(),t('label[for="abn-validation"]').after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.abn_not_valid?e.rfGeneralSettings.abn_not_valid:"ABN is not valid. Please re-enter")+"</span>"),t('input[name="abn-validation"]').css("border","solid 1px "+i),t([document.documentElement,document.body]).animate({scrollTop:t('label[for="abn-validation"]').offset().top-5},600),!1)},e.RF.renderReCAPCHA=function(){const a=e.CAPCHA_SITE_KEY;let r=t(p).find("[type=submit]");if(r.length){t(r).before(`<div class="g-recaptcha" data-sitekey="${a}" data-callback="correctCaptcha"></div>`);n="https://www.google.com/recaptcha/api.js",o=function(){t(r).on("click",(function(a){var r="";t(this).closest("#create_customer").find('[type="submit"]').length&&(r=t(this).closest("#create_customer").find('[type="submit"]'),p=t(this).closest("#create_customer")),a.preventDefault();const n=t(p).find("[name=g-recaptcha-response]").val();t("form").attr("action"),t(".reCAPCHA-err").remove(),t.ajax({type:"POST",url:bssB2bApiServer+"/recapcha/verify",dataType:"JSON",data:{"g-recaptcha-response":n},success:function(a){if(a.success)t(".reCAPCHA-err").remove(),t(r).submit();else{const a=`<p class="reCAPCHA-err" style="color: ${i}; text-align: center; margin-bottom: 10px;">${e.rfGeneralSettings&&e.rfGeneralSettings.complete_reCapcha_task&&""!==e.rfGeneralSettings.complete_reCapcha_task?e.rfGeneralSettings.complete_reCapcha_task:"Please complete reCAPCHA task"}</p>`;t(r).before(a)}t(".bss-loading-msg").remove()},error:function(e,a,n){t("form").attr("action");const o=`<p class="reCAPCHA-err" style="color: ${i}; text-align: center; margin-bottom: 10px;">Something went wrong with reCAPTCHA task</p>`;t(r).before(o)}})})),window.correctCaptcha=function(e){e.length&&t(".reCAPCHA-err").remove()}},(s=document.createElement("script")).type="text/javascript",s.readyState?s.onreadystatechange=function(){"loaded"!=s.readyState&&"complete"!=s.readyState||(s.onreadystatechange=null,o())}:s.onload=function(){o()},s.src=n,document.getElementsByTagName("head")[0].appendChild(s)}var n,o,s},e.RF.submitForm=function(r,o,s){var c=null;c=t(r).closest("#header-register-panel, .popover__panel--sliding").length||"create_customer"==t(r).id||e.formId?e.formIdDef:e.formId,t(r).submit((async function(l){if(l.preventDefault(),s){t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('form[action*="/account"]').prepend('<p class="bss-error-msg bss-loading-msg" style="text-align: center;">'+(e.rfGeneralSettings&&e.rfGeneralSettings.loadingForm&&""!==e.rfGeneralSettings.loadingForm?e.rfGeneralSettings.loadingForm:"Loading...")+"</p>"),2!==e.created_account&&l.preventDefault();let s=!0;e.RF.isValidate=!0,e.RF.errMsg="",e.RF.data={domain:a.shop.permanent_domain,formId:c,wholesaler:{email:null,first_name:null,last_name:null,custom_field:[],raw_form_data:JSON.stringify(o),edited_form_data:JSON.stringify(o),status:1!==e.created_account?0:1}};let d=t(r).serializeArray(),u=e.RF.getAllCheckBoxField(),p=e.RF.getAllFieldValue(d,u),b=e.RF.getAllFileValue(r);if(b.fail)return t(".bss-loading-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="text-align: center; color: ${i}">`+b.error+"</p>"),void t([document.documentElement,document.body]).animate({scrollTop:t('form[action*="/account"]').offset().top-15},600);if(b.length){let r=new FormData;r.append("storeId",e.storeId),b.map(async t=>{t.file.length&&r.append("file",t.file[0])});let o=await fetch(bssB2bApiServer+"/upload_file/",{method:"POST",body:r}),c=await o.json();if(c.success){b.map(t=>{t.file.length&&c.files.map(e=>{e.originalname==t.file[0].name&&p.push({name:t.id,value:e.path})})});let r=!1,o=!1;e.RF.requireFields.map((t,e)=>{t.includes("vat-validation")&&(r=!0),t.includes("abn-validation")&&(o=!0)}),s=e.RF.checkRequireField(e.RF.requireFields,p,e.RF.isValidate,e.RF.errField);let l=[];if(t(".bss-b2b-registration-form-render").each((function(){t(this).find(':input[type="email"]').map((a,r)=>{e.RF.requireFields.includes(t(r).attr("id"))&&l.push(t(r).attr("id"))})})),s=e.RF.checkValidEmailField(s,e.RF.errField,l),!e.RF.validVAT){if(e.reCAPCHA&&grecaptcha.reset(),t(".bss-loading-msg").remove(),r)return t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('label[for="vat-validation"]').after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.vat_not_valid&&""!==e.rfGeneralSettings.vat_not_valid?e.rfGeneralSettings.vat_not_valid:"EU VAT is not valid. Please re-enter")+"</span>"),t('input[name="vat-validation"]').css("border","solid 1px "+i),void t([document.documentElement,document.body]).animate({scrollTop:t('label[for="vat-validation"]').offset().top-5},600);if(t(".vat-validation").length>0&&""!==t(".vat-validation").val())return t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('label[for="vat-validation"]').after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.vat_not_valid&&""!==e.rfGeneralSettings.vat_not_valid?e.rfGeneralSettings.vat_not_valid:"EU VAT is not valid. Please re-enter")+"</span>"),t('input[name="vat-validation"]').css("border","solid 1px "+i),void t([document.documentElement,document.body]).animate({scrollTop:t('label[for="vat-validation"]').offset().top-5},600)}if(!e.RF.validABN){if(e.reCAPCHA&&grecaptcha.reset(),t(".bss-loading-msg").remove(),!e.RF.checkValidABN(o))return}if(e.RF.data.wholesaler.custom_field=JSON.stringify(p),s){t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('form[action*="/account"]').prepend('<p class="bss-error-msg bss-loading-msg" style="text-align: center;">'+(e.rfGeneralSettings&&e.rfGeneralSettings.loadingForm&&""!==e.rfGeneralSettings.loadingForm?e.rfGeneralSettings.loadingForm:"Loading...")+"</p>"),t([document.documentElement,document.body]).animate({scrollTop:t('form[action*="/account"]').offset().top-15},600);let r=new Map;e.formDataRender.map(t=>{"email"!==t.name&&"password"!==t.name&&"first_name"!==t.name&&"last_name"!==t.name&&r.set(t.name,t.label?t.label.replace(new RegExp("&nbsp;","g"),""):"")});let o=`---${(new Date).toJSON().slice(0,10).replace(/-/g,"/")}--- \n`,s="";JSON.parse(e.RF.data.wholesaler.custom_field).map(t=>{null!==r.get(t.name.replace("[]",""))&&void 0!==r.get(t.name.replace("[]",""))&&t.value&&(""!==r.get(t.name.replace("[]",""))?(t.name.includes("file-")&&(s+=`${r.get(t.name.replace("[]",""))}: <a href="${bssB2bApiServer}/upload_file/download_customer_file_from_url?filePath=${t.value}" target="_blank">${t.value}</a> \n`),o+=`${r.get(t.name.replace("[]",""))}: ${t.value} \n`):(t.name.includes("file-")&&(s+=`<a href="${bssB2bApiServer}/upload_file/download_customer_file_from_url?filePath=${t.value}" target="_blank">${t.value}</a> \n`),o+=t.value+" \n"))}),e.RF.data.wholesaler.note=o,e.RF.data.wholesaler.fileUploadNote=s,e.RF.data.wholesaler.tax_exempt=e.taxExempt,e.RF.data.wholesaler.phone=e.RF.getPhoneFieldValue(),e.RF.data.wholesaler.company=e.RF.getCompanyFieldValue(),t.ajax({type:"POST",url:bssB2bApiServer+(1!==e.created_account?"/wholesaler/create-wholesaler-on-b2b":"/wholesaler/create-wholesaler-on-both"),dataType:"JSON",data:e.RF.data,success:function(r){r.success?(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${n}; text-align: center;">`+(e.rfGeneralSettings&&e.rfGeneralSettings.form_success_notification&&""!==e.rfGeneralSettings.form_success_notification?e.rfGeneralSettings.form_success_notification:r.message)+"</p>"),1==e.created_account?(window.localStorage.setItem("bssEmail",e.RF.data.wholesaler.email),window.localStorage.setItem("bssPassword",e.RF.data.wholesaler.password),window.location.href=a.shop.url+"/account/login?return_url="+encodeURI(e.redirect_url)+"&&isBssLogin=true"):1023==e.storeId&&3==e.created_account?window.location.href="https://miamata.it/"+e.redirect_url:window.location.href=a.shop.url+e.redirect_url):(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${i}; text-align: center;">`+r.message+"</p>"))},error:function(e,a,r){console.log(r),t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${i}; text-align: center;">${r}</p>`)}})}else t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),e.RF.errField.includes("input")?t(e.RF.errField).after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto; margin-bottom: 15px;"> ${e.RF.errMsg} </span>`):t(e.RF.errField).after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto; margin-bottom: 15px;">`+(e.rfGeneralSettings&&e.rfGeneralSettings.required_field&&""!==e.rfGeneralSettings.required_field?e.rfGeneralSettings.required_field:"This field is require")+"</span>"),t([document.documentElement,document.body]).animate({scrollTop:t(e.RF.errField).offset().top-12},600)}else t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${i}; text-align: center;">${c.msg}</p>`),t([document.documentElement,document.body]).animate({scrollTop:t(e.RF.errField).offset().top-12},600)}else{let r=!1,o=!1;e.RF.requireFields.map((t,e)=>{t.includes("vat-validation")&&(r=!0),t.includes("abn-validation")&&(o=!0)}),s=e.RF.checkRequireField(e.RF.requireFields,p,e.RF.isValidate,e.RF.errField);let c=[];if(t(".bss-b2b-registration-form-render").each((function(){t(this).find(':input[type="email"]').map((a,r)=>{e.RF.requireFields.includes(t(r).attr("id"))&&c.push(t(r).attr("id"))})})),s=e.RF.checkValidEmailField(s,e.RF.errField,c),!e.RF.validVAT){if(e.reCAPCHA&&grecaptcha.reset(),t(".bss-loading-msg").remove(),r)return t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('label[for="vat-validation"]').after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.vat_not_valid&&""!==e.rfGeneralSettings.vat_not_valid?e.rfGeneralSettings.vat_not_valid:"EU VAT is not valid. Please re-enter")+"</span>"),void t([document.documentElement,document.body]).animate({scrollTop:t('label[for="vat-validation"]').offset().top-5},600);if(t(".vat-validation").length>0&&""!==t(".vat-validation").val())return t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('label[for="vat-validation"]').after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.vat_not_valid&&""!==e.rfGeneralSettings.vat_not_valid?e.rfGeneralSettings.vat_not_valid:"EU VAT is not valid. Please re-enter")+"</span>"),void t([document.documentElement,document.body]).animate({scrollTop:t('label[for="vat-validation"]').offset().top-5},600)}if(!e.RF.validABN){if(e.reCAPCHA&&grecaptcha.reset(),t(".bss-loading-msg").remove(),!e.RF.checkValidABN(o))return}if(e.RF.data.wholesaler.custom_field=JSON.stringify(p),s){t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('form[action*="/account"]').prepend('<p class="bss-error-msg bss-loading-msg" style="text-align: center;">'+(e.rfGeneralSettings&&e.rfGeneralSettings.loadingForm&&""!==e.rfGeneralSettings.loadingForm?e.rfGeneralSettings.loadingForm:"Loading...")+"</p>"),t([document.documentElement,document.body]).animate({scrollTop:t('form[action*="/account"]').offset().top-15},600);let r=new Map;e.formDataRender.map(t=>{"email"!==t.name&&"password"!==t.name&&"first_name"!==t.name&&"last_name"!==t.name&&r.set(t.name,t.label?t.label.replace(new RegExp("&nbsp;","g"),""):"")});let o=`---${(new Date).toJSON().slice(0,10).replace(/-/g,"/")}--- \n`,s="";JSON.parse(e.RF.data.wholesaler.custom_field).map(t=>{null!==r.get(t.name.replace("[]",""))&&void 0!==r.get(t.name.replace("[]",""))&&t.value&&(""!==r.get(t.name.replace("[]",""))?(t.name.includes("file-")&&(s+=`${r.get(t.name.replace("[]",""))}: <a href="${bssB2bApiServer}/upload_file/download_customer_file_from_url?filePath=${t.value}" target="_blank">${t.value}</a> \n`),o+=`${r.get(t.name.replace("[]",""))}: ${t.value} \n`):(t.name.includes("file-")&&(s+=`<a href="${bssB2bApiServer}/upload_file/download_customer_file_from_url?filePath=${t.value}" target="_blank">${t.value}</a> \n`),o+=t.value+" \n"))}),e.RF.data.wholesaler.note=o,e.RF.data.wholesaler.fileUploadNote=s,e.RF.data.wholesaler.tax_exempt=e.taxExempt,e.RF.data.wholesaler.phone=e.RF.getPhoneFieldValue(),e.RF.data.wholesaler.company=e.RF.getCompanyFieldValue(),t.ajax({type:"POST",url:bssB2bApiServer+(1!==e.created_account?"/wholesaler/create-wholesaler-on-b2b":"/wholesaler/create-wholesaler-on-both"),dataType:"JSON",data:e.RF.data,success:function(r){r.success?(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${n}; text-align: center;">`+(e.rfGeneralSettings&&e.rfGeneralSettings.form_success_notification&&""!==e.rfGeneralSettings.form_success_notification?e.rfGeneralSettings.form_success_notification:r.message)+"</p>"),1==e.created_account?(window.localStorage.setItem("bssEmail",e.RF.data.wholesaler.email),window.localStorage.setItem("bssPassword",e.RF.data.wholesaler.password),window.location.href=a.shop.url+"/account/login?return_url="+encodeURI(e.redirect_url)+"&&isBssLogin=true"):1023==e.storeId&&3==e.created_account?window.location.href="https://miamata.it/"+e.redirect_url:window.location.href=a.shop.url+e.redirect_url):(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${i}; text-align: center;">`+r.message+"</p>"))},error:function(e,a,r){console.log(r),t(".bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${i}; text-align: center;">${r}</p>`)}})}else t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),e.RF.errField.includes("input")?t(e.RF.errField).after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto"> ${e.RF.errMsg} </span>`):t(e.RF.errField).after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.required_field&&""!==e.rfGeneralSettings.required_field?e.rfGeneralSettings.required_field:"This field is require")+"</span>"),t([document.documentElement,document.body]).animate({scrollTop:t(e.RF.errField).offset().top-12},600)}}}))},e.RF.handleSubmitFormDefault=function(r,n){let o=!0;var s=null;t(r).find('[type="submit"]').click((function(){var r=0;r=e.RF.errField?t(e.RF.errField).position().top:0,t(this).closest("#header-register-panel").animate({scrollTop:r},600),s=t(this).closest('form[action*="/account"]'),t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('form[action*="/account"]').prepend('<p class="bss-error-msg bss-loading-msg" style="text-align: center;">'+(e.rfGeneralSettings&&e.rfGeneralSettings.loadingForm&&""!==e.rfGeneralSettings.loadingForm?e.rfGeneralSettings.loadingForm:"Loading...")+"</p>"),e.RF.requireFields=[];let c=!0;e.RF.isValidate=!0,e.RF.errMsg="",n=n.length?n:e.formDataRenderDefault,e.RF.data={domain:a.shop.permanent_domain,formId:e.formId,wholesaler:{email:null,first_name:null,last_name:null,custom_field:[],raw_form_data:JSON.stringify(n),edited_form_data:JSON.stringify(n),status:1!==e.created_account?0:1}};let l=s.serializeArray(),d=e.RF.getAllCheckBoxField(),u=e.RF.getAllFieldValue(l,d);e.RF.getAllFileValue(s);e.RF.getRequireField(s);let p=!1,b=!1;e.RF.requireFields.map((t,e)=>{t.includes("vat-validation")&&(p=!0),t.includes("abn-validation")&&(b=!0)}),c=e.RF.checkRequireField(e.RF.requireFields,u,e.RF.isValidate,e.RF.errField);let m=[];if(t(".bss-b2b-registration-form-render").each((function(){t(this).find('checkRequireField:input[type="email"]').map((a,r)=>{e.RF.requireFields.includes(t(r).attr("id"))&&m.push(t(r).attr("id"))})})),c=e.RF.checkValidEmailField(c,e.RF.errField,m),c)o=!0;else{e.reCAPCHA&&grecaptcha.reset(),t(".bss-loading-msg").remove();let a=[];e.RF.requireFields.map(r=>{-1==a.indexOf(r)&&(t(s).find("#"+r).after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto; margin-bottom: 15px;">`+(e.rfGeneralSettings&&e.rfGeneralSettings.required_field&&""!==e.rfGeneralSettings.required_field?e.rfGeneralSettings.required_field:"This field is require")+"</span>"),t(s).find("#"+r).css("border","solid 1px "+i),a.push(r),o=!1)}),e.RF.needScroll&&t([document.documentElement,document.body]).animate({scrollTop:t(e.RF.errField).position().top-50},600)}e.RF.submitForm(s,n,o)}))},r){if(c.length&&0!==_&&l.length&&(e.formDataRender||e.formDataRenderDefault)){var y=[];e.formDataRender?y=e.formDataRender:e.formDataRender=[];var v=e.formDataRenderDefault,C=[],k=[];if(y.map(t=>{"top"==t.placement?C.push(t):k.push(t)}),0==e.created_account){var F=t('form[action*="/account"]').not('form[action*="/account/login"]');t(F).find('input[type*="password"]').length&&t(F).find('input[type*="password"]').remove(),t(F).find('label[for="'+o+'"]').length&&t(F).find('label[for="'+o+'"]').remove(),t(F).find('label[for="register-customer[password]"]').length&&t(F).find('label[for="register-customer[password]"]').remove(),t(F).find('label[for="customer[password]"]').length&&t(F).find('label[for="customer[password]"]').remove(),t('form[action*="/account/login"]').find('label[for="login-customer[password]"]').length&&t('form[action*="/account/login"]').find('label[for="login-customer[password]"]').css("display","block")}if(t("#header-register-panel").length&&t("#header-register-panel").find(".bss-b2b-registration-form-render").length&&t("#header-register-panel").find(".bss-b2b-registration-form-render").formRender({formData:v,dataType:"json"}),2!==e.created_account){C.length&&t(l).formRender({formData:C,dataType:"json"});var w=t(c).closest("#main, .main-content, .main, main");k.length&&w.length&&t(w).find(c).formRender({formData:k,dataType:"json"});let a=500;1643==e.storeId&&(a=1e3),setTimeout((function(){e.RF.getRequireField(p)}),a)}e.RF.getVatValidationInput(),e.RF.getABNValidationInput(),2!==e.created_account&&e.RF.handleSubmitFormDefault(p,y),e.reCAPCHA&&e.RF.renderReCAPCHA()}if(d.length&&u.length&&0!==_&&e.formDataRender){y=e.formDataRender;var S=[],q=[];if(y.map(t=>{"top"==t.placement?S.push(t):q.push(t)}),0==e.created_account){var x=t('form[action*="/account"]').not('form[action*="/account/login"]');t(x).find('input[type*="password"]').length&&t(x).find('input[type*="password"]').remove(),t(x).find('label[for="'+o+'"]').length&&t(x).find('label[for="'+o+'"]').remove(),t(x).find('label[for="register-customer[password]"]').length&&t(x).find('label[for="register-customer[password]"]').remove(),t(x).find('label[for="customer[password]"]').length&&t(x).find('label[for="customer[password]"]').remove(),t('form[action*="/account/login"]').find('label[for="login-customer[password]"]').length&&t('form[action*="/account/login"]').find('label[for="login-customer[password]"]').css("display","block")}2!==e.created_account&&(S.length&&t(d).formRender({formData:S,dataType:"json"}),q.length&&t(u).formRender({formData:q,dataType:"json"}),setTimeout((function(){e.RF.getRequireField(p)}),500)),e.RF.getVatValidationInput(),e.RF.getABNValidationInput(),2!==e.created_account&&e.RF.handleSubmitFormDefault(b,y)}}else{var P=t('form[action*="/account"]').closest("#main, .main-content, .main, main");if(-1!==window.location.pathname.indexOf("/pages/")&&t(P).length){t(P).find(".bss-b2b-registration-form-render").length&&t(P).remove()}t(".bss-b2b-registration-form-render").length&&t(".bss-b2b-registration-form-render").remove()}}(t,BSS_B2B,n,r)):(console.log("init registration form"),function(t,e,a,r){const i=e.rfGeneralSettings.text_color_failed,n=e.rfGeneralSettings.text_color_success;e.RF={},e.RF.data={},e.RF.getVatInputNumber=0,e.RF.getABNInputNumber=0,e.RF.requireFields=[],e.RF.errMsg="",e.RF.errField=null,e.RF.isValidate=!0,e.RF.validVAT=!1,e.RF.validABN=!1,e.RF.oldBorderCSS=t("input").css("border"),e.RF.needScroll=!1;let o="";if("/account/login"==window.location.pathname){if("true"==new URL(window.location.href).searchParams.get("isBssLogin")&&(t("form[action='/account/login'] input[type='email']").val(window.localStorage.getItem("bssEmail")),t("form[action='/account/login'] input[type='password']").val(window.localStorage.getItem("bssPassword")),t("form[action='/account/login'] input[type='submit']").off(),t("form[action='/account/login'] input[type='submit']").click(),window.localStorage.removeItem("bssEmail"),window.localStorage.removeItem("bssPassword")),596==e.storeId){let e=t("#create-customer form");t(e).removeAttr("novalidate");let a=t(e).find('input[type*="password"]');a.length&&(o=t(a[0]).attr("id"),t(a[0]).parent().hasClass("field")?t(a[0]).parent().after('<div id="bss-b2b-registration-form-render"></div>'):t(a[0]).after('<div id="bss-b2b-registration-form-render"></div>'))}}else if(window.location.pathname.includes("/account/register")){let a=t("[bss-b2b-is-email-field]").closest("form");596==e.storeId&&(a=t("[bss-b2b-is-email-field]").closest("#customer-wrapper").find("#create-customer form")),t(a).removeAttr("novalidate"),t(a).prepend('<div id="bss-b2b-registration-form-top"></div>');let r=t(a).find('input[type*="password"]');r.length&&0!==e.created_account?(o=t(r[0]).attr("id"),t(r[0]).parent().hasClass("field")?t(r[0]).parent().after('<div id="bss-b2b-registration-form-render"></div>'):t(r[0]).after('<div id="bss-b2b-registration-form-render"></div>')):t("[bss-b2b-is-email-field]").length&&t("[bss-b2b-is-email-field]").after('<div id="bss-b2b-registration-form-render"></div>')}else if(596==e.storeId){let e=t("#create-customer form");t(e).removeAttr("novalidate");let a=t(e).find('input[type*="password"]');a.length&&(o=t(a[0]).attr("id"),t(a[0]).parent().hasClass("field")?t(a[0]).parent().after('<div id="bss-b2b-registration-form-render"></div>'):t(a[0]).after('<div id="bss-b2b-registration-form-render"></div>'))}let s=t("#bss-b2b-registration-form-render"),c=t("#bss-b2b-registration-form-top"),l=t("#bss-b2b-registration-form-render-top-header"),d=t("#bss-b2b-registration-form-render-bottom-header"),u=t("#bss-b2b-registration-form-render").closest("form"),p=t("#bss-b2b-registration-form-render-bottom-header").closest("form"),b=(setInterval((function(){t(u).removeAttr("onsubmit")}),2e3),setInterval((function(){t(p).removeAttr("onsubmit")}),2e3),e.status);if(e.RF.formatABN=function(t){let e=t.replace(/\s/g,"").split("");return 11==e.length&&(e[1]=e[1]+" ",e[4]=e[4]+" ",e[7]=e[7]+" "),e.join("")},e.RF.getVatValidationInput=function(){e.RF.getVatInputNumber=e.RF.getVatInputNumber+1,3!=e.RF.getVatInputNumber&&(t("#vat-validation").length?t("#vat-validation").change((function(){e.RF.valiationVatField(t("#vat-validation").val())})):setTimeout(()=>{e.RF.getVatValidationInput()},1e3))},e.RF.getABNValidationInput=function(){if(e.RF.getABNInputNumber=e.RF.getABNInputNumber+1,3!=e.RF.getABNInputNumber)if(t("#abn-validation").length){let a=t("#company-field");a.length&&a.attr("disabled",!0),t("#abn-validation").change((function(){e.RF.valiationABNField(t("#abn-validation").val())}))}else setTimeout(()=>{e.RF.getABNValidationInput()},1e3)},e.RF.valiationVatField=function(r){t("#bss-vat-msg").remove(),t('<p id="bss-vat-msg" style="text-align: center">'+(e.rfGeneralSettings&&e.rfGeneralSettings.loadingForm&&""!==e.rfGeneralSettings.loadingForm?e.rfGeneralSettings.loadingForm:"Loading...")+"</p>").insertAfter("#vat-validation");let o=r.substring(0,2),s=r.substring(2,r.length);t.ajax({type:"POST",url:bssB2bApiServer+"/wholesaler/check-valid-vat",dataType:"JSON",data:{countryCode:o,vatNumber:s,domain:a.shop.permanent_domain},success:function(a){if(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),a.success)if("true"==a.message.valid[0]){e.RF.validVAT=!0;const a=`<p id="bss-vat-msg" style="color: ${n}; text-align: center;">`+(e.rfGeneralSettings&&e.rfGeneralSettings.vat_valid&&""!==e.rfGeneralSettings.vat_valid?e.rfGeneralSettings.vat_valid:"VALID VAT NUMBER")+"</p>";t(a).insertAfter("#vat-validation")}else{e.RF.validVAT=!1;const a=`<p id="bss-vat-msg" style="color: ${i}; text-align: center;">`+(e.rfGeneralSettings&&e.rfGeneralSettings.vat_not_valid&&""!==e.rfGeneralSettings.vat_not_valid?e.rfGeneralSettings.vat_not_valid:"EU VAT is not valid. Please re-enter")+"</p>";t(a).insertAfter("#vat-validation")}else{e.RF.validVAT=!1;const r=`<p id="bss-vat-msg" style="color: ${i}; text-align: center;">${a.message}</p>`;t(r).insertAfter("#vat-validation")}},error:function(a,r,n){e.RF.validVAT=!1;const o=`<p id="bss-vat-msg" style="color: ${i}; text-align: center;">${result.message}</p>`;t(o).insertAfter("#vat-validation")}})},e.RF.valiationABNField=function(r){t("#bss-abn-msg").remove(),t('<p id="bss-abn-msg" style="text-align: center">'+(e.rfGeneralSettings&&e.rfGeneralSettings.loadingForm&&""!==e.rfGeneralSettings.loadingForm?e.rfGeneralSettings.loadingForm:"Loading...")+"</p>").insertAfter("#abn-validation"),t.ajax({type:"POST",url:bssB2bApiServer+"/wholesaler/check-valid-abn",dataType:"JSON",data:{abn:r,domain:a.shop.permanent_domain},success:function(a){if(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-abn-msg").remove(),a.success){e.RF.validABN=!0;const r=`<p id="bss-abn-msg" style="color: ${n}; text-align: center;"><span id="bss-abn-status" style="background-color: ${a.status?"#43c358":"#b9b7b7"}"></span> ${a.status?"Active":"Cancelled"} -  `+a.name+"</p>";t("#company-field").length&&t("#company-field").val(a.name);let i=e.RF.formatABN(t("#abn-validation").val());t("#abn-validation").val(i),t(r).insertAfter("#abn-validation")}else{e.RF.validABN=!1;const r=`<p id="bss-abn-msg" style="color: ${i}; text-align: center;">${a.message}</p>`;t(r).insertAfter("#abn-validation")}},error:function(a,r,n){e.RF.validABN=!1;const o=`<p id="bss-abn-msg" style="color: ${i}; text-align: center;">${result.message}</p>`;t(o).insertAfter("#abn-validation")}})},e.RF.getRequireField=function(){t(".formbuilder-required").map((a,r)=>{let i=t(r).parent().parent().attr("class").split(" "),n=i[2].replace("field-","");"field-vat-validation"==i[2]&&(n="vat-validation"),""==t("#"+n).val()?e.RF.requireFields.push(n):t("#"+n).css("border",e.RF.oldBorderCSS)}),t(u).find('input[name="customer[password]"]').length&&""==t(u).find('input[name="customer[password]"]').val()?e.RF.requireFields.push(t(u).find('input[name="customer[password]"]').attr("id")):t(u).find('input[name="customer[password]"]').css("border",e.RF.oldBorderCSS),t(u).find('input[name="customer[email]"]').length&&""==t(u).find('input[name="customer[email]"]').val()?e.RF.requireFields.push(t(u).find('input[name="customer[email]"]').attr("id")):t(u).find('input[name="customer[email]"]').css("border",e.RF.oldBorderCSS),t(u).find('input[name="customer[first_name]"]').length&&""==t(u).find('input[name="customer[first_name]"]').val()?e.RF.requireFields.push(t(u).find('input[name="customer[first_name]"]').attr("id")):t(u).find('input[name="customer[first_name]"]').css("border",e.RF.oldBorderCSS),t(p).find('input[name="customer[password]"]').length&&""==t(p).find('input[name="customer[password]"]').val()?e.RF.requireFields.push(t(p).find('input[name="customer[password]"]').attr("id")):t(p).find('input[name="customer[password]"]').css("border",e.RF.oldBorderCSS),t(p).find('input[name="customer[email]"]').length&&""==t(p).find('input[name="customer[email]"]').val()?e.RF.requireFields.push(t(p).find('input[name="customer[email]"]').attr("id")):t(p).find('input[name="customer[email]"]').css("border",e.RF.oldBorderCSS),t(p).find('input[name="customer[first_name]"]').length&&""==t(p).find('input[name="customer[first_name]"]').val()?e.RF.requireFields.push(t(p).find('input[name="customer[first_name]"]').attr("id")):t(p).find('input[name="customer[first_name]"]').css("border",e.RF.oldBorderCSS)},e.RF.checkRequireField=function(t,a,r,i){e.RF.errField=i;let n=r;return a.map(e=>{t.map(t=>{e.name.includes(t)&&""==e.value&&(n=!1)})}),n},e.RF.getAllCheckBoxField=function(){let e=[];return t("#bss-b2b-registration-form-render").each((function(){t(this).find(":input").map((a,r)=>{if(t(r).attr("id").includes("checkbox-group")){let a=t(r).attr("id").split("-").splice(0,3).join("-");e.includes(a)||e.push(a)}})})),e},e.RF.checkValidEmailField=function(a,r,i){e.RF.errField=r;let n=a;return t("#bss-b2b-registration-form-render").each((function(){t(this).find(':input[type="email"]').map((a,r)=>{i.includes(t(r).attr("id"))?(t(r).val().includes("@")||(e.RF.errField="input#"+t(r).attr("id"),e.RF.errMsg=e.rfGeneralSettings&&e.rfGeneralSettings.email_format&&""!==e.rfGeneralSettings.email_format?e.rfGeneralSettings.email_format:"Must be email format",n=!1),""==t(r).val()&&(e.RF.errField="input#"+t(r).attr("id"),e.RF.errMsg=e.rfGeneralSettings&&e.rfGeneralSettings.email_format&&""!==e.rfGeneralSettings.required_field?e.rfGeneralSettings.required_field:"This field is required",n=!1)):t(r).val().includes("@")||""===t(r).val()||(e.RF.errField="input#"+t(r).attr("id"),e.RF.errMsg=e.rfGeneralSettings&&e.rfGeneralSettings.email_format&&""!==e.rfGeneralSettings.email_format?e.rfGeneralSettings.email_format:"Must be email format",n=!1)})})),n},e.RF.getAllFileValue=function(e){let a=t(e).find("input[type='file']"),r=[],i=null;return a.length&&a.map((t,e)=>{if(e.files.length){for(var a=0;a<e.files.length;a++)e.files[a].size>10485760&&(i=`The following file couldnâ€™t be uploaded: ${e.files[a].name} is more than 10mb`),-1==["text/csv","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/gif","image/jpeg","image/png","application/pdf","audio/wav","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","video/mp4","text/plain","application/x-zip-compressed"].indexOf(e.files[a].type)&&(i=`The following file couldnâ€™t be uploaded: ${e.files[a].name} is not supported`);r.push({id:e.id,file:e.files})}}),i?{fail:!0,error:i}:r},e.RF.getAllFieldValue=function(t,a){e.RF.needScroll=!1;let r=[],i=new Map;a.map((t,e)=>{i.set(t+"[]","")});for(var n=0;n<t.length;n++)if(t[n].name.includes("password")){if(3==e.created_account||1==e.created_account?(e.RF.data.wholesaler.password=t[n].value,r.push({name:"password",value:t[n].value})):r.push({name:"password",value:null}),null==t[n].value||""==t[n].value){e.RF.isValidate=!1,e.RF.errField='input[name="customer[password]"]',e.RF.errMsg=e.rfGeneralSettings&&e.rfGeneralSettings.required_field&&""!==e.rfGeneralSettings.required_field?e.rfGeneralSettings.required_field:"This field is required",e.RF.needScroll=!0;break}}else if(t[n].name.includes("last_name"))r.push({name:"last_name",value:t[n].value}),e.RF.data.wholesaler.last_name=t[n].value;else if(t[n].name.includes("email")){if(r.push({name:"email",value:t[n].value.trim()}),e.RF.data.wholesaler.email=t[n].value.trim(),null==t[n].value||""==t[n].value){e.RF.isValidate=!1,e.RF.errField='input[name="customer[email]"]',e.RF.errMsg=e.rfGeneralSettings&&e.rfGeneralSettings.required_field&&""!==e.rfGeneralSettings.required_field?e.rfGeneralSettings.required_field:"This field is required",e.RF.needScroll=!0;break}t[n].value.includes("@")||(e.RF.isValidate=!1,e.RF.errField='input[name="customer[email]"]',e.RF.errMsg="Must be email format")}else if(t[n].name.includes("first_name")){if(r.push({name:"first_name",value:t[n].value}),e.RF.data.wholesaler.first_name=t[n].value,null==t[n].value||""==t[n].value){e.RF.isValidate=!1,e.RF.errField='input[name="customer[first_name]"]',e.RF.errMsg=e.rfGeneralSettings&&e.rfGeneralSettings.required_field&&""!==e.rfGeneralSettings.required_field?e.rfGeneralSettings.required_field:"This field is required",e.RF.needScroll=!0;break}}else if(!t[n].name.includes("utf8")&&!t[n].name.includes("form_type"))if(t[n].name.includes("checkbox-group")){let e="";e=i.get(t[n].name)?i.get(t[n].name)+","+t[n].value:t[n].value,i.set(t[n].name,e)}else r.push(t[n]);return i.forEach((t,e)=>{r.push({name:e,value:t})}),r},e.RF.getPhoneFieldValue=function(){let e=t("#phone-field");if(e.length)return e[0].value},e.RF.getCompanyFieldValue=function(){let e=t("#company-field");if(e.length)return e[0].value},e.RF.renderReCAPCHA=function(){const a=e.CAPCHA_SITE_KEY;let r=t(u).find("[type=submit]");if(r.length){t(r).before(`<div class="g-recaptcha" data-sitekey="${a}" data-callback="correctCaptcha"></div>`);n="https://www.google.com/recaptcha/api.js",o=function(){t(r).on("click",(function(a){const n=e.storeId;a.preventDefault();const o=t("[name=g-recaptcha-response]").val();t("form").attr("action"),t(".reCAPCHA-err").remove(),t.ajax({type:"POST",url:bssB2bApiServer+"/recapcha/verify",dataType:"JSON",data:{"g-recaptcha-response":o,store_id:n},success:function(a){if(a.success)t(".reCAPCHA-err").remove(),t(r).submit();else{const a=`<p class="reCAPCHA-err" style="color: ${i}; text-align: center; margin-bottom: 10px;">${e.rfGeneralSettings&&e.rfGeneralSettings.complete_reCapcha_task&&""!==e.rfGeneralSettings.complete_reCapcha_task?e.rfGeneralSettings.complete_reCapcha_task:"Please complete reCAPCHA task"}</p>`;t(r).before(a)}t(".bss-loading-msg").remove()},error:function(e,a,n){t("form").attr("action");const o=`<p class="reCAPCHA-err" style="color: ${i}; text-align: center; margin-bottom: 10px;">Something went wrong with reCAPTCHA task</p>`;t(r).before(o)}})})),window.correctCaptcha=function(e){e.length&&t(".reCAPCHA-err").remove()}},(s=document.createElement("script")).type="text/javascript",s.readyState?s.onreadystatechange=function(){"loaded"!=s.readyState&&"complete"!=s.readyState||(s.onreadystatechange=null,o())}:s.onload=function(){o()},s.src=n,document.getElementsByTagName("head")[0].appendChild(s)}var n,o,s},e.RF.checkValidABN=function(a){return a?(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-abn-msg").remove(),t('label[for="abn-validation"]').after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.abn_not_valid?e.rfGeneralSettings.abn_not_valid:"ABN is not valid. Please re-enter")+"</span>"),t('input[name="abn-validation"]').css("border","solid 1px "+i),t([document.documentElement,document.body]).animate({scrollTop:t('label[for="abn-validation"]').offset().top-5},600),!1):!(t("#abn-validation").length>0&&""!==t("#abn-validation").val())||(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-abn-msg").remove(),t('label[for="abn-validation"]').after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.abn_not_valid?e.rfGeneralSettings.abn_not_valid:"ABN is not valid. Please re-enter")+"</span>"),t('input[name="abn-validation"]').css("border","solid 1px "+i),t([document.documentElement,document.body]).animate({scrollTop:t('label[for="abn-validation"]').offset().top-5},600),!1)},e.RF.handleSubmitFormDefault=function(r,o){t(r).submit((async function(s){s.preventDefault();{t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('form[action*="/account"]').prepend('<p class="bss-error-msg bss-loading-msg" style="text-align: center;">'+(e.rfGeneralSettings&&e.rfGeneralSettings.loadingForm&&""!==e.rfGeneralSettings.loadingForm?e.rfGeneralSettings.loadingForm:"Loading...")+"</p>"),2!==e.created_account&&s.preventDefault();let c=!0;e.RF.isValidate=!0,e.RF.errMsg="",e.RF.data={domain:a.shop.permanent_domain,formId:e.formId,wholesaler:{email:null,first_name:null,last_name:null,custom_field:[],raw_form_data:JSON.stringify(o),edited_form_data:JSON.stringify(o),status:1!==e.created_account?0:1}};let l=t(r).serializeArray(),d=e.RF.getAllCheckBoxField(),u=e.RF.getAllFieldValue(l,d),p=e.RF.getAllFileValue(r);if(p.fail)return t(".bss-loading-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="text-align: center; color: ${i}">`+p.error+"</p>"),void t([document.documentElement,document.body]).animate({scrollTop:t('form[action*="/account"]').offset().top-15},600);if(p.length){let r=new FormData;r.append("storeId",e.storeId),p.map(async t=>{t.file.length&&r.append("file",t.file[0])});let o=await fetch(bssB2bApiServer+"/upload_file/",{method:"POST",body:r}),s=await o.json();if(s.success){p.map(t=>{t.file.length&&s.files.map(e=>{e.originalname==t.file[0].name&&u.push({name:t.id,value:e.path})})});let r=!1,o=!1;e.RF.requireFields.map((t,e)=>{t.includes("vat-validation")&&(r=!0),t.includes("abn-validation")&&(o=!0)}),c=e.RF.checkRequireField(e.RF.requireFields,u,e.RF.isValidate,e.RF.errField);let l=[];if(t("#bss-b2b-registration-form-render").each((function(){t(this).find(':input[type="email"]').map((a,r)=>{e.RF.requireFields.includes(t(r).attr("id"))&&l.push(t(r).attr("id"))})})),c=e.RF.checkValidEmailField(c,e.RF.errField,l),!e.RF.validVAT){if(e.reCAPCHA&&grecaptcha.reset(),t(".bss-loading-msg").remove(),r)return t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('label[for="vat-validation"]').after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.vat_not_valid&&""!==e.rfGeneralSettings.vat_not_valid?e.rfGeneralSettings.vat_not_valid:"EU VAT is not valid. Please re-enter")+"</span>"),t('input[name="vat-validation"]').css("border","solid 1px "+i),void t([document.documentElement,document.body]).animate({scrollTop:t('label[for="vat-validation"]').offset().top-5},600);if(t("#vat-validation").length>0&&""!==t("#vat-validation").val())return t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('label[for="vat-validation"]').after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.vat_not_valid&&""!==e.rfGeneralSettings.vat_not_valid?e.rfGeneralSettings.vat_not_valid:"EU VAT is not valid. Please re-enter")+"</span>"),t('input[name="vat-validation"]').css("border","solid 1px "+i),void t([document.documentElement,document.body]).animate({scrollTop:t('label[for="vat-validation"]').offset().top-5},600)}if(!e.RF.validABN){if(e.reCAPCHA&&grecaptcha.reset(),t(".bss-loading-msg").remove(),!e.RF.checkValidABN(o))return}if(e.RF.data.wholesaler.custom_field=JSON.stringify(u),c){t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('form[action*="/account"]').prepend('<p class="bss-error-msg bss-loading-msg" style="text-align: center;">'+(e.rfGeneralSettings&&e.rfGeneralSettings.loadingForm&&""!==e.rfGeneralSettings.loadingForm?e.rfGeneralSettings.loadingForm:"Loading...")+"</p>"),t([document.documentElement,document.body]).animate({scrollTop:t('form[action*="/account"]').offset().top-15},600);let r=new Map;e.formDataRender.map(t=>{"email"!==t.name&&"password"!==t.name&&"first_name"!==t.name&&"last_name"!==t.name&&r.set(t.name,t.label?t.label.replace(new RegExp("&nbsp;","g"),""):"")});let o=`---${(new Date).toJSON().slice(0,10).replace(/-/g,"/")}--- \n`,s="";JSON.parse(e.RF.data.wholesaler.custom_field).map(t=>{null!==r.get(t.name.replace("[]",""))&&void 0!==r.get(t.name.replace("[]",""))&&t.value&&(""!==r.get(t.name.replace("[]",""))?(t.name.includes("file-")&&(s+=`${r.get(t.name.replace("[]",""))}: <a href="${bssB2bApiServer}/upload_file/download_customer_file_from_url?filePath=${t.value}" target="_blank">${t.value}</a> \n`),o+=`${r.get(t.name.replace("[]",""))}: ${t.value} \n`):(t.name.includes("file-")&&(s+=`<a href="${bssB2bApiServer}/upload_file/download_customer_file_from_url?filePath=${t.value}" target="_blank">${t.value}</a> \n`),o+=t.value+" \n"))}),e.RF.data.wholesaler.note=o,e.RF.data.wholesaler.fileUploadNote=s,e.RF.data.wholesaler.tax_exempt=e.taxExempt,e.RF.data.wholesaler.phone=e.RF.getPhoneFieldValue(),e.RF.data.wholesaler.company=e.RF.getCompanyFieldValue(),t.ajax({type:"POST",url:bssB2bApiServer+(1!==e.created_account?"/wholesaler/create-wholesaler-on-b2b":"/wholesaler/create-wholesaler-on-both"),dataType:"JSON",data:e.RF.data,success:function(r){r.success?(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${n}; text-align: center;">`+(e.rfGeneralSettings&&e.rfGeneralSettings.form_success_notification&&""!==e.rfGeneralSettings.form_success_notification?e.rfGeneralSettings.form_success_notification:r.message)+"</p>"),1==e.created_account?(window.localStorage.setItem("bssEmail",e.RF.data.wholesaler.email),window.localStorage.setItem("bssPassword",e.RF.data.wholesaler.password),window.location.href=a.shop.url+"/account/login?return_url="+encodeURI(e.redirect_url)+"&&isBssLogin=true"):1023==e.storeId&&3==e.created_account?window.location.href="https://miamata.it/"+e.redirect_url:window.location.href=a.shop.url+e.redirect_url):(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${i}; text-align: center;">`+r.message+"</p>"))},error:function(e,a,r){console.log(r),t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${i}; text-align: center;">${r}</p>`)}})}else t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),e.RF.errField.includes("input")?t(e.RF.errField).after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto; margin-bottom: 15px;"> ${e.RF.errMsg} </span>`):t(e.RF.errField).after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto; margin-bottom: 15px;">`+(e.rfGeneralSettings&&e.rfGeneralSettings.required_field&&""!==e.rfGeneralSettings.required_field?e.rfGeneralSettings.required_field:"This field is require")+"</span>"),t([document.documentElement,document.body]).animate({scrollTop:t(e.RF.errField).offset().top-12},600)}else t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${i}; text-align: center;">${s.msg}</p>`),t([document.documentElement,document.body]).animate({scrollTop:t(e.RF.errField).offset().top-12},600)}else{let r=!1,o=!1;e.RF.requireFields.map((t,e)=>{t.includes("vat-validation")&&(r=!0),t.includes("abn-validation")&&(o=!0)}),c=e.RF.checkRequireField(e.RF.requireFields,u,e.RF.isValidate,e.RF.errField);let s=[];if(t("#bss-b2b-registration-form-render").each((function(){t(this).find(':input[type="email"]').map((a,r)=>{e.RF.requireFields.includes(t(r).attr("id"))&&s.push(t(r).attr("id"))})})),c=e.RF.checkValidEmailField(c,e.RF.errField,s),!e.RF.validVAT){if(e.reCAPCHA&&grecaptcha.reset(),t(".bss-loading-msg").remove(),r)return t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('label[for="vat-validation"]').after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.vat_not_valid&&""!==e.rfGeneralSettings.vat_not_valid?e.rfGeneralSettings.vat_not_valid:"EU VAT is not valid. Please re-enter")+"</span>"),void t([document.documentElement,document.body]).animate({scrollTop:t('label[for="vat-validation"]').offset().top-5},600);if(t("#vat-validation").length>0&&""!==t("#vat-validation").val())return t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('label[for="vat-validation"]').after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.vat_not_valid&&""!==e.rfGeneralSettings.vat_not_valid?e.rfGeneralSettings.vat_not_valid:"EU VAT is not valid. Please re-enter")+"</span>"),void t([document.documentElement,document.body]).animate({scrollTop:t('label[for="vat-validation"]').offset().top-5},600)}if(!e.RF.validABN){if(e.reCAPCHA&&grecaptcha.reset(),t(".bss-loading-msg").remove(),!e.RF.checkValidABN(o))return}if(e.RF.data.wholesaler.custom_field=JSON.stringify(u),c){t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t("#bss-vat-msg").remove(),t('form[action*="/account"]').prepend('<p class="bss-error-msg bss-loading-msg" style="text-align: center;">'+(e.rfGeneralSettings&&e.rfGeneralSettings.loadingForm&&""!==e.rfGeneralSettings.loadingForm?e.rfGeneralSettings.loadingForm:"Loading...")+"</p>"),t([document.documentElement,document.body]).animate({scrollTop:t('form[action*="/account"]').offset().top-15},600);let r=new Map;e.formDataRender.map(t=>{"email"!==t.name&&"password"!==t.name&&"first_name"!==t.name&&"last_name"!==t.name&&r.set(t.name,t.label?t.label.replace(new RegExp("&nbsp;","g"),""):"")});let o=`---${(new Date).toJSON().slice(0,10).replace(/-/g,"/")}--- \n`,s="";JSON.parse(e.RF.data.wholesaler.custom_field).map(t=>{null!==r.get(t.name.replace("[]",""))&&void 0!==r.get(t.name.replace("[]",""))&&t.value&&(""!==r.get(t.name.replace("[]",""))?(t.name.includes("file-")&&(s+=`${r.get(t.name.replace("[]",""))}: <a href="${bssB2bApiServer}/upload_file/download_customer_file_from_url?filePath=${t.value}" target="_blank">${t.value}</a> \n`),o+=`${r.get(t.name.replace("[]",""))}: ${t.value} \n`):(t.name.includes("file-")&&(s+=`<a href="${bssB2bApiServer}/upload_file/download_customer_file_from_url?filePath=${t.value}" target="_blank">${t.value}</a> \n`),o+=t.value+" \n"))}),e.RF.data.wholesaler.note=o,e.RF.data.wholesaler.fileUploadNote=s,e.RF.data.wholesaler.tax_exempt=e.taxExempt,e.RF.data.wholesaler.phone=e.RF.getPhoneFieldValue(),e.RF.data.wholesaler.company=e.RF.getCompanyFieldValue(),t.ajax({type:"POST",url:bssB2bApiServer+(1!==e.created_account?"/wholesaler/create-wholesaler-on-b2b":"/wholesaler/create-wholesaler-on-both"),dataType:"JSON",data:e.RF.data,success:function(r){r.success?(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${n}; text-align: center;">`+(e.rfGeneralSettings&&e.rfGeneralSettings.form_success_notification&&""!==e.rfGeneralSettings.form_success_notification?e.rfGeneralSettings.form_success_notification:r.message)+"</p>"),1==e.created_account?(window.localStorage.setItem("bssEmail",e.RF.data.wholesaler.email),window.localStorage.setItem("bssPassword",e.RF.data.wholesaler.password),window.location.href=a.shop.url+"/account/login?return_url="+encodeURI(e.redirect_url)+"&&isBssLogin=true"):1023==e.storeId&&3==e.created_account?window.location.href="https://miamata.it/"+e.redirect_url:window.location.href=a.shop.url+e.redirect_url):(t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${i}; text-align: center;">`+r.message+"</p>"))},error:function(e,a,r){console.log(r),t(".bss-error-msg").remove(),t('form[action*="/account"]').prepend(`<p class="bss-error-msg" style="color: ${i}; text-align: center;">${r}</p>`)}})}else t(".bss-error-msg").remove(),t("#bss-error-msg").remove(),e.RF.errField.includes("input")?t(e.RF.errField).after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto"> ${e.RF.errMsg} </span>`):t(e.RF.errField).after(`<span class="bss-error-msg" style="color: ${i}; text-align: center;display: block; margin: auto">`+(e.rfGeneralSettings&&e.rfGeneralSettings.required_field&&""!==e.rfGeneralSettings.required_field?e.rfGeneralSettings.required_field:"This field is require")+"</span>"),t([document.documentElement,document.body]).animate({scrollTop:t(e.RF.errField).offset().top-12},600)}}}))},r){if(s.length&&0!==b&&c.length&&e.formDataRender){var m=e.formDataRender,f=[],g=[];if(m.map(t=>{"top"==t.placement?f.push(t):g.push(t)}),0==e.created_account&&(t('form[action*="/account"] input[type*="password"]').remove(),t('form[action*="/account"] label[for="'+o+'"]').remove()),2!==e.created_account){f.length&&t(c).formRender({formData:f,dataType:"json"}),g.length&&t(s).formRender({formData:g,dataType:"json"});let a=500;1643==e.storeId&&(a=1e3),setTimeout((function(){e.RF.getRequireField()}),a)}e.RF.getVatValidationInput(),e.RF.getABNValidationInput(),2!==e.created_account&&e.RF.handleSubmitFormDefault(u,m),e.reCAPCHA&&e.RF.renderReCAPCHA()}if(l.length&&d.length&&0!==b&&e.formDataRender){m=e.formDataRender;var h=[],_=[];m.map(t=>{"top"==t.placement?h.push(t):_.push(t)}),0==e.created_account&&(t('form[action*="/account"] input[type*="password"]').remove(),t('form[action*="/account"] label[for="'+o+'"]').remove()),2!==e.created_account&&(h.length&&t(l).formRender({formData:h,dataType:"json"}),_.length&&t(d).formRender({formData:_,dataType:"json"}),setTimeout((function(){e.RF.getRequireField()}),500)),e.RF.getVatValidationInput(),2!==e.created_account&&e.RF.handleSubmitFormDefault(p,m)}}else if("/account/register"!==window.location.pathname){t('form[action*="/account"]').find("#bss-b2b-registration-form-render").length&&t('form[action*="/account"]').remove()}else t("#bss-b2b-registration-form-render").remove()}(t,BSS_B2B,n,r)))}if("undefined"==typeof jQuery||-1==function(t,e){if("string"!=typeof t)return!1;if("string"!=typeof e)return!1;t=t.split("."),e=e.split(".");const a=Math.min(t.length,e.length);for(let r=0;r<a;++r){if(t[r]=parseInt(t[r],10),e[r]=parseInt(e[r],10),t[r]>e[r])return 1;if(t[r]<e[r])return-1}return t.length==e.length?0:t.length<e.length?-1:1}(jQuery.fn.jquery,"1.7")){if(void 0===m)var m={};console.log("Load form render");var f=jQuery.noConflict(!0);window.jQuery=f,b(f)}else{if(void 0===m)m={};console.log("Load form render"),b(jQuery)}}]);
</script>
